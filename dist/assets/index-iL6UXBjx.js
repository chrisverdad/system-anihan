var zt=Object.defineProperty;var Jt=(o,a,t)=>a in o?zt(o,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[a]=t;var Le=(o,a,t)=>Jt(o,typeof a!="symbol"?a+"":a,t);import{z as Qe,A as O,B as ie,c,v as d,f as e,d as xe,C as pt,D as _e,E as Tt,l as Te,e as Q,y as $,w as ce,F as ne,j as de,b as Ae,n as ae,g as re,t as s,u as S,G as me,H as He,i as Pe,I as J,J as oe,K as ze,L as Me,M as ue,r as vt,q as gt,N as Ht,a as nt,O as Gt,P as Qt,s as Kt,Q as Xt}from"./vendor-BuiIlcsT.js";import{u as he,s as Yt}from"./toast-BUQCWNsa.js";import{C as Oe,a as xt,L as yt,B as _t,p as ft,b as ht,c as bt,A as es,d as wt,P as $t,D as ts,e as St,f as kt}from"./charts-oO3rIFIG.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const y of document.querySelectorAll('link[rel="modulepreload"]'))l(y);new MutationObserver(y=>{for(const p of y)if(p.type==="childList")for(const n of p.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&l(n)}).observe(document,{childList:!0,subtree:!0});function t(y){const p={};return y.integrity&&(p.integrity=y.integrity),y.referrerPolicy&&(p.referrerPolicy=y.referrerPolicy),y.crossOrigin==="use-credentials"?p.credentials="include":y.crossOrigin==="anonymous"?p.credentials="omit":p.credentials="same-origin",p}function l(y){if(y.ep)return;y.ep=!0;const p=t(y);fetch(y.href,p)}})();const et={},ss=(et==null?void 0:et.VITE_API_BASE_URL)||"http://localhost:3000/api/v1";class as{constructor(a=ss){Le(this,"baseURL");Le(this,"token",null);this.baseURL=a,this.token=localStorage.getItem("anihan_token")}async request(a,t={}){const l=`${this.baseURL}${a}`,y=t.body instanceof FormData,p={...this.token&&{Authorization:`Bearer ${this.token}`},...t.headers};y||(p["Content-Type"]="application/json");const n={headers:p,...t};try{const x=await fetch(l,n),W=x.headers.get("content-type");if(!W||!W.includes("application/json")){const F=await x.text();throw new Error(`Invalid response format: ${F.substring(0,100)}`)}const B=await x.json();if(!x.ok)throw new Error(B.message||`Request failed with status ${x.status}`);return B}catch(x){throw console.error("API Request failed:",{url:l,error:x.message,stack:x.stack}),x.message?x:new Error(`Network error: ${x.message||"Failed to connect to server"}`)}}async login(a,t){const l=await this.request("/auth/login",{method:"POST",body:JSON.stringify({email:a,password:t})});return l.success&&l.data.token&&(this.token=l.data.token,localStorage.setItem("anihan_token",this.token),localStorage.setItem("anihan_user",JSON.stringify(l.data.user))),l}async register(a,t){const l=new FormData;Object.keys(a).forEach(n=>{const x=a[n];x!=null&&l.append(n,String(x))}),t&&l.append("business_license",t);const y=await fetch(`${this.baseURL}/auth/register`,{method:"POST",headers:{...this.token&&{Authorization:`Bearer ${this.token}`}},body:l}),p=await y.json();if(!y.ok)throw new Error(p.message||"Request failed");return p.success&&p.data.token&&(this.token=p.data.token,localStorage.setItem("anihan_token",this.token),localStorage.setItem("anihan_user",JSON.stringify(p.data.user))),p}async logout(){try{await this.request("/auth/logout",{method:"POST"})}catch(a){console.error("Logout API call failed:",a)}finally{this.token=null,localStorage.removeItem("anihan_token"),localStorage.removeItem("anihan_user")}}async getCurrentUser(){return await this.request("/auth/me")}async updateProfile(a){const t=await this.request("/auth/profile",{method:"PUT",body:JSON.stringify(a)});return t.success&&t.data.user&&localStorage.setItem("anihan_user",JSON.stringify(t.data.user)),t}async getAllUsers(){return await this.request(`/auth/users?_=${Date.now()}`)}async createUser(a){return await this.request("/auth/users",{method:"POST",body:JSON.stringify(a)})}async updateUserStatus(a,t){return await this.request(`/auth/users/${a}/status`,{method:"PUT",body:JSON.stringify(t)})}async updateUser(a,t,l){const y=new FormData;Object.keys(t).forEach(x=>{y.append(x,t[x])}),l&&y.append("profile_photo",l);const p=await fetch(`${this.baseURL}/auth/users/${a}`,{method:"PUT",headers:{...this.token&&{Authorization:`Bearer ${this.token}`}},body:y}),n=await p.json();if(!p.ok)throw new Error(n.message||"Request failed");return n}async deleteUser(a){return await this.request(`/auth/users/${a}`,{method:"DELETE"})}async getProducts(){return await this.request(`/products?_=${Date.now()}`)}async getProduct(a){return await this.request(`/products/${a}`)}async createProduct(a,t){const l=new FormData;Object.keys(a).forEach(n=>{n!=="image_file"&&n!=="image_preview"&&l.append(n,a[n])}),t&&l.append("image",t);const y=await fetch(`${this.baseURL}/products`,{method:"POST",headers:{...this.token&&{Authorization:`Bearer ${this.token}`}},body:l}),p=await y.json();if(!y.ok)throw new Error(p.message||"Request failed");return p}async updateProduct(a,t,l){const y=new FormData;Object.keys(t).forEach(x=>{x!=="image_file"&&x!=="image_preview"&&y.append(x,t[x])}),l&&y.append("image",l);const p=await fetch(`${this.baseURL}/products/${a}`,{method:"PUT",headers:{...this.token&&{Authorization:`Bearer ${this.token}`}},body:y}),n=await p.json();if(!p.ok)throw new Error(n.message||"Request failed");return n}async deleteProduct(a){return await this.request(`/products/${a}`,{method:"DELETE"})}async getOrders(){return await this.request(`/orders?_=${Date.now()}`)}async getOrder(a){return await this.request(`/orders/${a}`)}async createOrder(a){return await this.request("/orders",{method:"POST",body:JSON.stringify(a)})}async updateOrder(a,t){return await this.request(`/orders/${a}`,{method:"PUT",body:JSON.stringify(t)})}async deleteOrder(a){return await this.request(`/orders/${a}`,{method:"DELETE"})}async getWasteTypes(){return await this.request("/waste/types")}async getWasteCategories(){return await this.request(`/waste/categories?_=${Date.now()}`)}async createWasteCategory(a){return await this.request("/waste/categories",{method:"POST",body:JSON.stringify(a)})}async updateWasteCategory(a,t){return await this.request(`/waste/categories/${a}`,{method:"PUT",body:JSON.stringify(t)})}async deleteWasteCategory(a){return await this.request(`/waste/categories/${a}`,{method:"DELETE"})}async getWasteSubmissions(){return await this.request(`/waste/submissions?_=${Date.now()}`)}async createWasteSubmission(a){return await this.request("/waste/submissions",{method:"POST",body:JSON.stringify(a)})}async updateWasteSubmission(a,t){return await this.request(`/waste/submissions/${a}`,{method:"PUT",body:JSON.stringify(t)})}async deleteWasteSubmission(a){return await this.request(`/waste/submissions/${a}`,{method:"DELETE"})}async getSourceWasteSubmissions(){return await this.request(`/waste/source-submissions?_=${Date.now()}`)}async createSourceWasteSubmission(a){const t=a instanceof FormData?a:JSON.stringify(a);return await this.request("/waste/source-submissions",{method:"POST",body:t})}async updateSourceWasteSubmission(a,t){const l=t instanceof FormData?t:JSON.stringify(t);return await this.request(`/waste/source-submissions/${a}`,{method:"PUT",body:l})}async deleteSourceWasteSubmission(a){return await this.request(`/waste/source-submissions/${a}`,{method:"DELETE"})}async getInventoryItems(){return await this.request(`/waste/inventory?_=${Date.now()}`)}async createInventoryItem(a){const t=a instanceof FormData?a:JSON.stringify(a);return await this.request("/waste/inventory",{method:"POST",body:t})}async updateInventoryItem(a,t){const l=t instanceof FormData?t:JSON.stringify(t);return await this.request(`/waste/inventory/${a}`,{method:"PUT",body:l})}async deleteInventoryItem(a){return await this.request(`/waste/inventory/${a}`,{method:"DELETE"})}async healthCheck(){return await this.request("/health")}setToken(a){this.token=a,localStorage.setItem("anihan_token",a)}getToken(){return this.token}clearToken(){this.token=null,localStorage.removeItem("anihan_token")}}const ve=new as;function tt(o){return{...o,id:String((o==null?void 0:o.id)??""),is_active:(o==null?void 0:o.is_active)!==void 0?!!o.is_active:!0}}const $e=Qe("users",()=>{const o=O([]),a=O(!1),t=O(null),l=[{id:"1",email:"admin@anihan.com",password:"admin123",full_name:"Admin User",role:"admin",phone:"+63 912 345 6789",address:"Butuan City, Agusan del Norte",created_at:"2024-01-01T00:00:00Z",updated_at:"2024-01-01T00:00:00Z",is_active:!0},{id:"2",email:"vendor@anihan.com",password:"vendor123",full_name:"Maria Santos",role:"vendor",phone:"+63 912 345 6787",address:"Public Market, Butuan City",created_at:"2024-01-15T00:00:00Z",updated_at:"2024-01-15T00:00:00Z",is_active:!0},{id:"3",email:"user@anihan.com",password:"user123",full_name:"Pedro Garcia",role:"user",phone:"+63 912 345 6786",address:"Residential Area, Butuan City",created_at:"2024-01-15T00:00:00Z",updated_at:"2024-01-15T00:00:00Z",is_active:!0},{id:"4",email:"vendor2@anihan.com",password:"vendor123",full_name:"Juan Dela Cruz",role:"vendor",phone:"+63 912 345 6785",address:"Farmers Market, Butuan City",created_at:"2024-01-20T00:00:00Z",updated_at:"2024-01-20T00:00:00Z",is_active:!0},{id:"5",email:"vendor3@anihan.com",password:"vendor123",full_name:"Ana Rodriguez",role:"vendor",phone:"+63 912 345 6784",address:"Central Market, Butuan City",created_at:"2024-01-25T00:00:00Z",updated_at:"2024-01-25T00:00:00Z",is_active:!0}],y=async()=>{a.value=!0,t.value=null;try{const h=await ve.getAllUsers();if(h!=null&&h.success&&Array.isArray(h.data)){o.value=h.data.map(tt);return}}catch{}try{const h=localStorage.getItem("anihan_users");h?o.value=JSON.parse(h):(o.value=[...l],localStorage.setItem("anihan_users",JSON.stringify(o.value))),o.value.length===0&&(o.value=[...l],localStorage.setItem("anihan_users",JSON.stringify(o.value)))}catch(h){t.value=h.message||"Failed to load users",o.value=[...l],localStorage.setItem("anihan_users",JSON.stringify(o.value))}finally{a.value=!1}},p=async h=>{try{await new Promise(D=>setTimeout(D,300));const _=o.value.find(D=>D.id===h);if(!_)throw new Error("User not found");return _}catch(_){throw t.value=_.message||"Failed to fetch user",_}},n=async(h,_)=>{a.value=!0,t.value=null;try{const D=await ve.updateUserStatus(h,_);if(D!=null&&D.success&&D.data){const g=tt(D.data),T=o.value.findIndex(N=>String(N.id)===String(h));return T!==-1?o.value[T]={...o.value[T],...g}:o.value=[g,...o.value],g}throw new Error("Failed to update user")}catch(D){throw t.value=D.message||"Failed to update user",D}finally{a.value=!1}};return{users:o,loading:a,error:t,loadUsers:y,getUserById:p,updateUser:n,deleteUser:async h=>{a.value=!0;try{await new Promise(D=>setTimeout(D,200));const _=o.value.findIndex(D=>D.id===h);if(_!==-1)return o.value.splice(_,1),localStorage.setItem("anihan_users",JSON.stringify(o.value)),!0;throw new Error("User not found")}catch(_){throw t.value=_.message||"Failed to delete user",_}finally{a.value=!1}},toggleUserStatus:async h=>{try{const _=o.value.find(D=>D.id===h);if(!_)throw new Error("User not found");return await n(h,{is_active:!_.is_active})}catch(_){throw t.value=_.message||"Failed to toggle user status",_}},getUsersByRole:async h=>{try{return await new Promise(_=>setTimeout(_,300)),o.value.filter(_=>_.role===h&&_.is_active)}catch(_){throw t.value=_.message||"Failed to fetch users by role",_}},createUser:async h=>{a.value=!0,t.value=null;try{const _=await ve.createUser({full_name:h.full_name,email:h.email,password:h.password||"changeme123",role:h.role,phone:h.phone||"",address:h.address||""});if(_!=null&&_.success&&_.data){const D=tt(_.data);return o.value=[D,...o.value],D}throw new Error("Failed to create user")}catch(_){throw t.value=_.message||"Failed to create user",_}finally{a.value=!1}}}}),fe=Qe("auth",()=>{const o=O(null),a=O(!1),t=O(null),l=ie(()=>!!o.value),y=ie(()=>{var v;return((v=o.value)==null?void 0:v.role)==="admin"}),p=ie(()=>{var v;return((v=o.value)==null?void 0:v.role)==="vendor"}),n=()=>{const v=localStorage.getItem("anihan_user");if(v)try{const m=JSON.parse(v);o.value={...m,id:String((m==null?void 0:m.id)??""),role:String((m==null?void 0:m.role)??"user"),is_active:(m==null?void 0:m.is_active)!==void 0?!!m.is_active:!0}}catch{localStorage.removeItem("anihan_user"),localStorage.removeItem("anihan_token")}},x=v=>({...v,id:String((v==null?void 0:v.id)??""),role:String((v==null?void 0:v.role)??"user"),is_active:(v==null?void 0:v.is_active)!==void 0?!!v.is_active:!0}),W=async v=>{a.value=!0,t.value=null;try{const m=await ve.login(v.email,v.password);if(m.success&&m.data&&m.data.user&&m.data.token){const b=x(m.data.user);return o.value=b,ve.setToken(m.data.token),localStorage.setItem("anihan_user",JSON.stringify(b)),b}throw new Error(m.message||"Login failed - invalid response")}catch(m){throw console.error("API login error:",m),t.value=m.message||"Login failed. Please check your credentials.",new Error(m.message||"Invalid email or password")}finally{a.value=!1}},B=async(v,m)=>{a.value=!0,t.value=null;try{const b=await ve.register(v,m);if(!b.success||!b.data)throw new Error(b.message||"Registration failed");const{user:C,token:L}=b.data;return(C==null?void 0:C.role)==="user"&&L&&(o.value=C,ve.setToken(L),localStorage.setItem("anihan_user",JSON.stringify(C)),localStorage.setItem("anihan_token",L)),C}catch(b){throw t.value=b.message||"Registration failed",b}finally{a.value=!1}},F=async()=>{a.value=!0;try{await new Promise(v=>setTimeout(v,100)),o.value=null,localStorage.removeItem("anihan_user"),localStorage.removeItem("anihan_token")}catch(v){t.value=v.message||"Logout failed"}finally{a.value=!1}};return{user:o,loading:a,error:t,isAuthenticated:l,isAdmin:y,isVendor:p,login:W,register:B,logout:F,initializeAuth:n,updateProfile:async v=>{if(o.value){a.value=!0;try{await new Promise(M=>setTimeout(M,200));const b=await $e().updateUser(o.value.id,v),{password:C,...L}=b;return o.value=L,localStorage.setItem("anihan_user",JSON.stringify(L)),L}catch(m){throw t.value=m.message||"Profile update failed",m}finally{a.value=!1}}},refreshUser:async()=>{if(l.value)try{await new Promise(b=>setTimeout(b,100));const v=$e();await v.loadUsers();const m=v.users.find(b=>{var C;return b.id===((C=o.value)==null?void 0:C.id)});if(m){const{password:b,...C}=m;o.value=C,localStorage.setItem("anihan_user",JSON.stringify(C))}else await F()}catch(v){console.error("Failed to refresh user data:",v),await F()}},getAllUsers:async()=>{if(!y.value)throw new Error("Unauthorized");a.value=!0;try{await new Promise(m=>setTimeout(m,200));const v=$e();return await v.loadUsers(),v.users}catch(v){throw t.value=v.message||"Failed to fetch users",v}finally{a.value=!1}},updateUserStatus:async(v,m)=>{if(!y.value)throw new Error("Unauthorized");a.value=!0;try{return await new Promise(L=>setTimeout(L,200)),await $e().updateUser(v,m)}catch(b){throw t.value=b.message||"Failed to update user status",b}finally{a.value=!1}},updateUser:async(v,m,b)=>{if(!y.value)throw new Error("Unauthorized");a.value=!0;try{await new Promise(r=>setTimeout(r,200));const C=$e(),L={...m};return b&&(L.profile_photo=URL.createObjectURL(b)),await C.updateUser(v,L)}catch(C){throw t.value=C.message||"Failed to update user",C}finally{a.value=!1}},deleteUser:async v=>{if(!y.value)throw new Error("Unauthorized");a.value=!0;try{return await new Promise(C=>setTimeout(C,200)),await $e().deleteUser(v)}catch(m){throw t.value=m.message||"Failed to delete user",m}finally{a.value=!1}}}});function st(o){return{...o,id:String((o==null?void 0:o.id)??""),created_at:(o==null?void 0:o.created_at)??new Date().toISOString(),updated_at:(o==null?void 0:o.updated_at)??new Date().toISOString()}}const Ie=Qe("products",()=>{const o=O([]),a=O([]),t=O([]),l=O(!1),y=O(null),p=[{id:"1",name:"Organic Banana Compost",description:"Rich compost made from overripe bananas, perfect for organic gardening",price:150,category:"compost",image_url:"/images/banana-compost.jpg",stock_quantity:25,unit:"kg",is_available:!0,created_at:"2024-01-15T00:00:00Z",updated_at:"2024-01-15T00:00:00Z"},{id:"2",name:"Tomato Fertilizer",description:"Natural fertilizer derived from bruised tomatoes, rich in nutrients",price:200,category:"fertilizer",image_url:"/images/tomato-fertilizer.jpg",stock_quantity:15,unit:"bags",is_available:!0,created_at:"2024-02-10T00:00:00Z",updated_at:"2024-02-10T00:00:00Z"},{id:"3",name:"Mango Jam",description:"Delicious jam made from damaged mangoes, sweet and natural",price:80,category:"preserved_food",image_url:"/images/mango-jam.jpg",stock_quantity:30,unit:"bottles",is_available:!0,created_at:"2024-03-05T00:00:00Z",updated_at:"2024-03-05T00:00:00Z"},{id:"4",name:"Vegetable Compost",description:"Mixed vegetable compost from various damaged produce",price:120,category:"compost",image_url:"/images/vegetable-compost.jpg",stock_quantity:20,unit:"kg",is_available:!0,created_at:"2024-04-01T00:00:00Z",updated_at:"2024-04-01T00:00:00Z"},{id:"5",name:"Fruit Fertilizer",description:"Nutrient-rich fertilizer made from fruit waste",price:180,category:"fertilizer",image_url:"/images/fruit-fertilizer.jpg",stock_quantity:12,unit:"bags",is_available:!0,created_at:"2024-05-15T00:00:00Z",updated_at:"2024-05-15T00:00:00Z"},{id:"6",name:"Apple Preserves",description:"Sweet preserves made from bruised apples",price:90,category:"preserved_food",image_url:"/images/apple-preserves.jpg",stock_quantity:0,unit:"jars",is_available:!1,created_at:"2024-06-01T00:00:00Z",updated_at:"2024-06-01T00:00:00Z"}],n=[],x=async()=>{l.value=!0;try{try{const w=await ve.getProducts();if(w.success&&w.data){o.value=w.data.map(st),localStorage.setItem("anihan_products",JSON.stringify(o.value));return}}catch(w){console.warn("API load failed, using localStorage:",w.message)}const r=localStorage.getItem("anihan_products");r?o.value=JSON.parse(r):(o.value=[...p],localStorage.setItem("anihan_products",JSON.stringify(o.value)))}catch(r){y.value=r.message||"Failed to load products",o.value=[...p],localStorage.setItem("anihan_products",JSON.stringify(o.value))}finally{l.value=!1}},W=r=>{var i,A;const w={id:String((r==null?void 0:r.id)??""),user_id:typeof(r==null?void 0:r.user_id)=="object"?String(((i=r.user_id)==null?void 0:i.id)??r.user_id):String((r==null?void 0:r.user_id)??""),product_id:typeof(r==null?void 0:r.product_id)=="object"?String(((A=r.product_id)==null?void 0:A.id)??r.product_id):String((r==null?void 0:r.product_id)??""),quantity:Number(r==null?void 0:r.quantity)||0,total_price:Number(r==null?void 0:r.total_price)||0,status:(r==null?void 0:r.status)??"pending",payment_status:(r==null?void 0:r.payment_status)??"pending",payment_method:(r==null?void 0:r.payment_method)??"cash",payment_reference:(r==null?void 0:r.payment_reference)??"",delivery_status:(r==null?void 0:r.delivery_status)??"pending",delivery_address:(r==null?void 0:r.delivery_address)??"",delivery_notes:(r==null?void 0:r.delivery_notes)??"",order_date:(r==null?void 0:r.order_date)??new Date().toISOString()};return typeof(r==null?void 0:r.user_id)=="object"&&(w.user=r.user_id),typeof(r==null?void 0:r.product_id)=="object"&&(w.product=r.product_id),w},B=async()=>{l.value=!0;try{try{const w=await ve.getOrders();if(w.success&&w.data){a.value=w.data.map(W),localStorage.setItem("anihan_orders",JSON.stringify(a.value)),await F();return}}catch(w){console.warn("API load orders failed, using localStorage:",w.message)}const r=localStorage.getItem("anihan_orders");r?(a.value=JSON.parse(r),await F()):(a.value=[...n],localStorage.setItem("anihan_orders",JSON.stringify(a.value))),a.value.length===0&&(a.value=[...n],localStorage.setItem("anihan_orders",JSON.stringify(a.value)))}catch(r){y.value=r.message||"Failed to load orders",a.value=[...n],localStorage.setItem("anihan_orders",JSON.stringify(a.value))}finally{l.value=!1}},F=async()=>{try{const r=$e();await r.loadUsers();const w=r.users;let i=!1;for(const A of a.value)if(A.user&&(A.user.email==="user@anihan.com"||A.user.full_name==="User")){const f=w.find(E=>E.id===A.user_id);f&&(A.user={id:f.id,email:f.email,full_name:f.full_name,role:f.role,phone:f.phone,address:f.address,created_at:f.created_at,updated_at:f.updated_at,is_active:f.is_active},i=!0)}i&&localStorage.setItem("anihan_orders",JSON.stringify(a.value))}catch(r){console.error("Failed to sync order user data:",r)}},h=async(r,w)=>{l.value=!0;try{try{const f=await ve.createProduct(r,w);if(f.success&&f.data){const E=st(f.data);return o.value=[E,...o.value],localStorage.setItem("anihan_products",JSON.stringify(o.value)),E}}catch(f){console.warn("API create failed, using localStorage:",f.message)}await new Promise(f=>setTimeout(f,500));const A={...{...r,is_available:r.stock_quantity>0?r.is_available:!1},id:(o.value.length+1).toString(),created_at:new Date().toISOString(),updated_at:new Date().toISOString()};return o.value.unshift(A),localStorage.setItem("anihan_products",JSON.stringify(o.value)),A}catch(i){throw y.value=i.message||"Failed to add product",i}finally{l.value=!1}},_=async(r,w,i)=>{l.value=!0;try{try{const f=await ve.updateProduct(r,w,i);if(f.success&&f.data){const E=st(f.data),Z=o.value.findIndex(R=>String(R.id)===String(r));return Z!==-1?o.value[Z]=E:o.value=[E,...o.value],localStorage.setItem("anihan_products",JSON.stringify(o.value)),E}}catch(f){console.warn("API update failed, using localStorage:",f.message)}await new Promise(f=>setTimeout(f,500));const A=o.value.findIndex(f=>f.id===r);if(A!==-1){const f={...o.value[A],...w,updated_at:new Date().toISOString()};return w.stock_quantity!==void 0&&w.stock_quantity===0&&(f.is_available=!1),o.value[A]=f,localStorage.setItem("anihan_products",JSON.stringify(o.value)),o.value[A]}throw new Error("Product not found")}catch(A){throw y.value=A.message||"Failed to update product",A}finally{l.value=!1}},D=async r=>{l.value=!0;try{try{await ve.deleteProduct(r);const i=o.value.findIndex(A=>String(A.id)===String(r));return i!==-1&&o.value.splice(i,1),localStorage.setItem("anihan_products",JSON.stringify(o.value)),!0}catch(i){console.warn("API delete failed, using localStorage:",i.message)}await new Promise(i=>setTimeout(i,500));const w=o.value.findIndex(i=>String(i.id)===String(r));if(w!==-1)return o.value.splice(w,1),localStorage.setItem("anihan_products",JSON.stringify(o.value)),!0;throw new Error("Product not found")}catch(w){throw y.value=w.message||"Failed to delete product",w}finally{l.value=!1}},g=async r=>{l.value=!0;try{const i=fe().user;if(!i)throw new Error("User not authenticated");const A=o.value.find(R=>String(R.id)===String(r.product_id));if(!A)throw new Error("Product not found");if(A.stock_quantity<r.quantity)throw new Error("Insufficient stock");const f={user_id:Number(i.id)||i.id,product_id:Number(r.product_id)||r.product_id,quantity:r.quantity,total_price:r.total_price,payment_method:r.payment_method||"cash",payment_reference:r.payment_reference||"",delivery_address:r.delivery_address||"",delivery_notes:r.delivery_notes||""};try{const R=await ve.createOrder(f);if(R.success&&R.data){const te=W(R.data);a.value=[te,...a.value];const pe={id:`DEL-${te.id}`,order_id:te.id,status:te.delivery_status,notes:te.delivery_notes??"",created_at:new Date().toISOString(),updated_at:new Date().toISOString(),order:te};t.value=[pe,...t.value];const ee=o.value.findIndex(U=>String(U.id)===String(r.product_id));return ee!==-1&&(o.value[ee].stock_quantity=A.stock_quantity-r.quantity,o.value[ee].updated_at=new Date().toISOString(),o.value[ee].is_available=o.value[ee].stock_quantity>0),localStorage.setItem("anihan_orders",JSON.stringify(a.value)),localStorage.setItem("anihan_products",JSON.stringify(o.value)),localStorage.setItem("anihan_deliveries",JSON.stringify(t.value)),te}}catch(R){console.warn("API create order failed:",R.message)}A.stock_quantity-=r.quantity,A.updated_at=new Date().toISOString();const E={...r,id:`ORD-${String(a.value.length+1).padStart(3,"0")}`,status:"pending",payment_status:r.payment_status||"pending",payment_method:r.payment_method||"cash",payment_reference:r.payment_reference||"",delivery_status:r.delivery_status||"pending",delivery_address:r.delivery_address||"",delivery_notes:r.delivery_notes||"",order_date:new Date().toISOString(),user:{id:i.id,email:i.email,full_name:i.full_name,role:i.role,phone:i.phone,address:i.address,created_at:i.created_at,updated_at:i.updated_at,is_active:i.is_active},product:A};a.value=[E,...a.value];const Z={id:`DEL-${E.id}`,order_id:E.id,status:E.delivery_status,notes:E.delivery_notes??"",created_at:new Date().toISOString(),updated_at:new Date().toISOString(),order:E};return t.value=[Z,...t.value],localStorage.setItem("anihan_orders",JSON.stringify(a.value)),localStorage.setItem("anihan_products",JSON.stringify(o.value)),localStorage.setItem("anihan_deliveries",JSON.stringify(t.value)),E}catch(w){throw y.value=w.message||"Failed to place order",w}finally{l.value=!1}},T=async(r,w)=>{l.value=!0;try{await new Promise(A=>setTimeout(A,500));const i=a.value.findIndex(A=>A.id===r);if(i!==-1)return a.value[i]={...a.value[i],status:w,delivery_date:w==="delivered"?new Date().toISOString():a.value[i].delivery_date},localStorage.setItem("anihan_orders",JSON.stringify(a.value)),a.value[i];throw new Error("Order not found")}catch(i){throw y.value=i.message||"Failed to update order status",i}finally{l.value=!1}},N=async(r,w)=>{l.value=!0;try{await new Promise(A=>setTimeout(A,500));const i=a.value.findIndex(A=>A.id===r);if(i!==-1)return a.value[i]={...a.value[i],payment_status:w},localStorage.setItem("anihan_orders",JSON.stringify(a.value)),a.value[i];throw new Error("Order not found")}catch(i){throw y.value=i.message||"Failed to update payment status",i}finally{l.value=!1}},v=async(r,w)=>{l.value=!0;try{await new Promise(A=>setTimeout(A,500));const i=a.value.findIndex(A=>A.id===r);if(i!==-1){a.value[i]={...a.value[i],delivery_status:w};const A=t.value.findIndex(f=>f.order_id===r);return A!==-1&&(t.value[A]={...t.value[A],status:w,updated_at:new Date().toISOString()},localStorage.setItem("anihan_deliveries",JSON.stringify(t.value))),localStorage.setItem("anihan_orders",JSON.stringify(a.value)),a.value[i]}throw new Error("Order not found")}catch(i){throw y.value=i.message||"Failed to update delivery status",i}finally{l.value=!1}},m=async()=>{try{return await new Promise(r=>setTimeout(r,100)),{total:o.value.length,available:o.value.filter(r=>r.is_available).length,outOfStock:o.value.filter(r=>!r.is_available).length,totalStock:o.value.reduce((r,w)=>r+w.stock_quantity,0),byCategory:o.value.reduce((r,w)=>(r[w.category]=(r[w.category]||0)+1,r),{})}}catch(r){throw y.value=r.message||"Failed to fetch product stats",r}},b=async()=>{try{return await new Promise(r=>setTimeout(r,100)),{total:a.value.length,pending:a.value.filter(r=>r.status==="pending").length,confirmed:a.value.filter(r=>r.status==="confirmed").length,processing:a.value.filter(r=>r.status==="processing").length,shipped:a.value.filter(r=>r.status==="shipped").length,delivered:a.value.filter(r=>r.status==="delivered").length,cancelled:a.value.filter(r=>r.status==="cancelled").length,totalRevenue:a.value.reduce((r,w)=>r+w.total_price,0)}}catch(r){throw y.value=r.message||"Failed to fetch order stats",r}},C=async()=>{l.value=!0;try{const r=localStorage.getItem("anihan_deliveries");if(r)t.value=JSON.parse(r),await L();else{const w=a.value.map(i=>({id:`DEL-${i.id}`,order_id:i.id,delivery_person:i.delivery_status==="delivered"?"Juan Dela Cruz":void 0,delivery_vehicle:i.delivery_status==="delivered"?"Motorcycle":void 0,pickup_time:i.delivery_status==="delivered"?"2024-12-12T08:00:00Z":void 0,delivery_time:i.delivery_status==="delivered"?i.delivery_date:void 0,status:i.delivery_status,notes:i.delivery_notes,created_at:i.order_date,updated_at:i.order_date,order:i}));t.value=w,localStorage.setItem("anihan_deliveries",JSON.stringify(t.value))}}catch(r){throw y.value=r.message||"Failed to load deliveries",r}finally{l.value=!1}},L=async()=>{try{const r=$e();await r.loadUsers();const w=r.users;let i=!1;for(const A of t.value)if(A.order&&A.order.user&&(A.order.user.email==="user@anihan.com"||A.order.user.full_name==="User")){const f=w.find(E=>E.id===A.order.user_id);f&&(A.order.user={id:f.id,email:f.email,full_name:f.full_name,role:f.role,phone:f.phone,address:f.address,created_at:f.created_at,updated_at:f.updated_at,is_active:f.is_active},i=!0)}i&&localStorage.setItem("anihan_deliveries",JSON.stringify(t.value))}catch(r){console.error("Failed to sync delivery order data:",r)}};return{products:o,orders:a,deliveries:t,loading:l,error:y,loadProducts:x,loadOrders:B,loadDeliveries:C,addProduct:h,updateProduct:_,deleteProduct:D,placeOrder:g,updateOrderStatus:T,updateOrderPaymentStatus:N,updateOrderDeliveryStatus:v,updateDeliveryStatus:async(r,w,i,A)=>{l.value=!0;try{const f=t.value.find(E=>E.id===r);if(f){f.status=w,f.delivery_person=i||f.delivery_person,f.delivery_vehicle=A||f.delivery_vehicle,f.updated_at=new Date().toISOString();const E=a.value.find(Z=>Z.id===f.order_id);E&&(E.delivery_status=w,w==="delivered"&&(E.delivery_date=new Date().toISOString())),localStorage.setItem("anihan_deliveries",JSON.stringify(t.value)),localStorage.setItem("anihan_orders",JSON.stringify(a.value))}}catch(f){throw y.value=f.message||"Failed to update delivery status",f}finally{l.value=!1}},getProductStats:m,getOrderStats:b}}),at={},Ct=o=>!!(o&&o.startsWith("blob:")),os=o=>!!(o&&o.startsWith("data:")),Re=()=>"/placeholder-image.svg",Mt=o=>new Promise((a,t)=>{const l=new FileReader;l.onload=()=>a(l.result),l.onerror=t,l.readAsDataURL(o)}),Je=o=>{if(o==null)return o;if(Array.isArray(o))return o.map(a=>Je(a));if(typeof o=="object"){const a={};for(const[t,l]of Object.entries(o))(t.includes("image")||t.includes("photo")||t.includes("url"))&&typeof l=="string"&&Ct(l)?a[t]=Re():a[t]=Je(l);return a}return o},rs=()=>{const o=Object.keys(localStorage);let a=0;o.forEach(t=>{if(t.startsWith("anihan_"))try{const l=JSON.parse(localStorage.getItem(t)||"");if(Array.isArray(l)){let y=!1;l.forEach(p=>{const n=Je(p);JSON.stringify(n)!==JSON.stringify(p)&&(Object.assign(p,n),y=!0,a++)}),y&&localStorage.setItem(t,JSON.stringify(l))}}catch{}}),a>0&&console.log(`âœ… Fixed ${a} broken blob URLs in localStorage`)},Ge=o=>!o||Ct(o)?Re():o;function dt(){const o=at==null?void 0:at.VITE_API_BASE_URL;return o?o.replace(/\/api\/v1\/?$/,"").replace(/\/$/,""):"http://localhost:3000"}function It(o){if(!o||String(o).trim()==="")return"";const a=String(o).trim().replace(/\\/g,"/");if(a.startsWith("http://")||a.startsWith("https://"))return a;const t=a.startsWith("/")?a:`/${a}`;return`${dt()}${t}`}const is=600,Ce=o=>{if(!o||String(o).trim()==="")return Re();const a=String(o).trim().replace(/\\/g,"/");if(a.startsWith("http://")||a.startsWith("https://")||Ct(a))return a;if(os(a))return a.length<=is?Re():a;const t=a.includes("/"),l=a.startsWith("/")?a:t?`/${a}`:`/images/${a}`;if(l.startsWith("/photos/")||l.startsWith("/images/")||l.startsWith("/uploads/")){const y=dt(),p=l.split("/").filter(Boolean),n=p[p.length-1],x=encodeURIComponent(n),W=p.slice(0,-1).join("/")+"/"+x;return`${y}/${W}`}return`${dt()}${l}`};function ot(o){const a={...o};return a.id=String((o==null?void 0:o.id)??""),(o==null?void 0:o.vendor_id)!=null&&typeof o.vendor_id=="object"?(a.vendor_id=String(o.vendor_id.id??o.vendor_id),a.vendor=o.vendor_id):a.vendor_id=String((o==null?void 0:o.vendor_id)??""),(o==null?void 0:o.category_id)!=null&&typeof o.category_id=="object"?(a.category_id=String(o.category_id.id??o.category_id),a.category=o.category_id):a.category_id=String((o==null?void 0:o.category_id)??""),a}function rt(o){return{...o,id:String((o==null?void 0:o.id)??""),is_active:(o==null?void 0:o.is_active)===!0||(o==null?void 0:o.is_active)===1,created_at:(o==null?void 0:o.created_at)??new Date().toISOString(),updated_at:(o==null?void 0:o.updated_at)??new Date().toISOString()}}function it(o){var t,l;const a={...o,id:String((o==null?void 0:o.id)??""),vendor_id:typeof(o==null?void 0:o.vendor_id)=="object"?String(((t=o.vendor_id)==null?void 0:t.id)??o.vendor_id):String((o==null?void 0:o.vendor_id)??""),quantity:Number(o==null?void 0:o.quantity)??0,price_per_unit:Number(o==null?void 0:o.price_per_unit)??0,total_value:Number(o==null?void 0:o.total_value)??0,is_available:(o==null?void 0:o.is_available)===!0||(o==null?void 0:o.is_available)===1,created_at:(o==null?void 0:o.created_at)??new Date().toISOString(),updated_at:(o==null?void 0:o.updated_at)??new Date().toISOString(),image_url:(o==null?void 0:o.image_url)!=null?String(o.image_url).trim():""};if((o==null?void 0:o.source_waste_submission_id)!=null&&typeof o.source_waste_submission_id=="object"?a.source_waste_submission_id=String(((l=o.source_waste_submission_id)==null?void 0:l.id)??o.source_waste_submission_id):(o==null?void 0:o.source_waste_submission_id)!=null&&(a.source_waste_submission_id=String(o.source_waste_submission_id)),a.quantity_history&&typeof a.quantity_history=="string")try{a.quantity_history=JSON.parse(a.quantity_history)}catch{a.quantity_history=[]}return a}const je=Qe("waste",()=>{const o=O([]),a=O([]),t=O([]),l=O([]),y=O([{id:"compost",name:"Compost",description:"Organic compost made from waste materials"},{id:"fertilizer",name:"Fertilizer",description:"Natural fertilizers derived from waste"},{id:"preserved_food",name:"Preserved Food",description:"Food products preserved from waste materials"},{id:"processed_food",name:"Processed Food",description:"Processed food items made from waste"},{id:"other",name:"Other",description:"Other products made from waste materials"}]),p=O([]),n=O(!1),x=O(null),W=[{id:"1",name:"Fruits",description:"Fresh and processed fruits",color:"#f59e0b",icon:"SunIcon",is_active:!0,created_at:"2024-01-01T00:00:00Z",updated_at:"2024-01-01T00:00:00Z"},{id:"2",name:"Vegetables",description:"Fresh and processed vegetables",color:"#10b981",icon:"SunIcon",is_active:!0,created_at:"2024-01-01T00:00:00Z",updated_at:"2024-01-01T00:00:00Z"},{id:"3",name:"Grains",description:"Rice, wheat, and other grains",color:"#8b5cf6",icon:"CubeIcon",is_active:!0,created_at:"2024-01-01T00:00:00Z",updated_at:"2024-01-01T00:00:00Z"},{id:"4",name:"Dairy",description:"Milk, cheese, and dairy products",color:"#06b6d4",icon:"HeartIcon",is_active:!0,created_at:"2024-01-01T00:00:00Z",updated_at:"2024-01-01T00:00:00Z"},{id:"5",name:"Meat",description:"Fresh and processed meat products",color:"#ef4444",icon:"FireIcon",is_active:!0,created_at:"2024-01-01T00:00:00Z",updated_at:"2024-01-01T00:00:00Z"}],B=[{id:"1",vendor_id:"2",category_id:"1",title:"Overripe Bananas",description:"Bananas from yesterday's harvest that are too ripe for sale",quantity:25,unit:"kg",condition:"overripe",location:"Public Market, Butuan City",pickup_date:"2024-12-20T10:00:00Z",estimated_value:500,image_url:"/images/overripe-bananas.jpg",status:"pending",submitted_at:"2024-12-15T18:30:00Z",category:W[0],vendor:{id:"2",email:"vendor@anihan.com",full_name:"Maria Santos",role:"vendor",phone:"+63 912 345 6787",address:"Public Market, Butuan City",created_at:"2024-01-15T00:00:00Z",updated_at:"2024-01-15T00:00:00Z",is_active:!0}},{id:"2",vendor_id:"4",category_id:"2",title:"Bruised Tomatoes",description:"Tomatoes with minor bruises from transport",quantity:15,unit:"pieces",condition:"slightly_damaged",location:"Farmers Market, Butuan City",pickup_date:"2024-12-21T14:00:00Z",estimated_value:300,image_url:"/images/bruised-tomatoes.jpg",status:"approved",submitted_at:"2024-12-15T00:45:00Z",category:W[1],vendor:{id:"4",email:"vendor2@anihan.com",full_name:"Juan Dela Cruz",role:"vendor",phone:"+63 912 345 6785",address:"Farmers Market, Butuan City",created_at:"2024-01-20T00:00:00Z",updated_at:"2024-01-20T00:00:00Z",is_active:!0}},{id:"3",vendor_id:"5",category_id:"1",title:"Damaged Mangoes",description:"Mangoes damaged during transport",quantity:8,unit:"pieces",condition:"bruised",location:"Central Market, Butuan City",pickup_date:"2024-12-19T09:00:00Z",estimated_value:200,image_url:"/images/damaged-mangoes.jpg",status:"processed",submitted_at:"2024-12-13T17:15:00Z",processed_at:"2024-12-13T19:30:00Z",category:W[0],vendor:{id:"5",email:"vendor3@anihan.com",full_name:"Ana Rodriguez",role:"vendor",phone:"+63 912 345 6784",address:"Central Market, Butuan City",created_at:"2024-01-25T00:00:00Z",updated_at:"2024-01-25T00:00:00Z",is_active:!0}}],F=[{id:"1",name:"Overripe Bananas",description:"Bananas that are too ripe for sale",image_url:"/photos/overripe banana.jpg",category:"fruit",damage_level:"moderate"},{id:"2",name:"Bruised Tomatoes",description:"Tomatoes with minor bruises",image_url:"/photos/bruised tomatos.jpg",category:"vegetable",damage_level:"slight"},{id:"3",name:"Damaged Mangoes",description:"Mangoes with severe damage",image_url:"/photos/damage mangoes.jpg",category:"fruit",damage_level:"severe"},{id:"4",name:"Wilted Lettuce",description:"Lettuce that has started to wilt",image_url:"/photos/wilted lettuce.jpg",category:"vegetable",damage_level:"moderate"},{id:"5",name:"Damaged Apples",description:"Apples with bruises and cuts",image_url:"/photos/damage apples.webp",category:"fruit",damage_level:"moderate"},{id:"6",name:"Overripe Papayas",description:"Papayas that are too soft for sale",image_url:"/photos/overripe papaya.jpg",category:"fruit",damage_level:"moderate"},{id:"7",name:"Banana Compost",description:"Compost made from overripe bananas",image_url:"/photos/banana compost.jpg",category:"fruit",damage_level:"moderate"},{id:"8",name:"Dairy Products",description:"Expired or damaged dairy products",image_url:"/photos/dairy.jpg",category:"other",damage_level:"moderate"},{id:"9",name:"Grains",description:"Damaged or spoiled grains",image_url:"/photos/grains.jpg",category:"grain",damage_level:"slight"},{id:"10",name:"Mango Jam",description:"Processed product from damaged mangoes",image_url:"/photos/mango jam.webp",category:"fruit",damage_level:"moderate"},{id:"11",name:"Meat Products",description:"Expired or damaged meat products",image_url:"/photos/meat'.jpeg",category:"other",damage_level:"severe"},{id:"12",name:"Tomato Fertilizer",description:"Fertilizer made from bruised tomatoes",image_url:"/photos/tomato fertilizer.jpg",category:"vegetable",damage_level:"moderate"},{id:"13",name:"Vegetable Compost",description:"Compost made from vegetable waste",image_url:"/photos/vegetable compost.webp",category:"vegetable",damage_level:"moderate"},{id:"14",name:"Mixed Vegetables",description:"Various damaged or spoiled vegetables",image_url:"/photos/vegetables.webp",category:"vegetable",damage_level:"moderate"}],h=[{id:"1",user_id:"2",waste_type_id:"1",quantity:25,unit:"kg",description:"Bananas from yesterday's harvest",status:"pending",submitted_at:"2024-12-15T18:30:00Z",createdAt:"2024-12-15T18:30:00Z",title:"Overripe Bananas",category:"fruit",condition:"overripe",user:{id:"2",email:"vendor@anihan.com",full_name:"Maria Santos",role:"vendor",phone:"+63 912 345 6787",address:"Public Market, Butuan City",created_at:"2024-01-15T00:00:00Z",updated_at:"2024-01-15T00:00:00Z",is_active:!0},waste_type:F[0]},{id:"2",user_id:"2",waste_type_id:"2",quantity:15,unit:"pieces",description:"Tomatoes with minor bruises",status:"approved",submitted_at:"2024-12-15T00:45:00Z",createdAt:"2024-12-15T00:45:00Z",title:"Bruised Tomatoes",category:"vegetable",condition:"slightly_damaged",user:{id:"2",email:"vendor@anihan.com",full_name:"Maria Santos",role:"vendor",phone:"+63 912 345 6787",address:"Public Market, Butuan City",created_at:"2024-01-15T00:00:00Z",updated_at:"2024-01-15T00:00:00Z",is_active:!0},waste_type:F[1]},{id:"3",user_id:"2",waste_type_id:"3",quantity:8,unit:"pieces",description:"Mangoes damaged during transport",status:"processed",submitted_at:"2024-12-13T17:15:00Z",createdAt:"2024-12-13T17:15:00Z",processed_at:"2024-12-13T19:30:00Z",title:"Damaged Mangoes",category:"fruit",condition:"bruised",user:{id:"2",email:"vendor@anihan.com",full_name:"Maria Santos",role:"vendor",phone:"+63 912 345 6787",address:"Public Market, Butuan City",created_at:"2024-01-15T00:00:00Z",updated_at:"2024-01-15T00:00:00Z",is_active:!0},waste_type:F[2]},{id:"4",user_id:"2",waste_type_id:"4",quantity:12,unit:"pieces",description:"Lettuce that has started to wilt",status:"rejected",submitted_at:"2024-12-12T22:20:00Z",createdAt:"2024-12-12T22:20:00Z",title:"Wilted Lettuce",category:"vegetable",condition:"overripe",user:{id:"2",email:"vendor@anihan.com",full_name:"Maria Santos",role:"vendor",phone:"+63 912 345 6787",address:"Public Market, Butuan City",created_at:"2024-01-15T00:00:00Z",updated_at:"2024-01-15T00:00:00Z",is_active:!0},waste_type:F[3]},{id:"5",user_id:"2",waste_type_id:"1",quantity:20,unit:"pieces",description:"Overripe bananas from current user",status:"processed",submitted_at:"2024-10-24T17:00:00Z",createdAt:"2024-10-24T17:00:00Z",processed_at:"2024-10-24T19:00:00Z",title:"Overripe Bananas",category:"fruit",condition:"overripe",user:{id:"9",email:"vendor3@example.com",full_name:"Carlos Rodriguez",role:"vendor",phone:"+63 912 345 6780",address:"Butuan City, Agusan del Norte",created_at:"2024-10-24T00:00:00Z",updated_at:"2024-10-24T00:00:00Z",is_active:!0},waste_type:F[0]},{id:"6",user_id:"2",waste_type_id:"2",quantity:30,unit:"kg",description:"Bruised tomatoes from current user",status:"processed",submitted_at:"2024-10-24T16:00:00Z",createdAt:"2024-10-24T16:00:00Z",processed_at:"2024-10-24T18:00:00Z",title:"Bruised Tomatoes",category:"vegetable",condition:"slightly_damaged",user:{id:"9",email:"vendor3@example.com",full_name:"Carlos Rodriguez",role:"vendor",phone:"+63 912 345 6780",address:"Butuan City, Agusan del Norte",created_at:"2024-10-24T00:00:00Z",updated_at:"2024-10-24T00:00:00Z",is_active:!0},waste_type:F[1]}],_=[{id:"1",vendor_id:"2",product_name:"Banana Compost",description:"High-quality compost made from overripe bananas",category:"compost",quantity:50,unit:"kg",price_per_unit:25,total_value:1250,source_waste_submission_id:"1",image_url:"/placeholder-image.svg",is_available:!0,created_at:"2024-12-13T11:30:00Z",updated_at:"2024-12-13T11:30:00Z",waste_submission:h[0],quantity_history:[{id:"1",inventory_item_id:"1",adjustment_type:"set",quantity_change:50,previous_quantity:0,new_quantity:50,reason:"Initial inventory creation",adjusted_by:"Maria Santos",adjusted_at:"2024-12-13T11:30:00Z",notes:"Created from processed banana waste"}]},{id:"2",vendor_id:"2",product_name:"Tomato Fertilizer",description:"Organic fertilizer made from bruised tomatoes",category:"fertilizer",quantity:20,unit:"bags",price_per_unit:150,total_value:3e3,source_waste_submission_id:"2",image_url:"/placeholder-image.svg",is_available:!0,created_at:"2024-12-14T16:45:00Z",updated_at:"2024-12-14T16:45:00Z",waste_submission:h[1],quantity_history:[{id:"2",inventory_item_id:"2",adjustment_type:"set",quantity_change:20,previous_quantity:0,new_quantity:20,reason:"Initial inventory creation",adjusted_by:"Maria Santos",adjusted_at:"2024-12-14T16:45:00Z",notes:"Created from processed tomato waste"}]},{id:"3",vendor_id:"2",product_name:"Mango Jam",description:"Sweet jam made from damaged mangoes",category:"preserved_food",quantity:15,unit:"jars",price_per_unit:80,total_value:1200,source_waste_submission_id:"3",image_url:"/placeholder-image.svg",is_available:!0,created_at:"2024-12-13T11:30:00Z",updated_at:"2024-12-13T11:30:00Z",waste_submission:h[2],quantity_history:[{id:"3",inventory_item_id:"3",adjustment_type:"set",quantity_change:15,previous_quantity:0,new_quantity:15,reason:"Initial inventory creation",adjusted_by:"Maria Santos",adjusted_at:"2024-12-13T11:30:00Z",notes:"Created from processed mango waste"}]},{id:"4",vendor_id:"2",product_name:"Vegetable Compost",description:"Mixed vegetable compost from various damaged produce",category:"compost",quantity:30,unit:"kg",price_per_unit:20,total_value:600,source_waste_submission_id:"4",image_url:"/placeholder-image.svg",is_available:!0,created_at:"2024-12-15T09:15:00Z",updated_at:"2024-12-15T09:15:00Z",waste_submission:h[0],quantity_history:[{id:"4",inventory_item_id:"4",adjustment_type:"set",quantity_change:30,previous_quantity:0,new_quantity:30,reason:"Initial inventory creation",adjusted_by:"Maria Santos",adjusted_at:"2024-12-15T09:15:00Z",notes:"Created from mixed vegetable waste"}]}],D=async()=>{try{const u={"/images/overripe-bananas.jpg":"/photos/overripe banana.jpg","/images/bruised-tomatoes.jpg":"/photos/bruised tomatos.jpg","/images/damaged-mangoes.jpg":"/photos/damage mangoes.jpg","/images/wilted-lettuce.jpg":"/photos/wilted lettuce.jpg","/images/damaged-apples.jpg":"/photos/damage apples.webp","/images/overripe-papayas.jpg":"/photos/overripe papaya.jpg"},I=localStorage.getItem("anihan_waste_types");if(I){a.value=JSON.parse(I);let j=!1;a.value.forEach(X=>{X.image_url&&u[X.image_url]&&(X.image_url=u[X.image_url],j=!0)}),a.value.length<F.length&&(a.value=[...F],j=!0),j&&localStorage.setItem("anihan_waste_types",JSON.stringify(a.value))}else await new Promise(j=>setTimeout(j,100)),a.value=[...F],localStorage.setItem("anihan_waste_types",JSON.stringify(a.value));return(a.value.length===0||a.value.length<F.length)&&(a.value=[...F],localStorage.setItem("anihan_waste_types",JSON.stringify(a.value))),a.value}catch(u){throw x.value=u.message||"Failed to load waste types",a.value=[...F],localStorage.setItem("anihan_waste_types",JSON.stringify(a.value)),u}},g=async()=>{n.value=!0;try{try{const I=await ve.getWasteSubmissions();if(I.success&&I.data){o.value=I.data.map(j=>({...j,id:String((j==null?void 0:j.id)??""),user_id:(j==null?void 0:j.user_id)!=null?String(j.user_id):j==null?void 0:j.user_id,waste_type_id:(j==null?void 0:j.waste_type_id)!=null?String(j.waste_type_id):j==null?void 0:j.waste_type_id})),localStorage.setItem("anihan_submissions",JSON.stringify(o.value)),await T();return}}catch(I){console.warn("API load waste submissions failed, using localStorage:",I.message)}const u=localStorage.getItem("anihan_submissions");u?(o.value=JSON.parse(u),await T()):(o.value=[...h],localStorage.setItem("anihan_submissions",JSON.stringify(o.value))),o.value.length===0&&(o.value=[...h],localStorage.setItem("anihan_submissions",JSON.stringify(o.value)))}catch(u){x.value=u.message||"Failed to load submissions",o.value=[...h],localStorage.setItem("anihan_submissions",JSON.stringify(o.value))}finally{n.value=!1}},T=async()=>{try{const u=$e();await u.loadUsers();const I=u.users;let j=!1;for(const X of o.value)if(X.user&&(X.user.email==="vendor3@example.com"||X.user.full_name==="Carlos Rodriguez")){const z=I.find(K=>K.id===X.user_id);z&&(X.user={id:z.id,email:z.email,full_name:z.full_name,role:z.role,phone:z.phone,address:z.address,created_at:z.created_at,updated_at:z.updated_at,is_active:z.is_active},j=!0)}j&&localStorage.setItem("anihan_submissions",JSON.stringify(o.value))}catch(u){console.error("Failed to sync waste user data:",u)}},N=async u=>{n.value=!0;try{const j=fe().user;if(!j)throw new Error("User not authenticated");const X=a.value.find(se=>String(se.id)===String(u.waste_type_id));if(!X)throw new Error("Waste type not found");const z={user_id:Number(j.id)||j.id,waste_type_id:Number(u.waste_type_id)||u.waste_type_id,quantity:Number(u.quantity)||0,unit:u.unit,description:u.description||"",status:"pending",title:u.title||"",category:u.category||"",condition:u.condition||""};try{const se=await ve.createWasteSubmission(z);if(se.success&&se.data){const V=se.data,be={...V,id:String((V==null?void 0:V.id)??""),user_id:V==null?void 0:V.user_id,waste_type_id:V==null?void 0:V.waste_type_id,status:(V==null?void 0:V.status)??"pending",submitted_at:(V==null?void 0:V.submitted_at)??new Date().toISOString(),user:{id:j.id,email:j.email,full_name:j.full_name,role:j.role,phone:j.phone,address:j.address,created_at:j.created_at,updated_at:j.updated_at,is_active:j.is_active},waste_type:X};return o.value=[be,...o.value],localStorage.setItem("anihan_submissions",JSON.stringify(o.value)),be}}catch(se){console.warn("API create waste submission failed:",se.message)}const K={...u,id:(o.value.length+1).toString(),status:"pending",submitted_at:new Date().toISOString(),user:{id:j.id,email:j.email,full_name:j.full_name,role:j.role,phone:j.phone,address:j.address,created_at:j.created_at,updated_at:j.updated_at,is_active:j.is_active},waste_type:X};return o.value=[K,...o.value],localStorage.setItem("anihan_submissions",JSON.stringify(o.value)),K}catch(I){throw x.value=I.message||"Failed to submit waste",I}finally{n.value=!1}},v=async(u,I)=>{n.value=!0;try{await new Promise(X=>setTimeout(X,500));const j=o.value.findIndex(X=>X.id===u);if(j!==-1)return o.value[j]={...o.value[j],status:I,processed_at:I==="processed"?new Date().toISOString():o.value[j].processed_at},localStorage.setItem("anihan_submissions",JSON.stringify(o.value)),o.value[j];throw new Error("Submission not found")}catch(j){throw x.value=j.message||"Failed to update waste status",j}finally{n.value=!1}},m=async u=>{n.value=!0;try{await new Promise(j=>setTimeout(j,500));const I=o.value.findIndex(j=>j.id===u);if(I!==-1)return o.value.splice(I,1),localStorage.setItem("anihan_submissions",JSON.stringify(o.value)),!0;throw new Error("Submission not found")}catch(I){throw x.value=I.message||"Failed to delete waste submission",I}finally{n.value=!1}},b=async()=>{try{return await new Promise(u=>setTimeout(u,300)),{total:o.value.length,pending:o.value.filter(u=>u.status==="pending").length,approved:o.value.filter(u=>u.status==="approved").length,processed:o.value.filter(u=>u.status==="processed").length,rejected:o.value.filter(u=>u.status==="rejected").length,totalQuantity:o.value.reduce((u,I)=>u+I.quantity,0)}}catch(u){throw x.value=u.message||"Failed to fetch waste stats",u}},C=async()=>{n.value=!0;try{try{const I=await ve.getInventoryItems();if(I.success&&I.data){t.value=I.data.map(it),localStorage.setItem("anihan_inventory",JSON.stringify(t.value));return}}catch(I){console.warn("API load inventory items failed, using localStorage:",I.message)}const u=localStorage.getItem("anihan_inventory");u?t.value=JSON.parse(u):(t.value=[..._],localStorage.setItem("anihan_inventory",JSON.stringify(t.value))),t.value.length===0&&(t.value=[..._],localStorage.setItem("anihan_inventory",JSON.stringify(t.value)))}catch(u){x.value=u.message||"Failed to load inventory items",t.value=[..._],localStorage.setItem("anihan_inventory",JSON.stringify(t.value))}finally{n.value=!1}},L=async u=>{n.value=!0;try{const I=(Number(u.quantity)||0)*(Number(u.price_per_unit)||0);let j;if(u.image_file instanceof File){const K=new FormData;K.append("vendor_id",String(u.vendor_id??"")),K.append("product_name",u.product_name??""),K.append("description",u.description??""),K.append("category",u.category??""),K.append("quantity",String(u.quantity??0)),K.append("unit",u.unit??"kg"),K.append("price_per_unit",String(u.price_per_unit??0)),K.append("total_value",String(I)),K.append("source_waste_submission_id",String(u.source_waste_submission_id??"")),K.append("is_available",u.is_available!==!1?"true":"false"),K.append("image",u.image_file),j=K}else j={vendor_id:Number(u.vendor_id)||u.vendor_id,product_name:u.product_name,description:u.description,category:u.category,quantity:Number(u.quantity)||0,unit:u.unit,price_per_unit:Number(u.price_per_unit)||0,total_value:I,source_waste_submission_id:u.source_waste_submission_id||null,image_url:u.image_url||"",is_available:u.is_available!==!1};try{const K=await ve.createInventoryItem(j);if(K.success&&K.data){const se=it(K.data);return t.value=[se,...t.value],localStorage.setItem("anihan_inventory",JSON.stringify(t.value)),se}}catch(K){console.warn("API create inventory item failed:",K.message)}let X;u.source_waste_submission_id&&(X=o.value.find(K=>String(K.id)===String(u.source_waste_submission_id)));const z={...u,id:(t.value.length+1).toString(),total_value:I,created_at:new Date().toISOString(),updated_at:new Date().toISOString(),waste_submission:X};return t.value=[z,...t.value],localStorage.setItem("anihan_inventory",JSON.stringify(t.value)),z}catch(I){throw x.value=I.message||"Failed to add item to inventory",I}finally{n.value=!1}},M=async(u,I)=>{n.value=!0;try{let j;if(I.image_file instanceof File){const z=new FormData;z.append("product_name",String(I.product_name??"")),z.append("description",String(I.description??"")),z.append("category",String(I.category??"")),z.append("quantity",String(I.quantity??0)),z.append("unit",String(I.unit??"kg")),z.append("price_per_unit",String(I.price_per_unit??0)),z.append("total_value",String(I.total_value??0)),z.append("source_waste_submission_id",String(I.source_waste_submission_id??"")),z.append("is_available",I.is_available!==!1?"true":"false"),z.append("image",I.image_file),j=z}else{if(j={...I},delete j.image_file,j.quantity!==void 0&&(j.quantity=Number(j.quantity)),j.price_per_unit!==void 0&&(j.price_per_unit=Number(j.price_per_unit)),j.quantity!==void 0&&j.price_per_unit!==void 0)j.total_value=j.quantity*j.price_per_unit;else if(j.quantity!==void 0||j.price_per_unit!==void 0){const z=t.value.findIndex(K=>String(K.id)===String(u));if(z!==-1){const K=j.quantity??t.value[z].quantity,se=j.price_per_unit??t.value[z].price_per_unit;j.total_value=K*se}}j.is_available!==void 0&&(j.is_available=!!j.is_available)}try{const z=await ve.updateInventoryItem(u,j);if(z.success&&z.data){const K=it(z.data),se=t.value.findIndex(V=>String(V.id)===String(u));return se!==-1?t.value[se]=K:t.value=[K,...t.value],localStorage.setItem("anihan_inventory",JSON.stringify(t.value)),K}}catch(z){console.warn("API update inventory item failed:",z.message)}const X=t.value.findIndex(z=>String(z.id)===String(u));if(X!==-1)return t.value[X]={...t.value[X],...I,updated_at:new Date().toISOString(),total_value:I.quantity!=null&&I.price_per_unit!=null?I.quantity*I.price_per_unit:I.quantity!=null?I.quantity*t.value[X].price_per_unit:I.price_per_unit!=null?t.value[X].quantity*I.price_per_unit:t.value[X].total_value},localStorage.setItem("anihan_inventory",JSON.stringify(t.value)),t.value[X];throw new Error("Inventory item not found")}catch(j){throw x.value=j.message||"Failed to update inventory item",j}finally{n.value=!1}},r=async u=>{n.value=!0;try{try{await ve.deleteInventoryItem(u);const j=t.value.findIndex(X=>String(X.id)===String(u));return j!==-1&&(t.value.splice(j,1),localStorage.setItem("anihan_inventory",JSON.stringify(t.value))),!0}catch(j){console.warn("API delete inventory item failed:",j.message)}const I=t.value.findIndex(j=>String(j.id)===String(u));if(I!==-1)return t.value.splice(I,1),localStorage.setItem("anihan_inventory",JSON.stringify(t.value)),!0;throw new Error("Inventory item not found")}catch(I){throw x.value=I.message||"Failed to delete inventory item",I}finally{n.value=!1}},w=async(u,I,j,X,z,K)=>{n.value=!0;try{await new Promise(Ye=>setTimeout(Ye,500));const se=t.value.findIndex(Ye=>Ye.id===u);if(se===-1)throw new Error("Inventory item not found");const V=t.value[se],be=V.quantity;let Ee;switch(I){case"add":Ee=be+j;break;case"subtract":Ee=Math.max(0,be-j);break;case"set":Ee=j;break;default:throw new Error("Invalid adjustment type")}const Rt={id:`${u}-${Date.now()}`,inventory_item_id:u,adjustment_type:I,quantity_change:I==="set"?Ee:j,previous_quantity:be,new_quantity:Ee,reason:X,adjusted_by:z,adjusted_at:new Date().toISOString(),notes:K};return t.value[se]={...V,quantity:Ee,total_value:Ee*V.price_per_unit,updated_at:new Date().toISOString(),quantity_history:[...V.quantity_history||[],Rt]},localStorage.setItem("anihan_inventory",JSON.stringify(t.value)),t.value[se]}catch(se){throw x.value=se.message||"Failed to adjust inventory quantity",se}finally{n.value=!1}},i=async()=>{n.value=!0;try{try{const I=await ve.getWasteCategories();if(I.success&&I.data){l.value=I.data.map(rt),localStorage.setItem("anihan_waste_categories",JSON.stringify(l.value));return}}catch(I){console.warn("API load waste categories failed, using localStorage:",I.message)}const u=localStorage.getItem("anihan_waste_categories");u?l.value=JSON.parse(u):(l.value=[...W],localStorage.setItem("anihan_waste_categories",JSON.stringify(l.value))),l.value.length===0&&(l.value=[...W],localStorage.setItem("anihan_waste_categories",JSON.stringify(l.value)))}catch(u){x.value=u.message||"Failed to load waste categories",l.value=[...W],localStorage.setItem("anihan_waste_categories",JSON.stringify(l.value))}finally{n.value=!1}},A=async u=>{n.value=!0;try{const I={name:u.name,description:u.description,color:u.color,icon:u.icon,is_active:u.is_active!==!1};try{const X=await ve.createWasteCategory(I);if(X.success&&X.data){const z=rt(X.data);return l.value=[z,...l.value],localStorage.setItem("anihan_waste_categories",JSON.stringify(l.value)),z}}catch(X){console.warn("API create waste category failed:",X.message)}const j={id:(l.value.length+1).toString(),...u,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};return l.value=[j,...l.value],localStorage.setItem("anihan_waste_categories",JSON.stringify(l.value)),j}catch(I){throw x.value=I.message||"Failed to create waste category",I}finally{n.value=!1}},f=async(u,I)=>{n.value=!0;try{const j={...I};j.is_active!==void 0&&(j.is_active=!!j.is_active);try{const z=await ve.updateWasteCategory(u,j);if(z.success&&z.data){const K=rt(z.data),se=l.value.findIndex(V=>String(V.id)===String(u));return se!==-1?l.value[se]=K:l.value=[K,...l.value],localStorage.setItem("anihan_waste_categories",JSON.stringify(l.value)),K}}catch(z){console.warn("API update waste category failed:",z.message)}const X=l.value.findIndex(z=>String(z.id)===String(u));if(X!==-1)return l.value[X]={...l.value[X],...I,updated_at:new Date().toISOString()},localStorage.setItem("anihan_waste_categories",JSON.stringify(l.value)),l.value[X];throw new Error("Waste category not found")}catch(j){throw x.value=j.message||"Failed to update waste category",j}finally{n.value=!1}},E=async u=>{n.value=!0;try{try{await ve.deleteWasteCategory(u);const j=l.value.findIndex(X=>String(X.id)===String(u));return j!==-1&&(l.value.splice(j,1),localStorage.setItem("anihan_waste_categories",JSON.stringify(l.value))),!0}catch(j){console.warn("API delete waste category failed:",j.message)}const I=l.value.findIndex(j=>String(j.id)===String(u));if(I!==-1)return l.value.splice(I,1),localStorage.setItem("anihan_waste_categories",JSON.stringify(l.value)),!0;throw new Error("Waste category not found")}catch(I){throw x.value=I.message||"Failed to delete waste category",I}finally{n.value=!1}},Z=async()=>{n.value=!0;try{const u=localStorage.getItem("anihan_product_categories");u?y.value=JSON.parse(u):(await new Promise(I=>setTimeout(I,200)),localStorage.setItem("anihan_product_categories",JSON.stringify(y.value)))}catch(u){x.value=u.message||"Failed to load product categories"}finally{n.value=!1}},R=async u=>{n.value=!0;try{await new Promise(j=>setTimeout(j,500));const I={id:(y.value.length+1).toString(),name:u.name,description:u.description};return y.value.push(I),localStorage.setItem("anihan_product_categories",JSON.stringify(y.value)),I}catch(I){throw x.value=I.message||"Failed to create product category",I}finally{n.value=!1}},te=async(u,I)=>{n.value=!0;try{await new Promise(X=>setTimeout(X,500));const j=y.value.findIndex(X=>X.id===u);if(j!==-1)return y.value[j]={...y.value[j],...I},localStorage.setItem("anihan_product_categories",JSON.stringify(y.value)),y.value[j];throw new Error("Category not found")}catch(j){throw x.value=j.message||"Failed to update product category",j}finally{n.value=!1}},pe=async u=>{n.value=!0;try{await new Promise(j=>setTimeout(j,500));const I=y.value.findIndex(j=>j.id===u);if(I!==-1)return y.value.splice(I,1),localStorage.setItem("anihan_product_categories",JSON.stringify(y.value)),!0;throw new Error("Category not found")}catch(I){throw x.value=I.message||"Failed to delete product category",I}finally{n.value=!1}},ee=async()=>{try{const u=localStorage.getItem("anihan_users");if(!u)return;const I=JSON.parse(u);p.value=p.value.map(j=>{if(!j.vendor&&j.vendor_id){const X=I.find(z=>z.id===j.vendor_id);if(X)return{...j,vendor:{id:X.id,email:X.email,full_name:X.full_name,role:X.role,phone:X.phone,address:X.address,created_at:X.created_at,updated_at:X.updated_at,is_active:X.is_active}}}return j}),localStorage.setItem("anihan_source_waste_submissions",JSON.stringify(p.value))}catch(u){console.error("Failed to sync vendor data:",u)}};return{submissions:o,wasteTypes:a,inventoryItems:t,wasteCategories:l,productCategories:y,sourceWasteSubmissions:p,loading:n,error:x,loadWasteTypes:D,loadSubmissions:g,submitWaste:N,updateWasteStatus:v,deleteWaste:m,getWasteStats:b,loadInventoryItems:C,addToInventory:L,updateInventoryItem:M,deleteInventoryItem:r,adjustInventoryQuantity:w,loadWasteCategories:i,createWasteCategory:A,updateWasteCategory:f,deleteWasteCategory:E,loadProductCategories:Z,createProductCategory:R,updateProductCategory:te,deleteProductCategory:pe,loadSourceWasteSubmissions:async()=>{n.value=!0;try{try{const I=await ve.getSourceWasteSubmissions();if(I.success&&I.data){p.value=I.data.map(ot),localStorage.setItem("anihan_source_waste_submissions",JSON.stringify(p.value)),await ee();return}}catch(I){console.warn("API load source waste submissions failed, using localStorage:",I.message)}const u=localStorage.getItem("anihan_source_waste_submissions");u?p.value=JSON.parse(u):(p.value=[...B],localStorage.setItem("anihan_source_waste_submissions",JSON.stringify(p.value))),p.value.length===0&&(p.value=[...B],localStorage.setItem("anihan_source_waste_submissions",JSON.stringify(p.value))),await ee()}catch(u){x.value=u.message||"Failed to load source waste submissions",p.value=[...B],localStorage.setItem("anihan_source_waste_submissions",JSON.stringify(p.value))}finally{n.value=!1}},syncVendorDataForSubmissions:ee,createSourceWasteSubmission:async u=>{n.value=!0;try{let I;if(u.image_file instanceof File){const K=new FormData;K.append("uploadType","waste"),K.append("vendor_id",String(u.vendor_id??"")),K.append("category_id",String(u.category_id??"")),K.append("title",u.title??""),K.append("description",u.description??""),K.append("quantity",String(u.quantity??0)),K.append("unit",u.unit??""),K.append("condition",u.condition??""),K.append("location",u.location??""),K.append("pickup_date",u.pickup_date??""),K.append("estimated_value",String(u.estimated_value??0)),K.append("status","pending"),K.append("image",u.image_file),I=K}else I={vendor_id:Number(u.vendor_id)||u.vendor_id,category_id:Number(u.category_id)||u.category_id,title:u.title,description:u.description,quantity:Number(u.quantity)||0,unit:u.unit,condition:u.condition,location:u.location,pickup_date:u.pickup_date,estimated_value:Number(u.estimated_value)||0,image_url:"",status:"pending"};try{const K=await ve.createSourceWasteSubmission(I);if(K.success&&K.data){const se=ot(K.data);return p.value=[se,...p.value],localStorage.setItem("anihan_source_waste_submissions",JSON.stringify(p.value)),se}}catch(K){if(console.warn("API create source waste submission failed:",K.message),K.message&&(K.message.includes("vendor")||K.message.includes("category")||K.message.includes("required")||K.message.includes("400")))throw K}const j=l.value.find(K=>String(K.id)===String(u.category_id)),X=I&&!(I instanceof FormData)?I.image_url:"",z={id:(p.value.length+1).toString(),vendor_id:String(u.vendor_id),category_id:String(u.category_id),title:u.title,description:u.description,quantity:u.quantity,unit:u.unit,condition:u.condition,location:u.location,pickup_date:u.pickup_date,estimated_value:u.estimated_value||0,image_url:X||void 0,status:"pending",submitted_at:new Date().toISOString(),category:j,vendor:u.vendor};return p.value=[z,...p.value],localStorage.setItem("anihan_source_waste_submissions",JSON.stringify(p.value)),z}catch(I){throw x.value=I.message||"Failed to create source waste submission",I}finally{n.value=!1}},updateSourceWasteSubmission:async(u,I)=>{n.value=!0;try{let j;if(I.image_file instanceof File){const z=new FormData;z.append("uploadType","waste"),z.append("title",I.title??""),z.append("description",I.description??""),z.append("quantity",String(I.quantity??0)),z.append("unit",I.unit??""),z.append("condition",I.condition??""),z.append("location",I.location??""),z.append("pickup_date",I.pickup_date??""),z.append("estimated_value",String(I.estimated_value??0)),z.append("status",I.status??"pending"),z.append("image",I.image_file),j=z}else{const z={...I};delete z.image_file,delete z.image_preview,delete z.vendor,delete z.category,z.category_id!==void 0&&(z.category_id=Number(z.category_id)||z.category_id),z.estimated_value!==void 0&&(z.estimated_value=Number(z.estimated_value)),z.quantity!==void 0&&(z.quantity=Number(z.quantity)),j=z}try{const z=await ve.updateSourceWasteSubmission(u,j);if(z.success&&z.data){const K=ot(z.data),se=p.value.findIndex(V=>String(V.id)===String(u));return se!==-1?p.value[se]=K:p.value=[K,...p.value],localStorage.setItem("anihan_source_waste_submissions",JSON.stringify(p.value)),K}}catch(z){console.warn("API update source waste submission failed:",z.message)}const X=p.value.findIndex(z=>String(z.id)===String(u));if(X!==-1){const z=l.value.find(se=>se.id===I.category_id);let K=p.value[X].image_url;if(I.image_file)try{K=await Mt(I.image_file)||K}catch{}return p.value[X]={...p.value[X],...I,category:z,image_url:K},localStorage.setItem("anihan_source_waste_submissions",JSON.stringify(p.value)),p.value[X]}throw new Error("Source waste submission not found")}catch(j){throw x.value=j.message||"Failed to update source waste submission",j}finally{n.value=!1}},deleteSourceWasteSubmission:async u=>{n.value=!0;try{try{await ve.deleteSourceWasteSubmission(u);const j=p.value.findIndex(X=>String(X.id)===String(u));return j!==-1&&(p.value.splice(j,1),localStorage.setItem("anihan_source_waste_submissions",JSON.stringify(p.value))),!0}catch(j){console.warn("API delete source waste submission failed:",j.message)}const I=p.value.findIndex(j=>String(j.id)===String(u));if(I!==-1)return p.value.splice(I,1),localStorage.setItem("anihan_source_waste_submissions",JSON.stringify(p.value)),!0;throw new Error("Source waste submission not found")}catch(I){throw x.value=I.message||"Failed to delete source waste submission",I}finally{n.value=!1}},fetchWastes:async()=>{n.value=!0,x.value=null;try{return await g(),{wastes:o.value}}catch(u){return x.value=u.message||"Failed to fetch wastes",null}finally{n.value=!1}},submitWasteToAPI:async u=>{var I;n.value=!0,x.value=null;try{const X=((I=fe().user)==null?void 0:I.id)||"2",z=await N({waste_type_id:u.waste_type_id||"1",quantity:u.quantity,unit:u.unit,description:u.description,user_id:X});return await g(),{success:!0,data:{waste:z}}}catch(j){return x.value=j.message||"Failed to submit waste",null}finally{n.value=!1}},updateWasteStatusAPI:async(u,I)=>{n.value=!0,x.value=null;try{return{success:!0,data:{waste:await v(u,I)}}}catch(j){throw x.value=j.message||"Failed to update waste status",j}finally{n.value=!1}},deleteWasteAPI:async u=>{n.value=!0,x.value=null;try{return await m(u),!0}catch(I){throw x.value=I.message||"Failed to delete waste",I}finally{n.value=!1}},fetchWasteStats:async()=>{n.value=!0,x.value=null;try{return b()}catch(u){throw x.value=u.message||"Failed to fetch waste stats",u}finally{n.value=!1}}}}),Ve=class Ve{constructor(){Le(this,"initialized",!1)}static getInstance(){return Ve.instance||(Ve.instance=new Ve),Ve.instance}async initializeAllStores(){if(!this.initialized)try{const a=fe(),t=Ie(),l=$e(),y=je();a.initializeAuth(),await Promise.all([t.loadProducts(),t.loadOrders(),l.loadUsers(),y.loadWasteTypes(),y.loadSubmissions(),y.loadInventoryItems(),y.loadWasteCategories(),y.loadSourceWasteSubmissions()]),this.initialized=!0}catch(a){console.error("Failed to initialize stores:",a),this.initialized=!0}}async refreshAllData(){try{const a=Ie(),t=$e(),l=je(),y=[];a.products.length===0&&y.push(a.loadProducts()),a.orders.length===0&&y.push(a.loadOrders()),t.users.length===0&&y.push(t.loadUsers()),l.wasteTypes.length===0&&y.push(l.loadWasteTypes()),l.submissions.length===0&&y.push(l.loadSubmissions()),l.inventoryItems.length===0&&y.push(l.loadInventoryItems()),l.wasteCategories.length===0&&y.push(l.loadWasteCategories()),l.sourceWasteSubmissions.length===0&&y.push(l.loadSourceWasteSubmissions()),y.length>0&&await Promise.all(y)}catch(a){console.error("Failed to refresh data:",a)}}saveAllData(){try{const a=Ie(),t=$e(),l=je();localStorage.setItem("anihan_products",JSON.stringify(a.products)),localStorage.setItem("anihan_orders",JSON.stringify(a.orders)),localStorage.setItem("anihan_users",JSON.stringify(t.users)),localStorage.setItem("anihan_waste_types",JSON.stringify(l.wasteTypes)),localStorage.setItem("anihan_submissions",JSON.stringify(l.submissions)),localStorage.setItem("anihan_inventory",JSON.stringify(l.inventoryItems)),localStorage.setItem("anihan_waste_categories",JSON.stringify(l.wasteCategories)),localStorage.setItem("anihan_source_waste_submissions",JSON.stringify(l.sourceWasteSubmissions)),console.log("All data saved successfully")}catch(a){console.error("Failed to save data:",a)}}clearAllData(){try{localStorage.removeItem("anihan_products"),localStorage.removeItem("anihan_orders"),localStorage.removeItem("anihan_users"),localStorage.removeItem("anihan_waste_types"),localStorage.removeItem("anihan_submissions"),localStorage.removeItem("anihan_inventory"),localStorage.removeItem("anihan_waste_categories"),localStorage.removeItem("anihan_source_waste_submissions"),localStorage.removeItem("anihan_user"),localStorage.removeItem("anihan_token"),console.log("All data cleared successfully")}catch(a){console.error("Failed to clear data:",a)}}getDataStatus(){return{products:!!localStorage.getItem("anihan_products"),orders:!!localStorage.getItem("anihan_orders"),users:!!localStorage.getItem("anihan_users"),wasteTypes:!!localStorage.getItem("anihan_waste_types"),submissions:!!localStorage.getItem("anihan_submissions"),inventory:!!localStorage.getItem("anihan_inventory"),wasteCategories:!!localStorage.getItem("anihan_waste_categories"),sourceWasteSubmissions:!!localStorage.getItem("anihan_source_waste_submissions"),auth:!!localStorage.getItem("anihan_user"),token:!!localStorage.getItem("anihan_token")}}};Le(Ve,"instance");let ct=Ve;const ut=ct.getInstance();function ls(o,a){return d(),c("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"})])}function ns(o,a){return d(),c("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"})])}function ds(o,a){return d(),c("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M14.857 17.082a23.848 23.848 0 0 0 5.454-1.31A8.967 8.967 0 0 1 18 9.75V9A6 6 0 0 0 6 9v.75a8.967 8.967 0 0 1-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714 0a24.255 24.255 0 0 1-5.714 0m5.714 0a3 3 0 1 1-5.714 0"})])}function cs(o,a){return d(),c("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m3.75 13.5 10.5-11.25L12 10.5h8.25L9.75 21.75 12 13.5H3.75Z"})])}function us(o,a){return d(),c("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6.827 6.175A2.31 2.31 0 0 1 5.186 7.23c-.38.054-.757.112-1.134.175C2.999 7.58 2.25 8.507 2.25 9.574V18a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9.574c0-1.067-.75-1.994-1.802-2.169a47.865 47.865 0 0 0-1.134-.175 2.31 2.31 0 0 1-1.64-1.055l-.822-1.316a2.192 2.192 0 0 0-1.736-1.039 48.774 48.774 0 0 0-5.232 0 2.192 2.192 0 0 0-1.736 1.039l-.821 1.316Z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16.5 12.75a4.5 4.5 0 1 1-9 0 4.5 4.5 0 0 1 9 0ZM18.75 10.5h.008v.008h-.008V10.5Z"})])}function We(o,a){return d(),c("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75ZM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625ZM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125Z"})])}function Se(o,a){return d(),c("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})])}function ke(o,a){return d(),c("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m4.5 12.75 6 6 9-13.5"})])}function ms(o,a){return d(),c("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m19.5 8.25-7.5 7.5-7.5-7.5"})])}function ps(o,a){return d(),c("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 19.5 8.25 12l7.5-7.5"})])}function vs(o,a){return d(),c("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"})])}function Ne(o,a){return d(),c("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})])}function Ft(o,a){return d(),c("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.25 15a4.5 4.5 0 0 0 4.5 4.5H18a3.75 3.75 0 0 0 1.332-7.257 3 3 0 0 0-3.758-3.848 5.25 5.25 0 0 0-10.233 2.33A4.502 4.502 0 0 0 2.25 15Z"})])}function Ke(o,a){return d(),c("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4.5 12a7.5 7.5 0 0 0 15 0m-15 0a7.5 7.5 0 1 1 15 0m-15 0H3m16.5 0H21m-1.5 0H12m-8.457 3.077 1.41-.513m14.095-5.13 1.41-.513M5.106 17.785l1.15-.964m11.49-9.642 1.149-.964M7.501 19.795l.75-1.3m7.5-12.99.75-1.3m-6.063 16.658.26-1.477m2.605-14.772.26-1.477m0 17.726-.26-1.477M10.698 4.614l-.26-1.477M16.5 19.794l-.75-1.299M7.5 4.205 12 12m6.894 5.785-1.149-.964M6.256 7.178l-1.15-.964m15.352 8.864-1.41-.513M4.954 9.435l-1.41-.514M12.002 12l-3.75 6.495"})])}function ge(o,a){return d(),c("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m21 7.5-9-5.25L3 7.5m18 0-9 5.25m9-5.25v9l-9 5.25M3 7.5l9 5.25M3 7.5v9l9 5.25m0-9v9"})])}function De(o,a){return d(),c("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 6v12m-3-2.818.879.659c1.171.879 3.07.879 4.242 0 1.172-.879 1.172-2.303 0-3.182C13.536 12.219 12.768 12 12 12c-.725 0-1.45-.22-2.003-.659-1.106-.879-1.106-2.303 0-3.182s2.9-.879 4.006 0l.415.33M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})])}function Nt(o,a){return d(),c("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m.75 12 3 3m0 0 3-3m-3 3v-6m-1.5-9H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"})])}function Fe(o,a){return d(),c("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"})])}function Ut(o,a){return d(),c("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m2.25 0H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"})])}function gs(o,a){return d(),c("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"})])}function xs(o,a){return d(),c("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"})])}function ys(o,a){return d(),c("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.362 5.214A8.252 8.252 0 0 1 12 21 8.25 8.25 0 0 1 6.038 7.047 8.287 8.287 0 0 0 9 9.601a8.983 8.983 0 0 1 3.361-6.867 8.21 8.21 0 0 0 3 2.48Z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 18a3.75 3.75 0 0 0 .495-7.468 5.99 5.99 0 0 0-1.925 3.547 5.975 5.975 0 0 1-2.133-1.001A3.75 3.75 0 0 0 12 18Z"})])}function Dt(o,a){return d(),c("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12Z"})])}function _s(o,a){return d(),c("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 18v-5.25m0 0a6.01 6.01 0 0 0 1.5-.189m-1.5.189a6.01 6.01 0 0 1-1.5-.189m3.75 7.478a12.06 12.06 0 0 1-4.5 0m3.75 2.383a14.406 14.406 0 0 1-3 0M14.25 18v-.192c0-.983.658-1.823 1.508-2.316a7.5 7.5 0 1 0-7.517 0c.85.493 1.509 1.333 1.509 2.316V18"})])}function fs(o,a){return d(),c("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8.25 6.75h12M8.25 12h12m-12 5.25h12M3.75 6.75h.007v.008H3.75V6.75Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0ZM3.75 12h.007v.008H3.75V12Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm-.375 5.25h.007v.008H3.75v-.008Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"})])}function Et(o,a){return d(),c("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"})])}function Vt(o,a){return d(),c("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L6.832 19.82a4.5 4.5 0 0 1-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 0 1 1.13-1.897L16.863 4.487Zm0 0L19.5 7.125"})])}function qe(o,a){return d(),c("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 4.5v15m7.5-7.5h-15"})])}function At(o,a){return d(),c("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M21.75 17.25v-.228a4.5 4.5 0 0 0-.12-1.03l-2.268-9.64a3.375 3.375 0 0 0-3.285-2.602H7.923a3.375 3.375 0 0 0-3.285 2.602l-2.268 9.64a4.5 4.5 0 0 0-.12 1.03v.228m19.5 0a3 3 0 0 1-3 3H5.25a3 3 0 0 1-3-3m19.5 0a3 3 0 0 0-3-3H5.25a3 3 0 0 0-3 3m16.5 0h.008v.008h-.008v-.008Zm-3 0h.008v.008h-.008v-.008Z"})])}function Ue(o,a){return d(),c("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 10.5V6a3.75 3.75 0 1 0-7.5 0v4.5m11.356-1.993 1.263 12c.07.665-.45 1.243-1.119 1.243H4.25a1.125 1.125 0 0 1-1.12-1.243l1.264-12A1.125 1.125 0 0 1 5.513 7.5h12.974c.576 0 1.059.435 1.119 1.007ZM8.625 10.5a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm7.5 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"})])}function jt(o,a){return d(),c("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9.813 15.904 9 18.75l-.813-2.846a4.5 4.5 0 0 0-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 0 0 3.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 0 0 3.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 0 0-3.09 3.09ZM18.259 8.715 18 9.75l-.259-1.035a3.375 3.375 0 0 0-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 0 0 2.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 0 0 2.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 0 0-2.456 2.456ZM16.894 20.567 16.5 21.75l-.394-1.183a2.25 2.25 0 0 0-1.423-1.423L13.5 18.75l1.183-.394a2.25 2.25 0 0 0 1.423-1.423l.394-1.183.394 1.183a2.25 2.25 0 0 0 1.423 1.423l1.183.394-1.183.394a2.25 2.25 0 0 0-1.423 1.423Z"})])}function hs(o,a){return d(),c("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 6A2.25 2.25 0 0 1 6 3.75h2.25A2.25 2.25 0 0 1 10.5 6v2.25a2.25 2.25 0 0 1-2.25 2.25H6a2.25 2.25 0 0 1-2.25-2.25V6ZM3.75 15.75A2.25 2.25 0 0 1 6 13.5h2.25a2.25 2.25 0 0 1 2.25 2.25V18a2.25 2.25 0 0 1-2.25 2.25H6A2.25 2.25 0 0 1 3.75 18v-2.25ZM13.5 6a2.25 2.25 0 0 1 2.25-2.25H18A2.25 2.25 0 0 1 20.25 6v2.25A2.25 2.25 0 0 1 18 10.5h-2.25a2.25 2.25 0 0 1-2.25-2.25V6ZM13.5 15.75a2.25 2.25 0 0 1 2.25-2.25H18a2.25 2.25 0 0 1 2.25 2.25V18A2.25 2.25 0 0 1 18 20.25h-2.25A2.25 2.25 0 0 1 13.5 18v-2.25Z"})])}function bs(o,a){return d(),c("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M11.48 3.499a.562.562 0 0 1 1.04 0l2.125 5.111a.563.563 0 0 0 .475.345l5.518.442c.499.04.701.663.321.988l-4.204 3.602a.563.563 0 0 0-.182.557l1.285 5.385a.562.562 0 0 1-.84.61l-4.725-2.885a.562.562 0 0 0-.586 0L6.982 20.54a.562.562 0 0 1-.84-.61l1.285-5.386a.562.562 0 0 0-.182-.557l-4.204-3.602a.562.562 0 0 1 .321-.988l5.518-.442a.563.563 0 0 0 .475-.345L11.48 3.5Z"})])}function Bt(o,a){return d(),c("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 3v2.25m6.364.386-1.591 1.591M21 12h-2.25m-.386 6.364-1.591-1.591M12 18.75V21m-4.773-4.227-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0Z"})])}function Ot(o,a){return d(),c("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9.568 3H5.25A2.25 2.25 0 0 0 3 5.25v4.318c0 .597.237 1.17.659 1.591l9.581 9.581c.699.699 1.78.872 2.607.33a18.095 18.095 0 0 0 5.223-5.223c.542-.827.369-1.908-.33-2.607L11.16 3.66A2.25 2.25 0 0 0 9.568 3Z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 6h.008v.008H6V6Z"})])}function Wt(o,a){return d(),c("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"})])}function Lt(o,a){return d(),c("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8.25 18.75a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m3 0h6m-9 0H3.375a1.125 1.125 0 0 1-1.125-1.125V14.25m17.25 4.5a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m3 0h1.125c.621 0 1.129-.504 1.09-1.124a17.902 17.902 0 0 0-3.213-9.193 2.056 2.056 0 0 0-1.58-.86H14.25M16.5 18.75h-2.25m0-11.177v-.958c0-.568-.422-1.048-.987-1.106a48.554 48.554 0 0 0-10.026 0 1.106 1.106 0 0 0-.987 1.106v7.635m12-6.677v6.677m0 4.5v-4.5m0 0h-12"})])}function Be(o,a){return d(),c("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M18 18.72a9.094 9.094 0 0 0 3.741-.479 3 3 0 0 0-4.682-2.72m.94 3.198.001.031c0 .225-.012.447-.037.666A11.944 11.944 0 0 1 12 21c-2.17 0-4.207-.576-5.963-1.584A6.062 6.062 0 0 1 6 18.719m12 0a5.971 5.971 0 0 0-.941-3.197m0 0A5.995 5.995 0 0 0 12 12.75a5.995 5.995 0 0 0-5.058 2.772m0 0a3 3 0 0 0-4.681 2.72 8.986 8.986 0 0 0 3.74.477m.94-3.197a5.971 5.971 0 0 0-.94 3.197M15 6.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm6 3a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Zm-13.5 0a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Z"})])}function Pt(o,a){return d(),c("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z"})])}function lt(o,a){return d(),c("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 19.128a9.38 9.38 0 0 0 2.625.372 9.337 9.337 0 0 0 4.121-.952 4.125 4.125 0 0 0-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 0 1 8.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0 1 11.964-3.07M12 6.375a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0Zm8.25 2.25a2.625 2.625 0 1 1-5.25 0 2.625 2.625 0 0 1 5.25 0Z"})])}function mt(o,a){return d(),c("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m9.75 9.75 4.5 4.5m0-4.5-4.5 4.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})])}function we(o,a){return d(),c("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18 18 6M6 6l12 12"})])}const ws={class:"bg-white shadow-lg border-b border-gray-200 fixed w-full top-0 z-50"},$s={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},Ss={class:"flex justify-between h-14"},ks={class:"flex items-center"},Cs={class:"hidden md:flex items-center space-x-1"},js={class:"flex items-center space-x-3"},Ps={class:"p-1.5 text-gray-400 hover:text-gray-500 relative"},Is={key:0,class:"w-7 h-7 rounded-full overflow-hidden"},Us=["src","alt"],As={key:1,class:"w-7 h-7 bg-gradient-to-r from-violet-600 to-emerald-600 rounded-full flex items-center justify-center"},Os={class:"text-white text-xs font-medium"},qs={class:"hidden md:block text-gray-700 font-medium text-sm"},Ts={key:0,class:"absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg py-1 z-50 border border-gray-200"},Ms={key:0,class:"md:hidden border-t border-gray-200 py-4"},Fs={class:"space-y-1"},Ns=xe({__name:"NavbarComponent",setup(o){const a=pt(),t=fe(),l=he(),y=ie(()=>t.user),p=O(!1),n=O(!1),x=O(),W=ie(()=>{const D=[{name:"Dashboard",href:t.isAdmin?"/admin/dashboard":t.isVendor?"/dashboard":"/user/dashboard"}];return t.isAdmin?D.push({name:"Users",href:"/admin/users"},{name:"Waste",href:"/admin/waste"},{name:"Orders",href:"/admin/orders"},{name:"Products",href:"/admin/products"},{name:"Categories",href:"/admin/categories"},{name:"Delivery",href:"/admin/delivery"},{name:"Reports",href:"/admin/reports"},{name:"Analytics",href:"/admin/analytics"}):t.isVendor?D.push({name:"Submit Waste",href:"/vendor/source-submissions"},{name:"Categories",href:"/vendor/categories"},{name:"Inventory",href:"/vendor/inventory"},{name:"Reports",href:"/vendor/reports"}):D.push({name:"Products",href:"/user/products"},{name:"My Orders",href:"/user/orders"}),D}),B=()=>{p.value=!p.value},F=()=>{n.value=!n.value},h=async()=>{try{await t.logout(),l.success("Successfully logged out"),a.push("/login")}catch{l.error("Failed to logout")}},_=D=>{x.value&&!x.value.contains(D.target)&&(p.value=!1)};return _e(()=>{document.addEventListener("click",_)}),Tt(()=>{document.removeEventListener("click",_)}),(D,g)=>{var N,v,m,b;const T=Te("router-link");return d(),c("nav",ws,[e("div",$s,[e("div",Ss,[e("div",ks,[$(T,{to:"/dashboard",class:"flex items-center space-x-2"},{default:ce(()=>[...g[2]||(g[2]=[e("div",{class:"w-7 h-7 bg-gradient-to-r from-violet-600 to-emerald-600 rounded-lg flex items-center justify-center"},[e("span",{class:"text-white font-bold text-sm"},"A")],-1),e("span",{class:"text-lg font-bold text-gray-900"},"AniHan",-1)])]),_:1})]),e("div",Cs,[(d(!0),c(ne,null,de(W.value,C=>(d(),Ae(T,{key:C.name,to:C.href,class:ae(["text-gray-700 hover:text-violet-600 px-2 py-1.5 rounded text-xs font-medium transition-colors duration-200 whitespace-nowrap",{"text-violet-600 bg-violet-50":D.$route.path===C.href}])},{default:ce(()=>[re(s(C.name),1)]),_:2},1032,["to","class"]))),128))]),e("div",js,[e("button",Ps,[$(S(ds),{class:"h-5 w-5"}),g[3]||(g[3]=e("span",{class:"absolute -top-1 -right-1 h-3 w-3 bg-blood-500 text-white text-xs rounded-full flex items-center justify-center text-[10px]"}," 3 ",-1))]),e("div",{class:"relative",ref_key:"profileDropdown",ref:x},[e("button",{onClick:B,class:"flex items-center space-x-1.5 text-sm rounded-full focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-violet-500"},[(N=y.value)!=null&&N.profile_photo?(d(),c("div",Is,[e("img",{src:y.value.profile_photo,alt:y.value.full_name,class:"w-full h-full object-cover"},null,8,Us)])):(d(),c("div",As,[e("span",Os,s(((m=(v=y.value)==null?void 0:v.full_name)==null?void 0:m.charAt(0))||"U"),1)])),e("span",qs,s((b=y.value)==null?void 0:b.full_name),1),$(S(ms),{class:"h-3 w-3 text-gray-400"})]),p.value?(d(),c("div",Ts,[$(T,{to:"/profile",class:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",onClick:g[0]||(g[0]=C=>p.value=!1)},{default:ce(()=>[...g[4]||(g[4]=[re(" Profile Settings ",-1)])]),_:1}),e("button",{onClick:h,class:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"}," Sign Out ")])):Q("",!0)],512),e("button",{onClick:F,class:"md:hidden p-1.5 rounded-md text-gray-400 hover:text-gray-500 hover:bg-gray-100"},[n.value?(d(),Ae(S(we),{key:1,class:"h-5 w-5"})):(d(),Ae(S(ns),{key:0,class:"h-5 w-5"}))])])]),n.value?(d(),c("div",Ms,[e("div",Fs,[(d(!0),c(ne,null,de(W.value,C=>(d(),Ae(T,{key:C.name,to:C.href,class:ae(["block px-3 py-2 text-sm font-medium text-gray-700 hover:text-primary-600 hover:bg-gray-50 rounded-md",{"text-primary-600 bg-primary-50":D.$route.path===C.href}]),onClick:g[1]||(g[1]=L=>n.value=!1)},{default:ce(()=>[re(s(C.name),1)]),_:2},1032,["to","class"]))),128))])])):Q("",!0)])])}}}),Ds={class:"bg-gray-900 text-white"},Es={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12"},Vs={class:"grid grid-cols-1 md:grid-cols-4 gap-8"},Bs={class:"space-y-2"},Ws={class:"border-t border-gray-800 mt-8 pt-8"},Ls={class:"flex flex-col md:flex-row justify-between items-center"},Zs={class:"text-gray-400 text-sm"},Rs=xe({__name:"FooterComponent",setup(o){const a=ie(()=>new Date().getFullYear());return(t,l)=>{const y=Te("router-link");return d(),c("footer",Ds,[e("div",Es,[e("div",Vs,[l[5]||(l[5]=me('<div class="col-span-1 md:col-span-2"><div class="flex items-center space-x-2 mb-4"><div class="w-8 h-8 bg-primary-600 rounded-lg flex items-center justify-center"><span class="text-white font-bold text-lg">A</span></div><span class="text-xl font-bold">AniHan</span></div><p class="text-gray-400 mb-4 max-w-md"> A Digital Platform for Repurposing Agricultural Food Waste in Butuan City. Transforming waste into valuable resources for a sustainable future. </p><div class="flex space-x-4"><a href="#" class="text-gray-400 hover:text-white transition-colors duration-200"><span class="sr-only">Facebook</span><svg class="h-6 w-6" fill="currentColor" viewBox="0 0 24 24"><path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"></path></svg></a><a href="#" class="text-gray-400 hover:text-white transition-colors duration-200"><span class="sr-only">Twitter</span><svg class="h-6 w-6" fill="currentColor" viewBox="0 0 24 24"><path d="M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z"></path></svg></a><a href="#" class="text-gray-400 hover:text-white transition-colors duration-200"><span class="sr-only">Instagram</span><svg class="h-6 w-6" fill="currentColor" viewBox="0 0 24 24"><path d="M12.017 0C5.396 0 .029 5.367.029 11.987c0 6.62 5.367 11.987 11.988 11.987s11.987-5.367 11.987-11.987C24.014 5.367 18.647.001 12.017.001zM8.449 16.988c-1.297 0-2.448-.49-3.323-1.297C4.198 14.895 3.708 13.744 3.708 12.447s.49-2.448 1.297-3.323c.875-.807 2.026-1.297 3.323-1.297s2.448.49 3.323 1.297c.807.875 1.297 2.026 1.297 3.323s-.49 2.448-1.297 3.323c-.875.807-2.026 1.297-3.323 1.297zm7.83-9.405h-1.441v-1.441h1.441v1.441zm-5.279 5.279c-.807.807-1.297 1.958-1.297 3.255s.49 2.448 1.297 3.255c.807.807 1.958 1.297 3.255 1.297s2.448-.49 3.255-1.297c.807-.807 1.297-1.958 1.297-3.255s-.49-2.448-1.297-3.255c-.807-.807-1.958-1.297-3.255-1.297s-2.448.49-3.255 1.297z"></path></svg></a></div></div>',1)),e("div",null,[l[4]||(l[4]=e("h3",{class:"text-lg font-semibold mb-4"},"Quick Links",-1)),e("ul",Bs,[e("li",null,[$(y,{to:"/dashboard",class:"text-gray-400 hover:text-white transition-colors duration-200"},{default:ce(()=>[...l[0]||(l[0]=[re("Dashboard",-1)])]),_:1})]),e("li",null,[$(y,{to:"/products",class:"text-gray-400 hover:text-white transition-colors duration-200"},{default:ce(()=>[...l[1]||(l[1]=[re("Products",-1)])]),_:1})]),e("li",null,[$(y,{to:"/orders",class:"text-gray-400 hover:text-white transition-colors duration-200"},{default:ce(()=>[...l[2]||(l[2]=[re("Orders",-1)])]),_:1})]),e("li",null,[$(y,{to:"/profile",class:"text-gray-400 hover:text-white transition-colors duration-200"},{default:ce(()=>[...l[3]||(l[3]=[re("Profile",-1)])]),_:1})])])]),l[6]||(l[6]=e("div",null,[e("h3",{class:"text-lg font-semibold mb-4"},"Contact Us"),e("div",{class:"space-y-2 text-gray-400"},[e("p",null,"Butuan City, Agusan del Norte"),e("p",null,"Philippines"),e("p",null,"Email: info@anihan.com"),e("p",null,"Phone: +63 912 345 6789")])],-1))]),e("div",Ws,[e("div",Ls,[e("p",Zs," Â© "+s(a.value)+" AniHan Platform. All rights reserved. ",1),l[7]||(l[7]=e("div",{class:"flex space-x-6 mt-4 md:mt-0"},[e("a",{href:"#",class:"text-gray-400 hover:text-white text-sm transition-colors duration-200"},"Privacy Policy"),e("a",{href:"#",class:"text-gray-400 hover:text-white text-sm transition-colors duration-200"},"Terms of Service"),e("a",{href:"#",class:"text-gray-400 hover:text-white text-sm transition-colors duration-200"},"Support")],-1))])])])])}}}),zs={id:"app"},Js=xe({__name:"App",setup(o){const a=fe(),t=()=>{ut.saveAllData()};return _e(()=>{window.addEventListener("beforeunload",t)}),Tt(()=>{window.removeEventListener("beforeunload",t),ut.saveAllData()}),(l,y)=>{const p=Te("router-view");return d(),c("div",zs,[S(a).isAuthenticated?(d(),Ae(Ns,{key:0})):Q("",!0),e("main",{class:ae(["main-content",{"no-navbar":!S(a).isAuthenticated}])},[$(p)],2),S(a).isAuthenticated?(d(),Ae(Rs,{key:1})):Q("",!0)])}}}),Hs=(o,a)=>{const t=o.__vccOpts||o;for(const[l,y]of a)t[l]=y;return t},Gs=Hs(Js,[["__scopeId","data-v-f216acfa"]]),Qs={class:"min-h-screen bg-white"},Ks={class:"bg-white shadow-sm border-b border-gray-200"},Xs={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},Ys={class:"flex justify-between h-12 sm:h-16"},ea={class:"flex items-center space-x-2 sm:space-x-4"},ta={class:"relative bg-gradient-to-r from-violet-600 via-emerald-600 to-diamond-600"},sa={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12 sm:py-16 lg:py-24"},aa={class:"text-center"},oa={class:"flex flex-col sm:flex-row gap-3 sm:gap-4 justify-center px-4"},ra={id:"features",class:"py-12 sm:py-16 lg:py-20 bg-gray-50"},ia={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},la={class:"grid grid-cols-1 md:grid-cols-3 gap-6 sm:gap-8"},na={class:"card text-center"},da={class:"card-body p-4 sm:p-6"},ca={class:"w-12 h-12 sm:w-16 sm:h-16 bg-violet-100 rounded-full flex items-center justify-center mx-auto mb-4 sm:mb-6"},ua={class:"text-left space-y-2 sm:space-y-3 text-sm sm:text-base text-gray-600"},ma={class:"flex items-start"},pa={class:"flex items-start"},va={class:"flex items-start"},ga={class:"flex items-start"},xa={class:"flex items-start"},ya={class:"card text-center"},_a={class:"card-body p-4 sm:p-6"},fa={class:"w-12 h-12 sm:w-16 sm:h-16 bg-emerald-100 rounded-full flex items-center justify-center mx-auto mb-4 sm:mb-6"},ha={class:"text-left space-y-2 sm:space-y-3 text-sm sm:text-base text-gray-600"},ba={class:"flex items-start"},wa={class:"flex items-start"},$a={class:"flex items-start"},Sa={class:"flex items-start"},ka={class:"flex items-start"},Ca={class:"card text-center"},ja={class:"card-body p-4 sm:p-6"},Pa={class:"w-12 h-12 sm:w-16 sm:h-16 bg-diamond-100 rounded-full flex items-center justify-center mx-auto mb-4 sm:mb-6"},Ia={class:"text-left space-y-2 sm:space-y-3 text-sm sm:text-base text-gray-600"},Ua={class:"flex items-start"},Aa={class:"flex items-start"},Oa={class:"flex items-start"},qa={class:"flex items-start"},Ta={class:"flex items-start"},Ma={id:"about",class:"py-12 sm:py-16 lg:py-20 bg-gray-50"},Fa={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},Na={class:"grid grid-cols-1 lg:grid-cols-2 gap-8 sm:gap-12 items-center"},Da={class:"relative"},Ea={class:"aspect-w-16 aspect-h-9"},Va={class:"bg-gradient-to-r from-primary-500 to-green-600 rounded-lg h-64 sm:h-80 lg:h-96 flex items-center justify-center"},Ba={class:"text-center text-white"},Wa={class:"py-12 sm:py-16 lg:py-20 bg-gradient-to-r from-violet-600 to-emerald-600"},La={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center"},Za={class:"flex flex-col sm:flex-row gap-3 sm:gap-4 justify-center px-4"},Ra={id:"contact",class:"bg-gray-900 text-white py-8 sm:py-12"},za={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},Ja={class:"grid grid-cols-1 md:grid-cols-4 gap-6 sm:gap-8"},Ha={class:"space-y-1 sm:space-y-2 text-gray-400 text-xs sm:text-sm"},Ga=xe({__name:"HomeView",setup(o){return(a,t)=>{const l=Te("router-link");return d(),c("div",Qs,[e("nav",Ks,[e("div",Xs,[e("div",Ys,[t[2]||(t[2]=me('<div class="flex items-center"><div class="flex items-center space-x-1 sm:space-x-2"><div class="w-6 h-6 sm:w-8 sm:h-8 bg-gradient-to-r from-violet-600 to-emerald-600 rounded-lg flex items-center justify-center"><span class="text-white font-bold text-sm sm:text-lg">A</span></div><span class="text-lg sm:text-xl font-bold text-gray-900">AniHan</span></div></div><div class="hidden md:flex items-center space-x-6 lg:space-x-8"><a href="#features" class="text-gray-700 hover:text-violet-600 px-2 sm:px-3 py-2 rounded-md text-xs sm:text-sm font-medium transition-colors duration-200"> Features </a><a href="#about" class="text-gray-700 hover:text-emerald-600 px-2 sm:px-3 py-2 rounded-md text-xs sm:text-sm font-medium transition-colors duration-200"> About </a><a href="#contact" class="text-gray-700 hover:text-diamond-600 px-2 sm:px-3 py-2 rounded-md text-xs sm:text-sm font-medium transition-colors duration-200"> Contact </a></div>',2)),e("div",ea,[$(l,{to:"/login",class:"text-gray-700 hover:text-violet-600 px-2 sm:px-3 py-1 sm:py-2 rounded-md text-xs sm:text-sm font-medium"},{default:ce(()=>[...t[0]||(t[0]=[re(" Sign In ",-1)])]),_:1}),$(l,{to:"/register",class:"btn-primary bg-gradient-to-r from-violet-600 to-emerald-600 hover:from-violet-700 hover:to-emerald-700 text-xs sm:text-sm px-3 sm:px-4 py-1 sm:py-2"},{default:ce(()=>[...t[1]||(t[1]=[re(" Get Started ",-1)])]),_:1})])])])]),e("div",ta,[e("div",sa,[e("div",aa,[t[5]||(t[5]=e("h1",{class:"text-2xl sm:text-3xl md:text-4xl lg:text-6xl font-bold text-white mb-4 sm:mb-6"},[re(" AniHan: A Digital Platform for Repurposing "),e("span",{class:"block text-emerald-200 mt-2"},"Agricultural Food Waste in Butuan City")],-1)),t[6]||(t[6]=e("p",{class:"text-sm sm:text-base lg:text-xl text-emerald-100 mb-6 sm:mb-8 max-w-4xl mx-auto px-4"}," A comprehensive digital system that enables vendors to manage and reduce food waste by converting surplus or damaged agricultural produce into valuable products such as compost fertilizers and sustainable food items. ",-1)),e("div",oa,[$(l,{to:"/register",class:"btn-secondary text-sm sm:text-base lg:text-lg px-6 sm:px-8 py-2 sm:py-3 bg-emerald-600 hover:bg-emerald-700"},{default:ce(()=>[...t[3]||(t[3]=[re(" Join Our Community ",-1)])]),_:1}),t[4]||(t[4]=e("a",{href:"#features",class:"btn-outline text-white border-white hover:bg-white hover:text-violet-600 text-sm sm:text-base lg:text-lg px-6 sm:px-8 py-2 sm:py-3"}," Learn More ",-1))])])])]),e("section",ra,[e("div",ia,[t[25]||(t[25]=e("div",{class:"text-center mb-8 sm:mb-12 lg:mb-16"},[e("h2",{class:"text-2xl sm:text-3xl font-bold text-gray-900 mb-3 sm:mb-4"},"System Features & Capabilities"),e("p",{class:"text-base sm:text-lg lg:text-xl text-gray-600 max-w-4xl mx-auto px-4"}," AniHan implements real-time inventory tracking, data visualization tools, and ensures system usability through intuitive interfaces designed for users with varying levels of digital literacy. ")],-1)),e("div",la,[e("div",na,[e("div",da,[e("div",ca,[$(S(ge),{class:"w-6 h-6 sm:w-8 sm:h-8 text-violet-600"})]),t[12]||(t[12]=e("h3",{class:"text-lg sm:text-xl font-semibold text-gray-900 mb-3 sm:mb-4"},"For Vendors",-1)),e("ul",ua,[e("li",ma,[$(S(ke),{class:"w-4 h-4 sm:w-5 sm:h-5 text-emerald-500 mr-2 mt-0.5 flex-shrink-0"}),t[7]||(t[7]=e("span",null,"Image-based waste classification system",-1))]),e("li",pa,[$(S(ke),{class:"w-4 h-4 sm:w-5 sm:h-5 text-emerald-500 mr-2 mt-0.5 flex-shrink-0"}),t[8]||(t[8]=e("span",null,"Real-time inventory and tracking module",-1))]),e("li",va,[$(S(ke),{class:"w-4 h-4 sm:w-5 sm:h-5 text-emerald-500 mr-2 mt-0.5 flex-shrink-0"}),t[9]||(t[9]=e("span",null,"Automated pickup scheduling",-1))]),e("li",ga,[$(S(ke),{class:"w-4 h-4 sm:w-5 sm:h-5 text-emerald-500 mr-2 mt-0.5 flex-shrink-0"}),t[10]||(t[10]=e("span",null,"Processing status monitoring",-1))]),e("li",xa,[$(S(ke),{class:"w-4 h-4 sm:w-5 sm:h-5 text-emerald-500 mr-2 mt-0.5 flex-shrink-0"}),t[11]||(t[11]=e("span",null,"Performance analytics and reports",-1))])])])]),e("div",ya,[e("div",_a,[e("div",fa,[$(S(Ue),{class:"w-6 h-6 sm:w-8 sm:h-8 text-emerald-600"})]),t[18]||(t[18]=e("h3",{class:"text-lg sm:text-xl font-semibold text-gray-900 mb-3 sm:mb-4"},"For Consumers",-1)),e("ul",ha,[e("li",ba,[$(S(ke),{class:"w-4 h-4 sm:w-5 sm:h-5 text-diamond-500 mr-2 mt-0.5 flex-shrink-0"}),t[13]||(t[13]=e("span",null,"Browse comprehensive product catalog",-1))]),e("li",wa,[$(S(ke),{class:"w-4 h-4 sm:w-5 sm:h-5 text-diamond-500 mr-2 mt-0.5 flex-shrink-0"}),t[14]||(t[14]=e("span",null,"Purchase organic compost & fertilizers",-1))]),e("li",$a,[$(S(ke),{class:"w-4 h-4 sm:w-5 sm:h-5 text-diamond-500 mr-2 mt-0.5 flex-shrink-0"}),t[15]||(t[15]=e("span",null,"Order sustainable preserved food items",-1))]),e("li",Sa,[$(S(ke),{class:"w-4 h-4 sm:w-5 sm:h-5 text-diamond-500 mr-2 mt-0.5 flex-shrink-0"}),t[16]||(t[16]=e("span",null,"Track order status and delivery",-1))]),e("li",ka,[$(S(ke),{class:"w-4 h-4 sm:w-5 sm:h-5 text-diamond-500 mr-2 mt-0.5 flex-shrink-0"}),t[17]||(t[17]=e("span",null,"Access affordable organic inputs",-1))])])])]),e("div",Ca,[e("div",ja,[e("div",Pa,[$(S(jt),{class:"w-6 h-6 sm:w-8 sm:h-8 text-diamond-600"})]),t[24]||(t[24]=e("h3",{class:"text-lg sm:text-xl font-semibold text-gray-900 mb-3 sm:mb-4"},"System Capabilities",-1)),e("ul",Ia,[e("li",Ua,[$(S(ke),{class:"w-4 h-4 sm:w-5 sm:h-5 text-blood-500 mr-2 mt-0.5 flex-shrink-0"}),t[19]||(t[19]=e("span",null,"Data visualization tools (charts & graphs)",-1))]),e("li",Aa,[$(S(ke),{class:"w-4 h-4 sm:w-5 sm:h-5 text-blood-500 mr-2 mt-0.5 flex-shrink-0"}),t[20]||(t[20]=e("span",null,"System Usability Scale (SUS) evaluation",-1))]),e("li",Oa,[$(S(ke),{class:"w-4 h-4 sm:w-5 sm:h-5 text-blood-500 mr-2 mt-0.5 flex-shrink-0"}),t[21]||(t[21]=e("span",null,"Real-time processing logs",-1))]),e("li",qa,[$(S(ke),{class:"w-4 h-4 sm:w-5 sm:h-5 text-blood-500 mr-2 mt-0.5 flex-shrink-0"}),t[22]||(t[22]=e("span",null,"Educational resources integration",-1))]),e("li",Ta,[$(S(ke),{class:"w-4 h-4 sm:w-5 sm:h-5 text-blood-500 mr-2 mt-0.5 flex-shrink-0"}),t[23]||(t[23]=e("span",null,"Mobile-responsive design",-1))])])])])])])]),t[41]||(t[41]=me('<section class="py-12 sm:py-16 lg:py-20 bg-white"><div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"><div class="text-center mb-8 sm:mb-12 lg:mb-16"><h2 class="text-2xl sm:text-3xl font-bold text-gray-900 mb-3 sm:mb-4">Our Impact in Numbers</h2><p class="text-base sm:text-lg lg:text-xl text-gray-600">Making a difference in Butuan City&#39;s agricultural waste management</p></div><div class="grid grid-cols-2 md:grid-cols-4 gap-4 sm:gap-6 lg:gap-8"><div class="text-center"><div class="text-2xl sm:text-3xl lg:text-4xl font-bold text-violet-600 mb-1 sm:mb-2">1,247</div><div class="text-xs sm:text-sm lg:text-base text-gray-600">Active Users</div></div><div class="text-center"><div class="text-2xl sm:text-3xl lg:text-4xl font-bold text-emerald-600 mb-1 sm:mb-2">15,420</div><div class="text-xs sm:text-sm lg:text-base text-gray-600">Kg Waste Processed</div></div><div class="text-center"><div class="text-2xl sm:text-3xl lg:text-4xl font-bold text-blood-600 mb-1 sm:mb-2">892</div><div class="text-xs sm:text-sm lg:text-base text-gray-600">Orders Completed</div></div><div class="text-center"><div class="text-2xl sm:text-3xl lg:text-4xl font-bold text-diamond-600 mb-1 sm:mb-2">â‚±456K</div><div class="text-xs sm:text-sm lg:text-base text-gray-600">Revenue Generated</div></div></div></div></section>',1)),e("section",Ma,[e("div",Fa,[e("div",Na,[t[28]||(t[28]=me('<div><h2 class="text-2xl sm:text-3xl font-bold text-gray-900 mb-4 sm:mb-6">About AniHan</h2><p class="text-sm sm:text-base lg:text-lg text-gray-600 mb-4 sm:mb-6"><strong>AniHan: A Digital Platform for Repurposing Agricultural Food Waste in Butuan City</strong> is a capstone project developed by Christian Angelo Verdad and Wayne Krisha Cadenas, submitted to the Department of Information Systems, College of Computing and Information Sciences (CCIS) at Caraga State University - Main Campus. </p><p class="text-sm sm:text-base lg:text-lg text-gray-600 mb-4 sm:mb-6"> This comprehensive digital system addresses the critical issue of agricultural food waste in Butuan City by creating a sustainable ecosystem that transforms surplus or damaged agricultural produce into valuable products such as compost fertilizers and sustainable food items. </p><p class="text-sm sm:text-base lg:text-lg text-gray-600 mb-4 sm:mb-6"> The platform contributes to sustainability efforts and supports the United Nations&#39; Zero Hunger initiative by promoting efficient resource use and food security through real-time inventory tracking, data visualization tools, and intuitive interfaces designed for users with varying levels of digital literacy. </p><div class="flex items-center space-x-4"><div class="flex items-center"><div class="w-10 h-10 sm:w-12 sm:h-12 bg-primary-100 rounded-full flex items-center justify-center"><span class="text-primary-600 font-bold text-sm sm:text-base">CS</span></div><div class="ml-3"><div class="font-medium text-gray-900 text-sm sm:text-base">Caraga State University</div><div class="text-xs sm:text-sm text-gray-500">Department of Information Systems, CCIS</div><div class="text-xs sm:text-sm text-gray-500">Developed by: Christian Angelo Verdad &amp; Wayne Krisha Cadenas</div></div></div></div></div>',1)),e("div",Da,[e("div",Ea,[e("div",Va,[e("div",Ba,[$(S(Bt),{class:"w-16 h-16 sm:w-20 sm:h-20 lg:w-24 lg:h-24 mx-auto mb-3 sm:mb-4 opacity-50"}),t[26]||(t[26]=e("p",{class:"text-base sm:text-lg lg:text-xl font-medium"},"Sustainable Agriculture",-1)),t[27]||(t[27]=e("p",{class:"text-green-200 text-sm sm:text-base"},"For a Better Tomorrow",-1))])])])])])])]),e("section",Wa,[e("div",La,[t[31]||(t[31]=e("h2",{class:"text-2xl sm:text-3xl font-bold text-white mb-3 sm:mb-4"},"Join the Agricultural Waste Revolution",-1)),t[32]||(t[32]=e("p",{class:"text-base sm:text-lg lg:text-xl text-emerald-100 mb-6 sm:mb-8 max-w-3xl mx-auto px-4"}," Be part of a sustainable solution that transforms agricultural waste into valuable resources, supports food security, and contributes to the United Nations' Zero Hunger initiative in Butuan City. ",-1)),e("div",Za,[$(l,{to:"/register",class:"btn-secondary text-sm sm:text-base lg:text-lg px-6 sm:px-8 py-2 sm:py-3 bg-emerald-600 hover:bg-emerald-700"},{default:ce(()=>[...t[29]||(t[29]=[re(" Get Started Today ",-1)])]),_:1}),$(l,{to:"/login",class:"btn-outline text-white border-white hover:bg-white hover:text-violet-600 text-sm sm:text-base lg:text-lg px-6 sm:px-8 py-2 sm:py-3"},{default:ce(()=>[...t[30]||(t[30]=[re(" Sign In ",-1)])]),_:1})])])]),e("footer",Ra,[e("div",za,[e("div",Ja,[t[38]||(t[38]=me('<div><div class="flex items-center space-x-1 sm:space-x-2 mb-3 sm:mb-4"><div class="w-6 h-6 sm:w-8 sm:h-8 bg-gradient-to-r from-violet-600 to-emerald-600 rounded-lg flex items-center justify-center"><span class="text-white font-bold text-sm sm:text-lg">A</span></div><span class="text-lg sm:text-xl font-bold">AniHan</span></div><p class="text-gray-400 text-xs sm:text-sm"> A Digital Platform for Repurposing Agricultural Food Waste in Butuan City - Supporting sustainability and the UN Zero Hunger initiative. </p></div>',1)),e("div",null,[t[37]||(t[37]=e("h3",{class:"font-semibold mb-3 sm:mb-4 text-sm sm:text-base"},"Quick Links",-1)),e("ul",Ha,[t[35]||(t[35]=e("li",null,[e("a",{href:"#features",class:"hover:text-white"},"Features")],-1)),t[36]||(t[36]=e("li",null,[e("a",{href:"#about",class:"hover:text-white"},"About")],-1)),e("li",null,[$(l,{to:"/login",class:"hover:text-white"},{default:ce(()=>[...t[33]||(t[33]=[re("Sign In",-1)])]),_:1})]),e("li",null,[$(l,{to:"/register",class:"hover:text-white"},{default:ce(()=>[...t[34]||(t[34]=[re("Register",-1)])]),_:1})])])]),t[39]||(t[39]=me('<div><h3 class="font-semibold mb-3 sm:mb-4 text-sm sm:text-base">Contact</h3><ul class="space-y-1 sm:space-y-2 text-gray-400 text-xs sm:text-sm"><li>Caraga State University - Main Campus</li><li>Department of Information Systems, CCIS</li><li>Butuan City, Agusan del Norte</li><li>Philippines</li><li>Developers: Christian Angelo Verdad &amp; Wayne Krisha Cadenas</li></ul></div><div><h3 class="font-semibold mb-3 sm:mb-4 text-sm sm:text-base">Follow Us</h3><div class="flex space-x-3 sm:space-x-4"><a href="#" class="text-gray-400 hover:text-white"><span class="sr-only">Facebook</span><svg class="w-5 h-5 sm:w-6 sm:h-6" fill="currentColor" viewBox="0 0 24 24"><path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"></path></svg></a><a href="#" class="text-gray-400 hover:text-white"><span class="sr-only">Twitter</span><svg class="w-5 h-5 sm:w-6 sm:h-6" fill="currentColor" viewBox="0 0 24 24"><path d="M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z"></path></svg></a></div></div>',2))]),t[40]||(t[40]=e("div",{class:"border-t border-gray-800 mt-6 sm:mt-8 pt-6 sm:pt-8 text-center text-gray-400 text-xs sm:text-sm"},[e("p",null,"Â© 2024 AniHan. All rights reserved. A capstone project by Christian Angelo Verdad & Wayne Krisha Cadenas, Caraga State University.")],-1))])])])}}}),Qa={class:"min-h-screen bg-gray-50 flex flex-col justify-center py-4 px-4 sm:py-8 sm:px-6 lg:py-12 lg:px-8"},Ka={class:"absolute top-2 left-2 sm:top-4 sm:left-4 z-10"},Xa={class:"w-full max-w-sm sm:max-w-md mx-auto"},Ya={class:"text-center text-xs sm:text-sm text-gray-600 mb-4 sm:mb-6"},eo={class:"w-full max-w-sm sm:max-w-md mx-auto"},to={class:"bg-white py-4 sm:py-6 lg:py-8 px-4 sm:px-6 lg:px-8 shadow sm:rounded-lg"},so={key:0,class:"mt-1 text-xs sm:text-sm text-danger-600"},ao={key:0,class:"mt-1 text-xs sm:text-sm text-danger-600"},oo={class:"flex items-center justify-between"},ro={class:"flex items-center"},io=["disabled"],lo={key:0,class:"flex items-center"},no={key:1},co={class:"mt-4 sm:mt-6"},uo={class:"mt-3 sm:mt-4 space-y-1 sm:space-y-2"},mo=xe({__name:"LoginView",setup(o){const a=pt(),t=fe(),l=he(),y=O(!1),p=O({}),n=He({email:"",password:"",rememberMe:!1}),x=F=>{const h={admin:{email:"admin@anihan.com",password:"admin123"},vendor:{email:"vendor@anihan.com",password:"vendor123"},user:{email:"user@anihan.com",password:"user123"}};n.email=h[F].email,n.password=h[F].password},W=()=>(p.value={},n.email?/\S+@\S+\.\S+/.test(n.email)||(p.value.email="Email is invalid"):p.value.email="Email is required",n.password?n.password.length<6&&(p.value.password="Password must be at least 6 characters"):p.value.password="Password is required",Object.keys(p.value).length===0),B=async()=>{if(W()){y.value=!0;try{await t.login({email:n.email,password:n.password}),l.success("Successfully logged in!"),t.isAdmin?a.push("/admin/dashboard"):t.isVendor?a.push("/dashboard"):a.push("/user/dashboard")}catch(F){l.error(F.message||"Login failed")}finally{y.value=!1}}};return(F,h)=>{const _=Te("router-link");return d(),c("div",Qa,[e("div",Ka,[$(_,{to:"/",class:"inline-flex items-center px-2 py-1 sm:px-4 sm:py-2 border border-gray-300 rounded-md shadow-sm text-xs sm:text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 transition-colors duration-200"},{default:ce(()=>[...h[6]||(h[6]=[e("svg",{class:"w-3 h-3 sm:w-4 sm:h-4 mr-1 sm:mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})],-1),e("span",{class:"hidden xs:inline"},"Home",-1)])]),_:1})]),e("div",Xa,[h[9]||(h[9]=me('<div class="flex justify-center mb-4 sm:mb-6"><div class="flex items-center space-x-1 sm:space-x-2"><div class="w-8 h-8 sm:w-12 sm:h-12 bg-primary-600 rounded-lg flex items-center justify-center"><span class="text-white font-bold text-lg sm:text-2xl">A</span></div><span class="text-xl sm:text-3xl font-bold text-gray-900">AniHan</span></div></div><h2 class="text-center text-xl sm:text-2xl lg:text-3xl font-extrabold text-gray-900 mb-2 sm:mb-4"> Sign in to your account </h2>',2)),e("p",Ya,[h[8]||(h[8]=re(" Or ",-1)),$(_,{to:"/register",class:"font-medium text-primary-600 hover:text-primary-500"},{default:ce(()=>[...h[7]||(h[7]=[re(" create a new account ",-1)])]),_:1})])]),e("div",eo,[e("div",to,[e("form",{class:"space-y-4 sm:space-y-6",onSubmit:Pe(B,["prevent"])},[e("div",null,[h[10]||(h[10]=e("label",{for:"email",class:"block text-xs sm:text-sm font-medium text-gray-700 mb-1 sm:mb-2"}," Email address ",-1)),e("div",null,[J(e("input",{id:"email","onUpdate:modelValue":h[0]||(h[0]=D=>n.email=D),name:"email",type:"email",autocomplete:"email",required:"",class:ae(["block w-full px-3 py-2 sm:px-4 sm:py-3 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 text-sm sm:text-base",{"border-danger-500":p.value.email}]),placeholder:"Enter your email"},null,2),[[oe,n.email]])]),p.value.email?(d(),c("p",so,s(p.value.email),1)):Q("",!0)]),e("div",null,[h[11]||(h[11]=e("label",{for:"password",class:"block text-xs sm:text-sm font-medium text-gray-700 mb-1 sm:mb-2"}," Password ",-1)),e("div",null,[J(e("input",{id:"password","onUpdate:modelValue":h[1]||(h[1]=D=>n.password=D),name:"password",type:"password",autocomplete:"current-password",required:"",class:ae(["block w-full px-3 py-2 sm:px-4 sm:py-3 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 text-sm sm:text-base",{"border-danger-500":p.value.password}]),placeholder:"Enter your password"},null,2),[[oe,n.password]])]),p.value.password?(d(),c("p",ao,s(p.value.password),1)):Q("",!0)]),e("div",oo,[e("div",ro,[J(e("input",{id:"remember-me","onUpdate:modelValue":h[2]||(h[2]=D=>n.rememberMe=D),name:"remember-me",type:"checkbox",class:"h-3 w-3 sm:h-4 sm:w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"},null,512),[[ze,n.rememberMe]]),h[12]||(h[12]=e("label",{for:"remember-me",class:"ml-2 block text-xs sm:text-sm text-gray-900"}," Remember me ",-1))]),h[13]||(h[13]=e("div",{class:"text-xs sm:text-sm"},[e("a",{href:"#",class:"font-medium text-primary-600 hover:text-primary-500"}," Forgot password? ")],-1))]),e("div",null,[e("button",{type:"submit",disabled:y.value,class:"w-full flex justify-center py-2 sm:py-3 px-4 border border-transparent rounded-md shadow-sm text-xs sm:text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200"},[y.value?(d(),c("span",lo,[...h[14]||(h[14]=[me('<svg class="animate-spin -ml-1 mr-2 sm:mr-3 h-3 w-3 sm:h-4 sm:w-4 sm:h-5 sm:w-5 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg><span class="hidden xs:inline">Signing in...</span><span class="xs:hidden">Signing in</span>',3)])])):(d(),c("span",no,"Sign in"))],8,io)]),e("div",co,[h[18]||(h[18]=me('<div class="relative"><div class="absolute inset-0 flex items-center"><div class="w-full border-t border-gray-300"></div></div><div class="relative flex justify-center text-xs sm:text-sm"><span class="px-2 bg-white text-gray-500">Demo Accounts</span></div></div>',1)),e("div",uo,[e("button",{type:"button",onClick:h[3]||(h[3]=D=>x("admin")),class:"w-full text-left px-2 sm:px-3 py-1.5 sm:py-2 text-xs sm:text-sm bg-gray-100 hover:bg-gray-200 rounded-md transition-colors duration-200"},[...h[15]||(h[15]=[e("strong",null,"Admin:",-1),re(" admin@anihan.com / admin123 ",-1)])]),e("button",{type:"button",onClick:h[4]||(h[4]=D=>x("vendor")),class:"w-full text-left px-2 sm:px-3 py-1.5 sm:py-2 text-xs sm:text-sm bg-gray-100 hover:bg-gray-200 rounded-md transition-colors duration-200"},[...h[16]||(h[16]=[e("strong",null,"Vendor:",-1),re(" vendor@anihan.com / vendor123 ",-1)])]),e("button",{type:"button",onClick:h[5]||(h[5]=D=>x("user")),class:"w-full text-left px-2 sm:px-3 py-1.5 sm:py-2 text-xs sm:text-sm bg-gray-100 hover:bg-gray-200 rounded-md transition-colors duration-200"},[...h[17]||(h[17]=[e("strong",null,"User:",-1),re(" user@anihan.com / user123 ",-1)])])])])],32)])])])}}}),po={class:"min-h-screen bg-gray-50 flex flex-col justify-center py-4 px-4 sm:py-8 sm:px-6 lg:py-12 lg:px-8"},vo={class:"absolute top-2 left-2 sm:top-4 sm:left-4 z-10"},go={class:"w-full max-w-sm sm:max-w-md mx-auto"},xo={class:"text-center text-xs sm:text-sm text-gray-600 mb-4 sm:mb-6"},yo={class:"w-full max-w-sm sm:max-w-md mx-auto"},_o={class:"bg-white py-4 sm:py-6 lg:py-8 px-4 sm:px-6 lg:px-8 shadow sm:rounded-lg"},fo={key:0,class:"mt-1 text-xs sm:text-sm text-danger-600"},ho={key:0,class:"mt-1 text-xs sm:text-sm text-danger-600"},bo={class:"space-y-2"},wo={class:"flex items-start"},$o={class:"flex items-start"},So={key:0,class:"mt-1 text-xs sm:text-sm text-danger-600"},ko={key:0,class:"space-y-3 sm:space-y-4 p-3 sm:p-4 bg-blue-50 rounded-lg border border-blue-200"},Co={key:0,class:"mt-1 text-xs sm:text-sm text-danger-600"},jo={key:0,class:"mt-1 text-xs sm:text-sm text-danger-600"},Po={key:0,class:"mt-1 text-xs sm:text-sm text-danger-600"},Io={key:1,class:"text-xs sm:text-sm text-green-600 mt-1"},Uo={key:0,class:"mt-1 text-xs sm:text-sm text-danger-600"},Ao={key:0,class:"mt-1 text-xs sm:text-sm text-danger-600"},Oo={key:0,class:"mt-1 text-xs sm:text-sm text-danger-600"},qo={key:0,class:"mt-1 text-xs sm:text-sm text-danger-600"},To={key:0,class:"mt-1 text-xs sm:text-sm text-danger-600"},Mo={class:"flex items-start"},Fo=["disabled"],No={key:0,class:"flex items-center"},Do={key:1},Eo=xe({__name:"RegisterView",setup(o){const a=pt(),t=fe(),l=he(),y=O(!1),p=O({}),n=O(null),x=He({full_name:"",email:"",role:"user",phone:"",address:"",password:"",confirm_password:"",acceptTerms:!1,business_name:"",business_type:"",business_license:null,licenseFileName:"",years_in_business:""}),W=h=>{var g;const D=(g=h.target.files)==null?void 0:g[0];if(D){if(D.size>5*1024*1024){p.value.business_license="File size must be less than 5MB";return}if(!["application/pdf","image/jpeg","image/jpg","image/png"].includes(D.type)){p.value.business_license="File must be PDF, JPG, or PNG";return}x.business_license=D,x.licenseFileName=D.name,delete p.value.business_license}},B=()=>{var h;return p.value={},x.full_name.trim()||(p.value.full_name="Full name is required"),x.email?/\S+@\S+\.\S+/.test(x.email)||(p.value.email="Email is invalid"):p.value.email="Email is required",x.role||(p.value.role="Please select an account type"),x.role==="vendor"&&((h=x.business_name)!=null&&h.trim()||(p.value.business_name="Business name is required for vendors"),x.business_type||(p.value.business_type="Business type is required for vendors"),x.business_license||(p.value.business_license="Business license is required for vendors"),x.years_in_business||(p.value.years_in_business="Years in business is required for vendors")),x.phone&&!/^\+?[\d\s-()]+$/.test(x.phone)&&(p.value.phone="Phone number is invalid"),x.password?x.password.length<6&&(p.value.password="Password must be at least 6 characters"):p.value.password="Password is required",x.confirm_password?x.password!==x.confirm_password&&(p.value.confirm_password="Passwords do not match"):p.value.confirm_password="Please confirm your password",x.acceptTerms?Object.keys(p.value).length===0:(l.error("Please accept the terms and conditions"),!1)},F=async()=>{if(B()){y.value=!0;try{const h={full_name:x.full_name,email:x.email,role:x.role,phone:x.phone||void 0,address:x.address||void 0,password:x.password,business_name:x.business_name,business_type:x.business_type,years_in_business:x.years_in_business};await t.register(h,x.business_license||void 0),x.role==="vendor"?(l.success("Vendor registration submitted successfully! Your account will be activated after admin approval."),a.push("/login")):(l.success("Account created successfully!"),a.push("/dashboard"))}catch(h){l.error(h.message||"Registration failed")}finally{y.value=!1}}};return(h,_)=>{const D=Te("router-link");return d(),c("div",po,[e("div",vo,[$(D,{to:"/",class:"inline-flex items-center px-2 py-1 sm:px-4 sm:py-2 border border-gray-300 rounded-md shadow-sm text-xs sm:text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 transition-colors duration-200"},{default:ce(()=>[..._[12]||(_[12]=[e("svg",{class:"w-3 h-3 sm:w-4 sm:h-4 mr-1 sm:mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})],-1),e("span",{class:"hidden xs:inline"},"Home",-1)])]),_:1})]),e("div",go,[_[15]||(_[15]=me('<div class="flex justify-center mb-4 sm:mb-6"><div class="flex items-center space-x-1 sm:space-x-2"><div class="w-8 h-8 sm:w-12 sm:h-12 bg-primary-600 rounded-lg flex items-center justify-center"><span class="text-white font-bold text-lg sm:text-2xl">A</span></div><span class="text-xl sm:text-3xl font-bold text-gray-900">AniHan</span></div></div><h2 class="text-center text-xl sm:text-2xl lg:text-3xl font-extrabold text-gray-900 mb-2 sm:mb-4"> Create your account </h2>',2)),e("p",xo,[_[14]||(_[14]=re(" Or ",-1)),$(D,{to:"/login",class:"font-medium text-primary-600 hover:text-primary-500"},{default:ce(()=>[..._[13]||(_[13]=[re(" sign in to your existing account ",-1)])]),_:1})])]),e("div",yo,[e("div",_o,[e("form",{class:"space-y-4 sm:space-y-6",onSubmit:Pe(F,["prevent"])},[e("div",null,[_[16]||(_[16]=e("label",{for:"full_name",class:"block text-xs sm:text-sm font-medium text-gray-700 mb-1 sm:mb-2"}," Full Name ",-1)),e("div",null,[J(e("input",{id:"full_name","onUpdate:modelValue":_[0]||(_[0]=g=>x.full_name=g),name:"full_name",type:"text",autocomplete:"name",required:"",class:ae(["block w-full px-3 py-2 sm:px-4 sm:py-3 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 text-sm sm:text-base",{"border-danger-500":p.value.full_name}]),placeholder:"Enter your full name"},null,2),[[oe,x.full_name]])]),p.value.full_name?(d(),c("p",fo,s(p.value.full_name),1)):Q("",!0)]),e("div",null,[_[17]||(_[17]=e("label",{for:"email",class:"block text-xs sm:text-sm font-medium text-gray-700 mb-1 sm:mb-2"}," Email address ",-1)),e("div",null,[J(e("input",{id:"email","onUpdate:modelValue":_[1]||(_[1]=g=>x.email=g),name:"email",type:"email",autocomplete:"email",required:"",class:ae(["block w-full px-3 py-2 sm:px-4 sm:py-3 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 text-sm sm:text-base",{"border-danger-500":p.value.email}]),placeholder:"Enter your email"},null,2),[[oe,x.email]])]),p.value.email?(d(),c("p",ho,s(p.value.email),1)):Q("",!0)]),e("div",null,[_[20]||(_[20]=e("label",{class:"block text-xs sm:text-sm font-medium text-gray-700 mb-1 sm:mb-2"},"Account Type",-1)),e("div",bo,[e("div",wo,[J(e("input",{id:"role-user","onUpdate:modelValue":_[2]||(_[2]=g=>x.role=g),name:"role",type:"radio",value:"user",class:"focus:ring-primary-500 h-3 w-3 sm:h-4 sm:w-4 text-primary-600 border-gray-300 mt-1"},null,512),[[Me,x.role]]),_[18]||(_[18]=e("label",{for:"role-user",class:"ml-2 sm:ml-3 block text-xs sm:text-sm font-medium text-gray-700"},[e("span",{class:"font-semibold"},"General User"),e("span",{class:"text-gray-500 block sm:inline sm:ml-1"},"- Browse and purchase repurposed products")],-1))]),e("div",$o,[J(e("input",{id:"role-vendor","onUpdate:modelValue":_[3]||(_[3]=g=>x.role=g),name:"role",type:"radio",value:"vendor",class:"focus:ring-primary-500 h-3 w-3 sm:h-4 sm:w-4 text-primary-600 border-gray-300 mt-1"},null,512),[[Me,x.role]]),_[19]||(_[19]=e("label",{for:"role-vendor",class:"ml-2 sm:ml-3 block text-xs sm:text-sm font-medium text-gray-700"},[e("span",{class:"font-semibold"},"Vendor"),e("span",{class:"text-gray-500 block sm:inline sm:ml-1"},"- Submit market surplus and manage inventory")],-1))])]),p.value.role?(d(),c("p",So,s(p.value.role),1)):Q("",!0)]),x.role==="vendor"?(d(),c("div",ko,[_[28]||(_[28]=e("h3",{class:"text-base sm:text-lg font-medium text-blue-900 mb-2 sm:mb-3"},"Vendor Information",-1)),e("div",null,[_[21]||(_[21]=e("label",{for:"business_name",class:"block text-xs sm:text-sm font-medium text-gray-700 mb-1 sm:mb-2"},[re(" Business Name "),e("span",{class:"text-red-500"},"*")],-1)),e("div",null,[J(e("input",{id:"business_name","onUpdate:modelValue":_[4]||(_[4]=g=>x.business_name=g),name:"business_name",type:"text",required:"",class:ae(["block w-full px-3 py-2 sm:px-4 sm:py-3 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 text-sm sm:text-base",{"border-danger-500":p.value.business_name}]),placeholder:"Enter your business name"},null,2),[[oe,x.business_name]])]),p.value.business_name?(d(),c("p",Co,s(p.value.business_name),1)):Q("",!0)]),e("div",null,[_[23]||(_[23]=e("label",{for:"business_type",class:"block text-xs sm:text-sm font-medium text-gray-700 mb-1 sm:mb-2"},[re(" Business Type "),e("span",{class:"text-red-500"},"*")],-1)),e("div",null,[J(e("select",{id:"business_type","onUpdate:modelValue":_[5]||(_[5]=g=>x.business_type=g),name:"business_type",required:"",class:ae(["block w-full px-3 py-2 sm:px-4 sm:py-3 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 text-sm sm:text-base",{"border-danger-500":p.value.business_type}])},[..._[22]||(_[22]=[me('<option value="">Select business type</option><option value="market_vendor">Market Vendor</option><option value="farm_owner">Farm Owner</option><option value="food_processor">Food Processor</option><option value="wholesaler">Wholesaler</option><option value="other">Other</option>',6)])],2),[[ue,x.business_type]])]),p.value.business_type?(d(),c("p",jo,s(p.value.business_type),1)):Q("",!0)]),e("div",null,[_[25]||(_[25]=e("label",{for:"business_license",class:"block text-xs sm:text-sm font-medium text-gray-700 mb-1 sm:mb-2"},[re(" Business License/Registration "),e("span",{class:"text-red-500"},"*")],-1)),e("div",null,[e("input",{id:"business_license",ref_key:"licenseFile",ref:n,name:"business_license",type:"file",accept:".pdf,.jpg,.jpeg,.png",required:"",class:ae(["block w-full px-3 py-2 sm:px-4 sm:py-3 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 text-xs sm:text-sm",{"border-danger-500":p.value.business_license}]),onChange:W},null,34),_[24]||(_[24]=e("p",{class:"text-xs sm:text-sm text-gray-500 mt-1"}," Upload PDF, JPG, or PNG file (Max 5MB) ",-1))]),p.value.business_license?(d(),c("p",Po,s(p.value.business_license),1)):Q("",!0),x.licenseFileName?(d(),c("p",Io," âœ“ File selected: "+s(x.licenseFileName),1)):Q("",!0)]),e("div",null,[_[27]||(_[27]=e("label",{for:"years_in_business",class:"block text-xs sm:text-sm font-medium text-gray-700 mb-1 sm:mb-2"},[re(" Years in Business "),e("span",{class:"text-red-500"},"*")],-1)),e("div",null,[J(e("select",{id:"years_in_business","onUpdate:modelValue":_[6]||(_[6]=g=>x.years_in_business=g),name:"years_in_business",required:"",class:ae(["block w-full px-3 py-2 sm:px-4 sm:py-3 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 text-sm sm:text-base",{"border-danger-500":p.value.years_in_business}])},[..._[26]||(_[26]=[me('<option value="">Select years</option><option value="0-1">Less than 1 year</option><option value="1-3">1-3 years</option><option value="3-5">3-5 years</option><option value="5-10">5-10 years</option><option value="10+">More than 10 years</option>',6)])],2),[[ue,x.years_in_business]])]),p.value.years_in_business?(d(),c("p",Uo,s(p.value.years_in_business),1)):Q("",!0)])])):Q("",!0),e("div",null,[_[29]||(_[29]=e("label",{for:"phone",class:"block text-xs sm:text-sm font-medium text-gray-700 mb-1 sm:mb-2"}," Phone Number (Optional) ",-1)),e("div",null,[J(e("input",{id:"phone","onUpdate:modelValue":_[7]||(_[7]=g=>x.phone=g),name:"phone",type:"tel",autocomplete:"tel",class:ae(["block w-full px-3 py-2 sm:px-4 sm:py-3 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 text-sm sm:text-base",{"border-danger-500":p.value.phone}]),placeholder:"+63 912 345 6789"},null,2),[[oe,x.phone]])]),p.value.phone?(d(),c("p",Ao,s(p.value.phone),1)):Q("",!0)]),e("div",null,[_[30]||(_[30]=e("label",{for:"address",class:"block text-xs sm:text-sm font-medium text-gray-700 mb-1 sm:mb-2"}," Address (Optional) ",-1)),e("div",null,[J(e("textarea",{id:"address","onUpdate:modelValue":_[8]||(_[8]=g=>x.address=g),name:"address",rows:"3",class:ae(["block w-full px-3 py-2 sm:px-4 sm:py-3 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 text-sm sm:text-base",{"border-danger-500":p.value.address}]),placeholder:"Enter your address"},null,2),[[oe,x.address]])]),p.value.address?(d(),c("p",Oo,s(p.value.address),1)):Q("",!0)]),e("div",null,[_[31]||(_[31]=e("label",{for:"password",class:"block text-xs sm:text-sm font-medium text-gray-700 mb-1 sm:mb-2"}," Password ",-1)),e("div",null,[J(e("input",{id:"password","onUpdate:modelValue":_[9]||(_[9]=g=>x.password=g),name:"password",type:"password",autocomplete:"new-password",required:"",class:ae(["block w-full px-3 py-2 sm:px-4 sm:py-3 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 text-sm sm:text-base",{"border-danger-500":p.value.password}]),placeholder:"Create a password"},null,2),[[oe,x.password]])]),p.value.password?(d(),c("p",qo,s(p.value.password),1)):Q("",!0)]),e("div",null,[_[32]||(_[32]=e("label",{for:"confirm_password",class:"block text-xs sm:text-sm font-medium text-gray-700 mb-1 sm:mb-2"}," Confirm Password ",-1)),e("div",null,[J(e("input",{id:"confirm_password","onUpdate:modelValue":_[10]||(_[10]=g=>x.confirm_password=g),name:"confirm_password",type:"password",autocomplete:"new-password",required:"",class:ae(["block w-full px-3 py-2 sm:px-4 sm:py-3 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 text-sm sm:text-base",{"border-danger-500":p.value.confirm_password}]),placeholder:"Confirm your password"},null,2),[[oe,x.confirm_password]])]),p.value.confirm_password?(d(),c("p",To,s(p.value.confirm_password),1)):Q("",!0)]),e("div",Mo,[J(e("input",{id:"terms","onUpdate:modelValue":_[11]||(_[11]=g=>x.acceptTerms=g),name:"terms",type:"checkbox",required:"",class:"h-3 w-3 sm:h-4 sm:w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded mt-1"},null,512),[[ze,x.acceptTerms]]),_[33]||(_[33]=e("label",{for:"terms",class:"ml-2 block text-xs sm:text-sm text-gray-900"},[re(" I agree to the "),e("a",{href:"#",class:"text-primary-600 hover:text-primary-500"},"Terms and Conditions"),re(" and "),e("a",{href:"#",class:"text-primary-600 hover:text-primary-500"},"Privacy Policy")],-1))]),e("div",null,[e("button",{type:"submit",disabled:y.value,class:"w-full flex justify-center py-2 sm:py-3 px-4 border border-transparent rounded-md shadow-sm text-xs sm:text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200"},[y.value?(d(),c("span",No,[..._[34]||(_[34]=[me('<svg class="animate-spin -ml-1 mr-2 sm:mr-3 h-3 w-3 sm:h-4 sm:w-4 sm:h-5 sm:w-5 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg><span class="hidden xs:inline">Creating account...</span><span class="xs:hidden">Creating...</span>',3)])])):(d(),c("span",Do,"Create account"))],8,Fo)])],32)])])])}}}),Vo={class:"min-h-screen bg-gray-50"},Bo={class:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},Wo={class:"grid grid-cols-1 lg:grid-cols-3 gap-8"},Lo={class:"lg:col-span-1"},Zo={class:"card"},Ro={class:"card-body text-center"},zo={class:"relative w-24 h-24 mx-auto mb-4"},Jo={key:0,class:"w-24 h-24 rounded-full overflow-hidden"},Ho=["src","alt"],Go={key:1,class:"w-24 h-24 bg-primary-600 rounded-full flex items-center justify-center"},Qo={class:"text-white font-bold text-2xl"},Ko={class:"text-lg font-semibold text-gray-900"},Xo={class:"text-sm text-gray-500 capitalize"},Yo={class:"text-sm text-gray-500"},er={class:"mt-6 space-y-2"},tr={class:"flex justify-between text-sm"},sr={class:"text-gray-900"},ar={class:"flex justify-between text-sm"},or={key:0,class:"flex justify-between text-sm"},rr={class:"lg:col-span-2"},ir={class:"card"},lr={class:"card-body"},nr={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},dr={key:0,class:"form-error"},cr={key:0,class:"form-error"},ur={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},mr={key:0,class:"form-error"},pr=["value"],vr={key:0,class:"form-error"},gr={key:0,class:"space-y-6"},xr={class:"border-t pt-6"},yr={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},_r={key:0,class:"form-error"},fr={key:0,class:"form-error"},hr={class:"mt-6"},br={key:0,class:"form-error"},wr={class:"flex items-center justify-between pt-6 border-t"},$r=["disabled"],Sr={key:0,class:"flex items-center"},kr={key:1},Cr={class:"card mt-8"},jr={class:"card-body"},Pr={key:0,class:"form-error"},Ir={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Ur={key:0,class:"form-error"},Ar={key:0,class:"form-error"},Or={class:"flex justify-end"},qr=["disabled"],Tr={key:0,class:"flex items-center"},Mr={key:1},Fr=xe({__name:"ProfileView",setup(o){const a=fe(),t=he(),l=ie(()=>a.user),y=O(!1),p=O(!1),n=O({}),x=O({}),W=O(),B=He({full_name:"",email:"",phone:"",address:"",role:"",business_name:"",business_type:"",years_in_business:""}),F=He({currentPassword:"",newPassword:"",confirmPassword:""}),h=()=>(n.value={},B.full_name.trim()||(n.value.full_name="Full name is required"),B.email?/\S+@\S+\.\S+/.test(B.email)||(n.value.email="Email is invalid"):n.value.email="Email is required",B.phone&&!/^\+?[\d\s-()]+$/.test(B.phone)&&(n.value.phone="Phone number is invalid"),Object.keys(n.value).length===0),_=()=>(x.value={},F.currentPassword||(x.value.currentPassword="Current password is required"),F.newPassword?F.newPassword.length<6&&(x.value.newPassword="Password must be at least 6 characters"):x.value.newPassword="New password is required",F.confirmPassword?F.newPassword!==F.confirmPassword&&(x.value.confirmPassword="Passwords do not match"):x.value.confirmPassword="Please confirm your password",Object.keys(x.value).length===0),D=async()=>{var L;if(h()){y.value=!0;try{const M={full_name:B.full_name,email:B.email,phone:B.phone,address:B.address};((L=l.value)==null?void 0:L.role)==="vendor"&&(M.business_name=B.business_name,M.business_type=B.business_type,M.years_in_business=B.years_in_business),await a.updateProfile(M),t.success("Profile updated successfully!")}catch(M){t.error(M.message||"Failed to update profile")}finally{y.value=!1}}},g=async()=>{if(_()){p.value=!0;try{await new Promise(L=>setTimeout(L,1e3)),t.success("Password changed successfully!"),F.currentPassword="",F.newPassword="",F.confirmPassword=""}catch(L){t.error(L.message||"Failed to change password")}finally{p.value=!1}}},T=()=>{l.value&&(B.full_name=l.value.full_name,B.email=l.value.email,B.phone=l.value.phone||"",B.address=l.value.address||"",B.role=l.value.role,B.business_name=l.value.business_name||"",B.business_type=l.value.business_type||"",B.years_in_business=l.value.years_in_business||""),n.value={}},N=L=>L?new Date(L).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"N/A",v=()=>{var L;(L=W.value)==null||L.click()},m=async L=>{var w;const M=L.target,r=(w=M.files)==null?void 0:w[0];if(r){if(!r.type.startsWith("image/")){t.error("Please select a valid image file");return}if(r.size>5*1024*1024){t.error("Image size must be less than 5MB");return}try{y.value=!0;const i=await Mt(r);await a.updateProfile({profile_photo:i}),t.success("Profile photo updated successfully!"),M.value=""}catch(i){t.error(i.message||"Failed to update profile photo")}finally{y.value=!1}}},b=()=>{var L;(L=l.value)!=null&&L.profile_photo&&a.updateProfile({profile_photo:void 0})},C=L=>{switch(L){case"approved":return"text-success-600";case"pending":return"text-warning-600";case"rejected":return"text-danger-600";default:return"text-gray-500"}};return _e(()=>{T()}),(L,M)=>{var r,w,i,A,f,E,Z,R,te,pe,ee,U,le;return d(),c("div",Vo,[M[30]||(M[30]=me('<div class="bg-white shadow-sm border-b border-gray-200"><div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"><div class="flex items-center justify-between"><div><h1 class="text-2xl font-bold text-gray-900">Profile Settings</h1><p class="text-gray-600 mt-1">Manage your account information</p></div></div></div></div>',1)),e("div",Bo,[e("div",Wo,[e("div",Lo,[e("div",Zo,[e("div",Ro,[e("div",zo,[(r=l.value)!=null&&r.profile_photo?(d(),c("div",Jo,[e("img",{src:l.value.profile_photo,alt:l.value.full_name,class:"w-full h-full object-cover",onError:b},null,40,Ho)])):(d(),c("div",Go,[e("span",Qo,s(((i=(w=l.value)==null?void 0:w.full_name)==null?void 0:i.charAt(0))||"U"),1)])),e("button",{onClick:v,class:"absolute -bottom-1 -right-1 w-8 h-8 bg-primary-600 rounded-full flex items-center justify-center text-white hover:bg-primary-700 transition-colors",title:"Change profile photo"},[$(S(us),{class:"w-4 h-4"})]),e("input",{ref_key:"fileInput",ref:W,type:"file",accept:"image/*",onChange:m,class:"hidden"},null,544)]),e("h3",Ko,s((A=l.value)==null?void 0:A.full_name),1),e("p",Xo,s((f=l.value)==null?void 0:f.role),1),e("p",Yo,s((E=l.value)==null?void 0:E.email),1),e("div",er,[e("div",tr,[M[10]||(M[10]=e("span",{class:"text-gray-500"},"Member since:",-1)),e("span",sr,s(N((Z=l.value)==null?void 0:Z.created_at)),1)]),e("div",ar,[M[11]||(M[11]=e("span",{class:"text-gray-500"},"Status:",-1)),e("span",{class:ae((R=l.value)!=null&&R.is_active?"text-success-600":"text-danger-600")},s((te=l.value)!=null&&te.is_active?"Active":"Inactive"),3)]),((pe=l.value)==null?void 0:pe.role)==="vendor"?(d(),c("div",or,[M[12]||(M[12]=e("span",{class:"text-gray-500"},"Vendor Status:",-1)),e("span",{class:ae(C((ee=l.value)==null?void 0:ee.vendor_status))},s(((U=l.value)==null?void 0:U.vendor_status)||"N/A"),3)])):Q("",!0)])])])]),e("div",rr,[e("div",ir,[M[24]||(M[24]=e("div",{class:"card-header"},[e("h3",{class:"text-lg font-semibold text-gray-900"},"Personal Information")],-1)),e("div",lr,[e("form",{onSubmit:Pe(D,["prevent"]),class:"space-y-6"},[e("div",nr,[e("div",null,[M[13]||(M[13]=e("label",{class:"form-label"},"Full Name",-1)),J(e("input",{"onUpdate:modelValue":M[0]||(M[0]=Y=>B.full_name=Y),type:"text",required:"",class:ae(["form-input",{"border-danger-500":n.value.full_name}])},null,2),[[oe,B.full_name]]),n.value.full_name?(d(),c("p",dr,s(n.value.full_name),1)):Q("",!0)]),e("div",null,[M[14]||(M[14]=e("label",{class:"form-label"},"Email",-1)),J(e("input",{"onUpdate:modelValue":M[1]||(M[1]=Y=>B.email=Y),type:"email",required:"",class:ae(["form-input",{"border-danger-500":n.value.email}])},null,2),[[oe,B.email]]),n.value.email?(d(),c("p",cr,s(n.value.email),1)):Q("",!0)])]),e("div",ur,[e("div",null,[M[15]||(M[15]=e("label",{class:"form-label"},"Phone Number",-1)),J(e("input",{"onUpdate:modelValue":M[2]||(M[2]=Y=>B.phone=Y),type:"tel",class:ae(["form-input",{"border-danger-500":n.value.phone}]),placeholder:"+63 912 345 6789"},null,2),[[oe,B.phone]]),n.value.phone?(d(),c("p",mr,s(n.value.phone),1)):Q("",!0)]),e("div",null,[M[16]||(M[16]=e("label",{class:"form-label"},"Role",-1)),e("input",{value:B.role,type:"text",disabled:"",class:"form-input bg-gray-100"},null,8,pr),M[17]||(M[17]=e("p",{class:"text-xs text-gray-500 mt-1"},"Role cannot be changed",-1))])]),e("div",null,[M[18]||(M[18]=e("label",{class:"form-label"},"Address",-1)),J(e("textarea",{"onUpdate:modelValue":M[3]||(M[3]=Y=>B.address=Y),rows:"3",class:ae(["form-input",{"border-danger-500":n.value.address}]),placeholder:"Enter your address"},null,2),[[oe,B.address]]),n.value.address?(d(),c("p",vr,s(n.value.address),1)):Q("",!0)]),((le=l.value)==null?void 0:le.role)==="vendor"?(d(),c("div",gr,[e("div",xr,[M[22]||(M[22]=e("h4",{class:"text-lg font-medium text-gray-900 mb-4"},"Business Information",-1)),e("div",yr,[e("div",null,[M[19]||(M[19]=e("label",{class:"form-label"},"Business Name",-1)),J(e("input",{"onUpdate:modelValue":M[4]||(M[4]=Y=>B.business_name=Y),type:"text",class:ae(["form-input",{"border-danger-500":n.value.business_name}]),placeholder:"Enter business name"},null,2),[[oe,B.business_name]]),n.value.business_name?(d(),c("p",_r,s(n.value.business_name),1)):Q("",!0)]),e("div",null,[M[20]||(M[20]=e("label",{class:"form-label"},"Business Type",-1)),J(e("input",{"onUpdate:modelValue":M[5]||(M[5]=Y=>B.business_type=Y),type:"text",class:ae(["form-input",{"border-danger-500":n.value.business_type}]),placeholder:"e.g., Market Vendor, Restaurant"},null,2),[[oe,B.business_type]]),n.value.business_type?(d(),c("p",fr,s(n.value.business_type),1)):Q("",!0)])]),e("div",hr,[M[21]||(M[21]=e("label",{class:"form-label"},"Years in Business",-1)),J(e("input",{"onUpdate:modelValue":M[6]||(M[6]=Y=>B.years_in_business=Y),type:"text",class:ae(["form-input",{"border-danger-500":n.value.years_in_business}]),placeholder:"e.g., 5 years"},null,2),[[oe,B.years_in_business]]),n.value.years_in_business?(d(),c("p",br,s(n.value.years_in_business),1)):Q("",!0)])])])):Q("",!0),e("div",wr,[e("button",{type:"button",onClick:T,class:"btn-outline"}," Reset "),e("button",{type:"submit",disabled:y.value,class:"btn-primary"},[y.value?(d(),c("span",Sr,[...M[23]||(M[23]=[e("svg",{class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),re(" Updating... ",-1)])])):(d(),c("span",kr,"Update Profile"))],8,$r)])],32)])]),e("div",Cr,[M[29]||(M[29]=e("div",{class:"card-header"},[e("h3",{class:"text-lg font-semibold text-gray-900"},"Change Password")],-1)),e("div",jr,[e("form",{onSubmit:Pe(g,["prevent"]),class:"space-y-6"},[e("div",null,[M[25]||(M[25]=e("label",{class:"form-label"},"Current Password",-1)),J(e("input",{"onUpdate:modelValue":M[7]||(M[7]=Y=>F.currentPassword=Y),type:"password",required:"",class:ae(["form-input",{"border-danger-500":x.value.currentPassword}])},null,2),[[oe,F.currentPassword]]),x.value.currentPassword?(d(),c("p",Pr,s(x.value.currentPassword),1)):Q("",!0)]),e("div",Ir,[e("div",null,[M[26]||(M[26]=e("label",{class:"form-label"},"New Password",-1)),J(e("input",{"onUpdate:modelValue":M[8]||(M[8]=Y=>F.newPassword=Y),type:"password",required:"",class:ae(["form-input",{"border-danger-500":x.value.newPassword}])},null,2),[[oe,F.newPassword]]),x.value.newPassword?(d(),c("p",Ur,s(x.value.newPassword),1)):Q("",!0)]),e("div",null,[M[27]||(M[27]=e("label",{class:"form-label"},"Confirm New Password",-1)),J(e("input",{"onUpdate:modelValue":M[9]||(M[9]=Y=>F.confirmPassword=Y),type:"password",required:"",class:ae(["form-input",{"border-danger-500":x.value.confirmPassword}])},null,2),[[oe,F.confirmPassword]]),x.value.confirmPassword?(d(),c("p",Ar,s(x.value.confirmPassword),1)):Q("",!0)])]),e("div",Or,[e("button",{type:"submit",disabled:p.value,class:"btn-primary"},[p.value?(d(),c("span",Tr,[...M[28]||(M[28]=[e("svg",{class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),re(" Changing... ",-1)])])):(d(),c("span",Mr,"Change Password"))],8,qr)])],32)])])])])])])}}}),Nr={class:"min-h-screen bg-gray-50"},Dr={class:"bg-white shadow-sm border-b border-gray-200"},Er={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 sm:py-6"},Vr={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between"},Br={class:"flex items-center space-x-4"},Wr={class:"text-right"},Lr={class:"text-xs sm:text-sm text-gray-500"},Zr={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 sm:py-6 lg:py-8"},Rr={class:"grid grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4 lg:gap-6 mb-6 sm:mb-8"},zr={class:"card"},Jr={class:"card-body p-3 sm:p-4 lg:p-6"},Hr={class:"flex items-center"},Gr={class:"flex-shrink-0"},Qr={class:"w-6 h-6 sm:w-8 sm:h-8 bg-violet-100 rounded-lg flex items-center justify-center"},Kr={class:"ml-2 sm:ml-4"},Xr={class:"text-lg sm:text-xl lg:text-2xl font-semibold text-gray-900"},Yr={class:"card"},ei={class:"card-body p-3 sm:p-4 lg:p-6"},ti={class:"flex items-center"},si={class:"flex-shrink-0"},ai={class:"w-6 h-6 sm:w-8 sm:h-8 bg-emerald-100 rounded-lg flex items-center justify-center"},oi={class:"ml-2 sm:ml-4"},ri={class:"text-lg sm:text-xl lg:text-2xl font-semibold text-gray-900"},ii={class:"card"},li={class:"card-body p-3 sm:p-4 lg:p-6"},ni={class:"flex items-center"},di={class:"flex-shrink-0"},ci={class:"w-6 h-6 sm:w-8 sm:h-8 bg-diamond-100 rounded-lg flex items-center justify-center"},ui={class:"ml-2 sm:ml-4"},mi={class:"text-lg sm:text-xl lg:text-2xl font-semibold text-gray-900"},pi={class:"card"},vi={class:"card-body p-3 sm:p-4 lg:p-6"},gi={class:"flex items-center"},xi={class:"flex-shrink-0"},yi={class:"w-6 h-6 sm:w-8 sm:h-8 bg-blood-100 rounded-lg flex items-center justify-center"},_i={class:"ml-2 sm:ml-4"},fi={class:"text-lg sm:text-xl lg:text-2xl font-semibold text-gray-900"},hi={class:"card mb-8"},bi={class:"card-body"},wi={class:"grid grid-cols-1 md:grid-cols-4 gap-6"},$i={class:"text-center"},Si={class:"w-16 h-16 bg-primary-100 rounded-full flex items-center justify-center mx-auto mb-3"},ki={class:"text-2xl font-bold text-primary-600"},Ci={class:"text-center"},ji={class:"w-16 h-16 bg-success-100 rounded-full flex items-center justify-center mx-auto mb-3"},Pi={class:"text-2xl font-bold text-success-600"},Ii={class:"text-center"},Ui={class:"w-16 h-16 bg-warning-100 rounded-full flex items-center justify-center mx-auto mb-3"},Ai={class:"text-2xl font-bold text-warning-600"},Oi={class:"text-center"},qi={class:"w-16 h-16 bg-info-100 rounded-full flex items-center justify-center mx-auto mb-3"},Ti={class:"text-2xl font-bold text-info-600"},Mi={class:"text-sm text-gray-500"},Fi={class:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8"},Ni={class:"card"},Di={class:"card-body"},Ei={class:"h-64"},Vi={class:"card"},Bi={class:"card-body"},Wi={class:"h-64"},Li={class:"card mb-8"},Zi={class:"card-body"},Ri={class:"h-80"},zi={class:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8"},Ji={class:"card"},Hi={class:"card-body"},Gi={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},Qi={class:"card"},Ki={class:"card-body"},Xi={class:"space-y-4"},Yi={class:"flex-shrink-0"},el={class:"w-8 h-8 bg-gray-100 rounded-full flex items-center justify-center"},tl={class:"flex-1 min-w-0"},sl={class:"text-sm text-gray-900"},al={class:"text-xs text-gray-500"},ol={class:"card"},rl={class:"card-body"},il={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},ll={class:"text-center"},nl={class:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-3"},dl={class:"text-center"},cl={class:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-3"},ul={class:"text-center"},ml={class:"w-16 h-16 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-3"},pl=xe({__name:"DashboardView",setup(o){Oe.register(xt,yt,_t,ft,ht,bt,es,wt,$t,ts,St,kt);const a=fe(),t=$e(),l=je(),y=Ie(),p=ie(()=>a.user),n=O(!1),x=O(),W=O(),B=O(),F=O({totalUsers:0,wasteSubmissions:0,totalOrders:0,totalRevenue:0}),h=O({totalUsers:0,vendors:0,customers:0,activeUsers:0,activePercentage:0}),_=O([{id:1,description:"New user registered: Maria Santos",timestamp:"2 hours ago",icon:Be},{id:2,description:"Waste submission approved: Overripe Bananas",timestamp:"4 hours ago",icon:Fe},{id:3,description:"Order #ORD-003 processed successfully",timestamp:"6 hours ago",icon:Ue},{id:4,description:"System backup completed",timestamp:"8 hours ago",icon:At}]),D=async()=>{n.value=!0;try{await Promise.all([t.loadUsers(),l.loadSourceWasteSubmissions(),y.loadOrders()]),F.value={totalUsers:t.users.length,wasteSubmissions:l.sourceWasteSubmissions.length,totalOrders:y.orders.length,totalRevenue:y.orders.reduce((i,A)=>i+A.total_price,0)};const m=t.users,b=m.filter(i=>i.role==="vendor").length,C=m.filter(i=>i.role==="user").length,L=m.filter(i=>i.is_active).length;h.value={totalUsers:m.length,vendors:b,customers:C,activeUsers:L,activePercentage:m.length>0?Math.round(L/m.length*100):0};const M=t.users.slice(0,2),r=l.sourceWasteSubmissions.slice(0,2),w=y.orders.slice(0,2);_.value=[...M.map((i,A)=>({id:`user-${A}`,description:`New user registered: ${i.full_name}`,timestamp:new Date(i.created_at).toLocaleDateString(),icon:Be})),...r.map((i,A)=>({id:`submission-${A}`,description:`Waste submission ${i.status}: ${i.title||"Unknown"}`,timestamp:new Date(i.submitted_at).toLocaleDateString(),icon:Fe})),...w.map((i,A)=>{var f;return{id:`order-${A}`,description:`Order ${i.status}: ${((f=i.product)==null?void 0:f.name)||"Unknown Product"}`,timestamp:new Date(i.order_date).toLocaleDateString(),icon:Ue}})].slice(0,5)}catch(m){console.error("Failed to load admin dashboard data:",m)}finally{n.value=!1}},g=()=>{if(!x.value)return;const m=x.value.getContext("2d");if(!m)return;const b=l.sourceWasteSubmissions,C={pending:b.filter(L=>L.status==="pending").length,approved:b.filter(L=>L.status==="approved").length,processed:b.filter(L=>L.status==="processed").length,rejected:b.filter(L=>L.status==="rejected").length};new Oe(m,{type:"doughnut",data:{labels:["Pending","Approved","Processed","Rejected"],datasets:[{data:[C.pending,C.approved,C.processed,C.rejected],backgroundColor:["#F59E0B","#10B981","#3B82F6","#EF4444"],borderWidth:2,borderColor:"#ffffff"}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom"}}}})},T=()=>{if(!W.value)return;const m=W.value.getContext("2d");if(!m)return;const b=y.orders,C={pending:b.filter(L=>L.status==="pending").length,confirmed:b.filter(L=>L.status==="confirmed").length,processing:b.filter(L=>L.status==="processing").length,shipped:b.filter(L=>L.status==="shipped").length,delivered:b.filter(L=>L.status==="delivered").length,cancelled:b.filter(L=>L.status==="cancelled").length};new Oe(m,{type:"bar",data:{labels:["Pending","Confirmed","Processing","Shipped","Delivered","Cancelled"],datasets:[{label:"Orders",data:[C.pending,C.confirmed,C.processing,C.shipped,C.delivered,C.cancelled],backgroundColor:["#F59E0B","#10B981","#3B82F6","#8B5CF6","#059669","#EF4444"],borderWidth:1,borderColor:"#ffffff"}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{y:{beginAtZero:!0,ticks:{stepSize:1}}}}})},N=()=>{if(!B.value)return;const m=B.value.getContext("2d");if(!m)return;const b=y.orders,C=[],L=[];for(let M=6;M>=0;M--){const r=new Date;r.setDate(r.getDate()-M);const w=r.toISOString().split("T")[0],i=b.filter(A=>A.order_date.startsWith(w)).reduce((A,f)=>A+f.total_price,0);C.push(r.toLocaleDateString("en-US",{month:"short",day:"numeric"})),L.push(i)}new Oe(m,{type:"line",data:{labels:C,datasets:[{label:"Revenue (â‚±)",data:L,borderColor:"#3B82F6",backgroundColor:"rgba(59, 130, 246, 0.1)",borderWidth:3,fill:!0,tension:.4,pointBackgroundColor:"#3B82F6",pointBorderColor:"#ffffff",pointBorderWidth:2,pointRadius:6}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{y:{beginAtZero:!0,ticks:{callback:function(M){return"â‚±"+M.toLocaleString()}}}}}})},v=async()=>{await gt(),g(),T(),N()};return _e(async()=>{await D(),await v()}),(m,b)=>{var L;const C=Te("router-link");return d(),c("div",Nr,[e("div",Dr,[e("div",Er,[e("div",Vr,[b[1]||(b[1]=e("div",{class:"mb-2 sm:mb-0"},[e("h1",{class:"text-xl sm:text-2xl font-bold text-gray-900"},"Admin Dashboard"),e("p",{class:"text-sm sm:text-base text-gray-600 mt-1"},"System administration and monitoring")],-1)),e("div",Br,[e("div",Wr,[e("p",Lr,"Welcome, "+s((L=p.value)==null?void 0:L.full_name),1),b[0]||(b[0]=e("p",{class:"text-xs sm:text-sm text-gray-500"},"Administrator",-1))])])])])]),e("div",Zr,[e("div",Rr,[e("div",zr,[e("div",Jr,[e("div",Hr,[e("div",Gr,[e("div",Qr,[$(S(Be),{class:"w-3 h-3 sm:w-5 sm:h-5 text-violet-600"})])]),e("div",Kr,[b[2]||(b[2]=e("p",{class:"text-xs sm:text-sm font-medium text-gray-500"},"Total Users",-1)),e("p",Xr,s(F.value.totalUsers),1)])])])]),e("div",Yr,[e("div",ei,[e("div",ti,[e("div",si,[e("div",ai,[$(S(Fe),{class:"w-3 h-3 sm:w-5 sm:h-5 text-emerald-600"})])]),e("div",oi,[b[3]||(b[3]=e("p",{class:"text-xs sm:text-sm font-medium text-gray-500"},"Waste Submissions",-1)),e("p",ri,s(F.value.wasteSubmissions),1)])])])]),e("div",ii,[e("div",li,[e("div",ni,[e("div",di,[e("div",ci,[$(S(Ue),{class:"w-3 h-3 sm:w-5 sm:h-5 text-diamond-600"})])]),e("div",ui,[b[4]||(b[4]=e("p",{class:"text-xs sm:text-sm font-medium text-gray-500"},"Total Orders",-1)),e("p",mi,s(F.value.totalOrders),1)])])])]),e("div",pi,[e("div",vi,[e("div",gi,[e("div",xi,[e("div",yi,[$(S(De),{class:"w-3 h-3 sm:w-5 sm:h-5 text-blood-600"})])]),e("div",_i,[b[5]||(b[5]=e("p",{class:"text-xs sm:text-sm font-medium text-gray-500"},"Total Revenue",-1)),e("p",fi,"â‚±"+s(F.value.totalRevenue.toLocaleString()),1)])])])])]),e("div",hi,[b[13]||(b[13]=e("div",{class:"card-header"},[e("h3",{class:"text-lg font-semibold text-gray-900"},"User Statistics")],-1)),e("div",bi,[e("div",wi,[e("div",$i,[e("div",Si,[$(S(Be),{class:"w-8 h-8 text-primary-600"})]),b[6]||(b[6]=e("h4",{class:"font-medium text-gray-900 mb-1"},"Total Users",-1)),e("p",ki,s(h.value.totalUsers),1),b[7]||(b[7]=e("p",{class:"text-sm text-gray-500"},"All registered users",-1))]),e("div",Ci,[e("div",ji,[$(S(Fe),{class:"w-8 h-8 text-success-600"})]),b[8]||(b[8]=e("h4",{class:"font-medium text-gray-900 mb-1"},"Vendors",-1)),e("p",Pi,s(h.value.vendors),1),b[9]||(b[9]=e("p",{class:"text-sm text-gray-500"},"Waste suppliers",-1))]),e("div",Ii,[e("div",Ui,[$(S(Ue),{class:"w-8 h-8 text-warning-600"})]),b[10]||(b[10]=e("h4",{class:"font-medium text-gray-900 mb-1"},"Customers",-1)),e("p",Ai,s(h.value.customers),1),b[11]||(b[11]=e("p",{class:"text-sm text-gray-500"},"Product buyers",-1))]),e("div",Oi,[e("div",qi,[$(S(Se),{class:"w-8 h-8 text-info-600"})]),b[12]||(b[12]=e("h4",{class:"font-medium text-gray-900 mb-1"},"Active Users",-1)),e("p",Ti,s(h.value.activeUsers),1),e("p",Mi,s(h.value.activePercentage)+"% of total",1)])])])]),e("div",Fi,[e("div",Ni,[b[14]||(b[14]=e("div",{class:"card-header"},[e("h3",{class:"text-lg font-semibold text-gray-900"},"Waste Processing Status")],-1)),e("div",Di,[e("div",Ei,[e("canvas",{ref_key:"wasteChart",ref:x,class:"w-full h-full"},null,512)])])]),e("div",Vi,[b[15]||(b[15]=e("div",{class:"card-header"},[e("h3",{class:"text-lg font-semibold text-gray-900"},"Orders Status Distribution")],-1)),e("div",Bi,[e("div",Wi,[e("canvas",{ref_key:"ordersChart",ref:W,class:"w-full h-full"},null,512)])])])]),e("div",Li,[b[16]||(b[16]=e("div",{class:"card-header"},[e("h3",{class:"text-lg font-semibold text-gray-900"},"Revenue Trend (Last 7 Days)")],-1)),e("div",Zi,[e("div",Ri,[e("canvas",{ref_key:"revenueChart",ref:B,class:"w-full h-full"},null,512)])])]),e("div",zi,[e("div",Ji,[b[21]||(b[21]=e("div",{class:"card-header"},[e("h3",{class:"text-lg font-semibold text-gray-900"},"Quick Actions")],-1)),e("div",Hi,[e("div",Gi,[$(C,{to:"/admin/users",class:"flex items-center p-4 bg-gray-50 hover:bg-gray-100 rounded-lg transition-colors duration-200"},{default:ce(()=>[$(S(Be),{class:"w-6 h-6 text-primary-600"}),b[17]||(b[17]=e("div",{class:"ml-3"},[e("p",{class:"text-sm font-medium text-gray-900"},"Manage Users"),e("p",{class:"text-sm text-gray-500"},"User management panel")],-1))]),_:1}),$(C,{to:"/admin/analytics",class:"flex items-center p-4 bg-gray-50 hover:bg-gray-100 rounded-lg transition-colors duration-200"},{default:ce(()=>[$(S(We),{class:"w-6 h-6 text-primary-600"}),b[18]||(b[18]=e("div",{class:"ml-3"},[e("p",{class:"text-sm font-medium text-gray-900"},"Analytics"),e("p",{class:"text-sm text-gray-500"},"View system analytics")],-1))]),_:1}),$(C,{to:"/admin/waste",class:"flex items-center p-4 bg-gray-50 hover:bg-gray-100 rounded-lg transition-colors duration-200"},{default:ce(()=>[$(S(Fe),{class:"w-6 h-6 text-primary-600"}),b[19]||(b[19]=e("div",{class:"ml-3"},[e("p",{class:"text-sm font-medium text-gray-900"},"Waste Management"),e("p",{class:"text-sm text-gray-500"},"Manage waste submissions")],-1))]),_:1}),$(C,{to:"/admin/orders",class:"flex items-center p-4 bg-gray-50 hover:bg-gray-100 rounded-lg transition-colors duration-200"},{default:ce(()=>[$(S(Ue),{class:"w-6 h-6 text-primary-600"}),b[20]||(b[20]=e("div",{class:"ml-3"},[e("p",{class:"text-sm font-medium text-gray-900"},"Order Management"),e("p",{class:"text-sm text-gray-500"},"Manage orders")],-1))]),_:1})])])]),e("div",Qi,[b[22]||(b[22]=e("div",{class:"card-header"},[e("h3",{class:"text-lg font-semibold text-gray-900"},"Recent Activity")],-1)),e("div",Ki,[e("div",Xi,[(d(!0),c(ne,null,de(_.value,M=>(d(),c("div",{key:M.id,class:"flex items-start space-x-3"},[e("div",Yi,[e("div",el,[(d(),Ae(vt(M.icon),{class:"w-4 h-4 text-gray-600"}))])]),e("div",tl,[e("p",sl,s(M.description),1),e("p",al,s(M.timestamp),1)])]))),128))])])])]),e("div",ol,[b[29]||(b[29]=e("div",{class:"card-header"},[e("h3",{class:"text-lg font-semibold text-gray-900"},"System Status")],-1)),e("div",rl,[e("div",il,[e("div",ll,[e("div",nl,[$(S(Se),{class:"w-8 h-8 text-green-600"})]),b[23]||(b[23]=e("h4",{class:"text-lg font-semibold text-gray-900"},"System Online",-1)),b[24]||(b[24]=e("p",{class:"text-sm text-gray-500"},"All services operational",-1))]),e("div",dl,[e("div",cl,[$(S(At),{class:"w-8 h-8 text-blue-600"})]),b[25]||(b[25]=e("h4",{class:"text-lg font-semibold text-gray-900"},"Database",-1)),b[26]||(b[26]=e("p",{class:"text-sm text-gray-500"},"Connected and healthy",-1))]),e("div",ul,[e("div",ml,[$(S(Ft),{class:"w-8 h-8 text-purple-600"})]),b[27]||(b[27]=e("h4",{class:"text-lg font-semibold text-gray-900"},"Storage",-1)),b[28]||(b[28]=e("p",{class:"text-sm text-gray-500"},"85% capacity used",-1))])])])])])])}}}),vl={class:"min-h-screen bg-gray-50"},gl={class:"bg-white shadow-sm border-b border-gray-200"},xl={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"},yl={class:"flex items-center justify-between"},_l={class:"flex items-center space-x-4"},fl={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},hl={class:"card mb-6"},bl={class:"card-body"},wl={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},$l={class:"card"},Sl={class:"card-header"},kl={class:"text-lg font-semibold text-gray-900"},Cl={class:"overflow-x-auto"},jl={class:"min-w-full divide-y divide-gray-200"},Pl={class:"bg-white divide-y divide-gray-200"},Il={class:"px-6 py-4 whitespace-nowrap"},Ul={class:"flex items-center"},Al={class:"flex-shrink-0 h-10 w-10"},Ol={class:"h-10 w-10 bg-primary-600 rounded-full flex items-center justify-center"},ql={class:"text-white font-medium text-sm"},Tl={class:"ml-4"},Ml={class:"text-sm font-medium text-gray-900"},Fl={class:"text-sm text-gray-500"},Nl={class:"px-6 py-4 whitespace-nowrap"},Dl={class:"badge-primary capitalize"},El={class:"px-6 py-4 whitespace-nowrap"},Vl={class:"px-6 py-4 whitespace-nowrap"},Bl={key:1,class:"text-gray-400 text-sm"},Wl={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Ll={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},Zl={class:"flex items-center space-x-2"},Rl=["onClick"],zl=["onClick"],Jl=["onClick"],Hl=["onClick"],Gl=["onClick"],Ql=["onClick"],Kl={class:"card-footer"},Xl={class:"flex items-center justify-between"},Yl={class:"text-sm text-gray-700"},en={class:"flex items-center space-x-2"},tn=["disabled"],sn={class:"text-sm text-gray-700"},an=["disabled"],on={key:0,class:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50"},rn={class:"relative top-10 mx-auto p-6 border w-full max-w-2xl shadow-lg rounded-md bg-white"},ln={class:"mt-3"},nn={class:"text-lg font-medium text-gray-900 mb-4"},dn={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},cn={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},un={key:0},mn={class:"mt-1 border rounded-lg p-4 bg-gray-50"},pn={class:"flex items-center justify-between"},vn={class:"flex items-center space-x-3"},gn={class:"text-sm text-gray-500"},xn={class:"text-sm text-gray-500"},yn={class:"mt-1 flex items-center space-x-4"},_n={key:0,class:"flex-shrink-0"},fn=["src"],hn={key:1,class:"flex-shrink-0"},bn=["src"],wn={key:2,class:"flex-shrink-0"},$n={class:"h-20 w-20 rounded-full bg-gray-200 flex items-center justify-center border-2 border-gray-300"},Sn={class:"flex-1"},kn={key:1},Cn={class:"flex items-center space-x-3 pt-4"},jn=["disabled"],Pn={key:1,class:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50"},In={class:"relative top-10 mx-auto p-5 border w-full max-w-4xl shadow-lg rounded-md bg-white"},Un={class:"mt-3"},An={class:"flex items-center justify-between mb-4"},On={key:0,class:"space-y-6"},qn={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Tn={class:"space-y-3"},Mn={class:"text-sm text-gray-900"},Fn={class:"text-sm text-gray-900"},Nn={class:"text-sm text-gray-900"},Dn={class:"text-sm text-gray-900"},En={class:"space-y-3"},Vn={class:"text-sm text-gray-900"},Bn={class:"text-sm text-gray-900"},Wn={class:"text-sm text-gray-900"},Ln={class:"text-sm text-gray-900"},Zn={key:0,class:"border rounded-lg p-4"},Rn={class:"flex items-center justify-between mb-3"},zn={class:"flex items-center space-x-3"},Jn={class:"text-sm text-gray-500"},Hn={class:"text-sm text-gray-500"},Gn={key:0,class:"mt-3 rounded border bg-gray-100 overflow-hidden",style:{"min-height":"360px"}},Qn=["src"],Kn={key:1,class:"border rounded-lg p-4 bg-gray-50"},Xn={class:"border-t pt-6"},Yn={class:"flex items-center space-x-4"},ed=xe({__name:"UserManagementView",setup(o,{expose:a}){const t=he(),l=$e(),y=O([]),p=O(!1),n=O(""),x=O(""),W=O(""),B=O(1),F=O(10),h=O(null),_=O(!1),D=O(!1),g=O(!1),T=O(null),N=O(null),v=O({full_name:"",email:"",role:"user",phone:"",address:"",password:"",profile_photo_preview:"",profile_photo_file:null}),m=ie(()=>{let q=y.value;if(n.value){const P=n.value.toLowerCase();q=q.filter(G=>G.full_name.toLowerCase().includes(P)||G.email.toLowerCase().includes(P))}if(x.value&&(q=q.filter(P=>P.role===x.value)),W.value)if(W.value==="pending_vendors")q=q.filter(P=>P.role==="vendor"&&P.vendor_status==="pending");else{const P=W.value==="active";q=q.filter(G=>G.is_active===P)}return q}),b=ie(()=>{const q=(B.value-1)*F.value,P=q+F.value;return m.value.slice(q,P)}),C=ie(()=>{var P;const q=(P=N.value)==null?void 0:P.business_license;return!q||typeof q!="string"||q.startsWith("blob:")||q.startsWith("data:")?"":It(q)}),L=ie(()=>Math.ceil(m.value.length/F.value)),M=async()=>{try{p.value=!0,await l.loadUsers(),y.value=l.users}catch(q){t.error(q.message||"Failed to load users")}finally{p.value=!1}},r=()=>{n.value="",x.value="",W.value="",B.value=1},w=q=>{T.value=q,v.value={full_name:q.full_name,email:q.email,role:q.role,phone:q.phone||"",address:q.address||"",password:"",profile_photo_preview:"",profile_photo_file:null},D.value=!0},i=async q=>{try{await l.toggleUserStatus(q.id);const P=y.value.findIndex(G=>G.id===q.id);P!==-1&&(y.value[P].is_active=!y.value[P].is_active),t.success(`User ${q.is_active?"deactivated":"activated"} successfully`)}catch(P){t.error(P.message||"Failed to update user status")}},A=async q=>{if(confirm(`Are you sure you want to delete ${q.full_name}?`))try{await l.deleteUser(q.id),y.value=y.value.filter(P=>P.id!==q.id),t.success("User deleted successfully")}catch(P){t.error(P.message||"Failed to delete user")}},f=async()=>{p.value=!0;try{_.value?(await l.createUser({full_name:v.value.full_name,email:v.value.email,role:v.value.role,phone:v.value.phone,address:v.value.address,password:v.value.password,is_active:!0}),await M(),t.success("User added successfully")):D.value&&T.value&&(await l.updateUser(T.value.id,{full_name:v.value.full_name,email:v.value.email,role:v.value.role,phone:v.value.phone,address:v.value.address}),await M(),t.success("User updated successfully")),E()}catch(q){t.error(q.message||"Failed to save user")}finally{p.value=!1}},E=()=>{_.value=!1,D.value=!1,T.value=null,v.value={full_name:"",email:"",role:"user",phone:"",address:"",password:"",profile_photo_preview:"",profile_photo_file:null}},Z=q=>{switch(q){case"pending":return"badge-warning";case"approved":return"badge-success";case"rejected":return"badge-danger";default:return"badge-gray"}},R=q=>{switch(q){case"pending":return"Pending Approval";case"approved":return"Approved";case"rejected":return"Rejected";default:return"Not Applicable"}},te=q=>{console.log("Vendor details:",q),console.log("Business license:",q.business_license),N.value=q,g.value=!0},pe=async q=>{if(confirm(`Are you sure you want to approve ${q.full_name} as a vendor?`))try{await l.updateUser(q.id,{vendor_status:"approved",is_active:!0,approval_notes:"Approved by admin",approved_by:"admin",approved_at:new Date().toISOString()});const P=y.value.findIndex(G=>G.id===q.id);P!==-1&&(y.value[P].vendor_status="approved",y.value[P].is_active=!0,y.value[P].approval_notes="Approved by admin",y.value[P].approved_by="admin",y.value[P].approved_at=new Date().toISOString()),t.success("Vendor approved successfully"),g.value=!1}catch(P){t.error(P.message||"Failed to approve vendor")}},ee=async q=>{if(confirm(`Are you sure you want to reject ${q.full_name}'s vendor application?`))try{await l.updateUser(q.id,{vendor_status:"rejected",approval_notes:"Rejected by admin"});const P=y.value.findIndex(G=>G.id===q.id);P!==-1&&(y.value[P].vendor_status="rejected",y.value[P].approval_notes="Rejected by admin"),t.success("Vendor application rejected"),g.value=!1}catch(P){t.error(P.message||"Failed to reject vendor")}},U=q=>{var k;const G=(k=q.target.files)==null?void 0:k[0];if(G){if(G.size>5*1024*1024){t.error("File size must be less than 5MB");return}if(!["image/jpeg","image/jpg","image/png"].includes(G.type)){t.error("File must be JPG or PNG");return}const u=new FileReader;u.onload=I=>{var j;v.value.profile_photo_preview=(j=I.target)==null?void 0:j.result},u.readAsDataURL(G),v.value.profile_photo_file=G}},le=q=>{if(!q||!q.trim()){t.error("No license file available");return}const P=q.trim();if(P.startsWith("blob:")){t.error("License file is no longer available. Please ask the vendor to re-upload.");return}if(P.startsWith("data:")){window.open(P,"_blank");return}const G=It(P);G?window.open(G,"_blank"):t.error("Could not open document")},Y=q=>new Date(q).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});return _e(()=>{M()}),a({refreshUsers:()=>{M()}}),(q,P)=>{var G,k,ye;return d(),c("div",vl,[e("div",gl,[e("div",xl,[e("div",yl,[P[21]||(P[21]=e("div",null,[e("h1",{class:"text-2xl font-bold text-gray-900"},"User Management"),e("p",{class:"text-gray-600 mt-1"},"Manage platform users and their permissions")],-1)),e("div",_l,[e("button",{onClick:M,class:"btn-outline flex items-center space-x-2"},[...P[19]||(P[19]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1),e("span",null,"Refresh",-1)])]),e("button",{onClick:P[0]||(P[0]=u=>_.value=!0),class:"btn-primary flex items-center space-x-2"},[$(S(qe),{class:"w-5 h-5"}),P[20]||(P[20]=e("span",null,"Add User",-1))])])])])]),e("div",fl,[e("div",hl,[e("div",bl,[e("div",wl,[e("div",null,[P[22]||(P[22]=e("label",{class:"form-label"},"Search Users",-1)),J(e("input",{"onUpdate:modelValue":P[1]||(P[1]=u=>n.value=u),type:"text",placeholder:"Search by name or email...",class:"form-input"},null,512),[[oe,n.value]])]),e("div",null,[P[24]||(P[24]=e("label",{class:"form-label"},"Filter by Role",-1)),J(e("select",{"onUpdate:modelValue":P[2]||(P[2]=u=>x.value=u),class:"form-input"},[...P[23]||(P[23]=[e("option",{value:""},"All Roles",-1),e("option",{value:"admin"},"Admin",-1),e("option",{value:"vendor"},"Vendor",-1),e("option",{value:"user"},"User",-1)])],512),[[ue,x.value]])]),e("div",null,[P[26]||(P[26]=e("label",{class:"form-label"},"Filter by Status",-1)),J(e("select",{"onUpdate:modelValue":P[3]||(P[3]=u=>W.value=u),class:"form-input"},[...P[25]||(P[25]=[e("option",{value:""},"All Status",-1),e("option",{value:"active"},"Active",-1),e("option",{value:"inactive"},"Inactive",-1),e("option",{value:"pending_vendors"},"Pending Vendors",-1)])],512),[[ue,W.value]])]),e("div",{class:"flex items-end"},[e("button",{onClick:r,class:"btn-outline w-full"}," Clear Filters ")])])])]),e("div",$l,[e("div",Sl,[e("h3",kl," Users ("+s(m.value.length)+") ",1)]),e("div",Cl,[e("table",jl,[P[27]||(P[27]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," User "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Role "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Status "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Vendor Status "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Joined "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Actions ")])],-1)),e("tbody",Pl,[(d(!0),c(ne,null,de(b.value,u=>(d(),c("tr",{key:u.id,class:"hover:bg-gray-50"},[e("td",Il,[e("div",Ul,[e("div",Al,[e("div",Ol,[e("span",ql,s(u.full_name.charAt(0)),1)])]),e("div",Tl,[e("div",Ml,s(u.full_name),1),e("div",Fl,s(u.email),1)])])]),e("td",Nl,[e("span",Dl,s(u.role),1)]),e("td",El,[e("span",{class:ae(u.is_active?"badge-success":"badge-danger")},s(u.is_active?"Active":"Inactive"),3)]),e("td",Vl,[u.role==="vendor"?(d(),c("span",{key:0,class:ae(Z(u.vendor_status))},s(R(u.vendor_status)),3)):(d(),c("span",Bl,"-"))]),e("td",Wl,s(Y(u.created_at)),1),e("td",Ll,[e("div",Zl,[e("button",{onClick:I=>w(u),class:"text-primary-600 hover:text-primary-900"},[$(S(Vt),{class:"w-4 h-4"})],8,Rl),u.role==="vendor"&&u.vendor_status==="pending"?(d(),c("button",{key:0,onClick:I=>te(u),class:"text-blue-600 hover:text-blue-900",title:"View Vendor Details"},[$(S(xs),{class:"w-4 h-4"})],8,zl)):Q("",!0),u.role==="vendor"&&u.vendor_status==="pending"?(d(),c("button",{key:1,onClick:I=>pe(u),class:"text-green-600 hover:text-green-900",title:"Approve Vendor"},[$(S(Se),{class:"w-4 h-4"})],8,Jl)):Q("",!0),u.role==="vendor"&&u.vendor_status==="pending"?(d(),c("button",{key:2,onClick:I=>ee(u),class:"text-red-600 hover:text-red-900",title:"Reject Vendor"},[$(S(mt),{class:"w-4 h-4"})],8,Hl)):Q("",!0),e("button",{onClick:I=>i(u),class:ae(u.is_active?"text-warning-600 hover:text-warning-900":"text-success-600 hover:text-success-900")},[(d(),Ae(vt(u.is_active?"XMarkIcon":"CheckIcon"),{class:"w-4 h-4"}))],10,Gl),e("button",{onClick:I=>A(u),class:"text-danger-600 hover:text-danger-900"},[$(S(Wt),{class:"w-4 h-4"})],8,Ql)])])]))),128))])])]),e("div",Kl,[e("div",Xl,[e("div",Yl," Showing "+s((B.value-1)*F.value+1)+" to "+s(Math.min(B.value*F.value,m.value.length))+" of "+s(m.value.length)+" results ",1),e("div",en,[e("button",{onClick:P[4]||(P[4]=u=>B.value=Math.max(1,B.value-1)),disabled:B.value===1,class:"btn-outline disabled:opacity-50 disabled:cursor-not-allowed"}," Previous ",8,tn),e("span",sn," Page "+s(B.value)+" of "+s(L.value),1),e("button",{onClick:P[5]||(P[5]=u=>B.value=Math.min(L.value,B.value+1)),disabled:B.value===L.value,class:"btn-outline disabled:opacity-50 disabled:cursor-not-allowed"}," Next ",8,an)])])])])]),_.value||D.value?(d(),c("div",on,[e("div",rn,[e("div",ln,[e("h3",nn,s(_.value?"Add New User":"Edit User"),1),e("form",{onSubmit:Pe(f,["prevent"]),class:"space-y-6"},[e("div",dn,[e("div",null,[P[28]||(P[28]=e("label",{class:"form-label"},"Full Name",-1)),J(e("input",{"onUpdate:modelValue":P[6]||(P[6]=u=>v.value.full_name=u),type:"text",required:"",class:"form-input",placeholder:"Enter full name"},null,512),[[oe,v.value.full_name]])]),e("div",null,[P[29]||(P[29]=e("label",{class:"form-label"},"Email",-1)),J(e("input",{"onUpdate:modelValue":P[7]||(P[7]=u=>v.value.email=u),type:"email",required:"",class:"form-input",placeholder:"Enter email"},null,512),[[oe,v.value.email]])])]),e("div",cn,[e("div",null,[P[31]||(P[31]=e("label",{class:"form-label"},"Role",-1)),J(e("select",{"onUpdate:modelValue":P[8]||(P[8]=u=>v.value.role=u),required:"",class:"form-input"},[...P[30]||(P[30]=[e("option",{value:"user"},"User",-1),e("option",{value:"vendor"},"Vendor",-1),e("option",{value:"admin"},"Admin",-1)])],512),[[ue,v.value.role]])]),e("div",null,[P[32]||(P[32]=e("label",{class:"form-label"},"Phone",-1)),J(e("input",{"onUpdate:modelValue":P[9]||(P[9]=u=>v.value.phone=u),type:"tel",class:"form-input",placeholder:"Enter phone number"},null,512),[[oe,v.value.phone]])])]),e("div",null,[P[33]||(P[33]=e("label",{class:"form-label"},"Address",-1)),J(e("textarea",{"onUpdate:modelValue":P[10]||(P[10]=u=>v.value.address=u),rows:"3",class:"form-input",placeholder:"Enter address"},null,512),[[oe,v.value.address]])]),((G=T.value)==null?void 0:G.role)==="vendor"&&((k=T.value)!=null&&k.business_license)?(d(),c("div",un,[P[35]||(P[35]=e("label",{class:"form-label"},"Business License/Proof Document",-1)),e("div",mn,[e("div",pn,[e("div",vn,[$(S(Ut),{class:"w-8 h-8 text-blue-600"}),e("div",null,[P[34]||(P[34]=e("p",{class:"text-sm font-medium text-gray-900"},"Business License Document",-1)),e("p",gn,"File: "+s(T.value.business_license),1),e("p",xn,"Uploaded on "+s(Y(T.value.created_at)),1)])]),e("button",{type:"button",onClick:P[11]||(P[11]=u=>le(T.value.business_license)),class:"btn-outline text-sm"}," View Document ")])])])):Q("",!0),e("div",null,[P[37]||(P[37]=e("label",{class:"form-label"},"Profile Photo",-1)),e("div",yn,[v.value.profile_photo_preview?(d(),c("div",_n,[e("img",{src:v.value.profile_photo_preview,alt:"Profile preview",class:"h-20 w-20 rounded-full object-cover border-2 border-gray-300"},null,8,fn)])):(ye=T.value)!=null&&ye.profile_photo?(d(),c("div",hn,[e("img",{src:`http://localhost:3000/uploads/${T.value.profile_photo}`,alt:"Current profile",class:"h-20 w-20 rounded-full object-cover border-2 border-gray-300"},null,8,bn)])):(d(),c("div",wn,[e("div",$n,[$(S(Pt),{class:"h-8 w-8 text-gray-400"})])])),e("div",Sn,[e("input",{ref_key:"photoInput",ref:h,type:"file",accept:"image/*",onChange:U,class:"hidden"},null,544),e("button",{type:"button",onClick:P[12]||(P[12]=()=>{var u;return(u=h.value)==null?void 0:u.click()}),class:"btn-outline text-sm"},s(v.value.profile_photo_preview?"Change Photo":"Upload Photo"),1),P[36]||(P[36]=e("p",{class:"text-xs text-gray-500 mt-1"},"JPG, PNG up to 5MB",-1))])])]),_.value?(d(),c("div",kn,[P[38]||(P[38]=e("label",{class:"form-label"},"Password",-1)),J(e("input",{"onUpdate:modelValue":P[13]||(P[13]=u=>v.value.password=u),type:"password",required:"",class:"form-input",placeholder:"Enter password"},null,512),[[oe,v.value.password]])])):Q("",!0),e("div",Cn,[e("button",{type:"submit",class:"btn-primary flex-1",disabled:p.value},s(p.value?"Saving...":_.value?"Add User":"Update User"),9,jn),e("button",{type:"button",onClick:E,class:"btn-outline flex-1"}," Cancel ")])],32)])])])):Q("",!0),g.value?(d(),c("div",Pn,[e("div",In,[e("div",Un,[e("div",An,[P[39]||(P[39]=e("h3",{class:"text-lg font-medium text-gray-900"}," Vendor Registration Details ",-1)),e("button",{onClick:P[14]||(P[14]=u=>g.value=!1),class:"text-gray-400 hover:text-gray-600"},[$(S(we),{class:"w-6 h-6"})])]),N.value?(d(),c("div",On,[e("div",qn,[e("div",null,[P[44]||(P[44]=e("h4",{class:"text-md font-semibold text-gray-900 mb-3"},"Basic Information",-1)),e("div",Tn,[e("div",null,[P[40]||(P[40]=e("label",{class:"text-sm font-medium text-gray-500"},"Full Name",-1)),e("p",Mn,s(N.value.full_name),1)]),e("div",null,[P[41]||(P[41]=e("label",{class:"text-sm font-medium text-gray-500"},"Email",-1)),e("p",Fn,s(N.value.email),1)]),e("div",null,[P[42]||(P[42]=e("label",{class:"text-sm font-medium text-gray-500"},"Phone",-1)),e("p",Nn,s(N.value.phone||"Not provided"),1)]),e("div",null,[P[43]||(P[43]=e("label",{class:"text-sm font-medium text-gray-500"},"Address",-1)),e("p",Dn,s(N.value.address||"Not provided"),1)])])]),e("div",null,[P[49]||(P[49]=e("h4",{class:"text-md font-semibold text-gray-900 mb-3"},"Business Information",-1)),e("div",En,[e("div",null,[P[45]||(P[45]=e("label",{class:"text-sm font-medium text-gray-500"},"Business Name",-1)),e("p",Vn,s(N.value.business_name||"Not provided"),1)]),e("div",null,[P[46]||(P[46]=e("label",{class:"text-sm font-medium text-gray-500"},"Business Type",-1)),e("p",Bn,s(N.value.business_type||"Not provided"),1)]),e("div",null,[P[47]||(P[47]=e("label",{class:"text-sm font-medium text-gray-500"},"Years in Business",-1)),e("p",Wn,s(N.value.years_in_business||"Not provided"),1)]),e("div",null,[P[48]||(P[48]=e("label",{class:"text-sm font-medium text-gray-500"},"Registration Date",-1)),e("p",Ln,s(Y(N.value.created_at)),1)])])])]),e("div",null,[P[52]||(P[52]=e("h4",{class:"text-md font-semibold text-gray-900 mb-3"},"Business License",-1)),N.value.business_license?(d(),c("div",Zn,[e("div",Rn,[e("div",zn,[$(S(Ut),{class:"w-8 h-8 text-blue-600"}),e("div",null,[P[50]||(P[50]=e("p",{class:"text-sm font-medium text-gray-900"},"Business License Document",-1)),e("p",Jn,"File: "+s(N.value.business_license),1),e("p",Hn,"Uploaded on "+s(Y(N.value.created_at)),1)])]),e("button",{onClick:P[15]||(P[15]=u=>le(N.value.business_license)),class:"btn-outline text-sm"}," Open in new tab ")]),C.value?(d(),c("div",Gn,[e("iframe",{src:C.value,class:"w-full border-0",style:{height:"400px"},title:"Business license document"},null,8,Qn)])):Q("",!0)])):(d(),c("div",Kn,[...P[51]||(P[51]=[e("p",{class:"text-sm text-gray-500"},"No business license uploaded",-1)])]))]),e("div",Xn,[P[55]||(P[55]=e("h4",{class:"text-md font-semibold text-gray-900 mb-3"},"Approval Actions",-1)),e("div",Yn,[e("button",{onClick:P[16]||(P[16]=u=>pe(N.value)),class:"btn-success flex items-center space-x-2"},[$(S(Se),{class:"w-5 h-5"}),P[53]||(P[53]=e("span",null,"Approve Vendor",-1))]),e("button",{onClick:P[17]||(P[17]=u=>ee(N.value)),class:"btn-danger flex items-center space-x-2"},[$(S(mt),{class:"w-5 h-5"}),P[54]||(P[54]=e("span",null,"Reject Vendor",-1))]),e("button",{onClick:P[18]||(P[18]=u=>g.value=!1),class:"btn-outline"}," Close ")])])])):Q("",!0)])])])):Q("",!0)])}}}),td={class:"min-h-screen bg-gray-50"},sd={class:"bg-white shadow-sm border-b border-gray-200"},ad={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"},od={class:"flex items-center justify-between"},rd={class:"flex items-center space-x-4"},id={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},ld={class:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8"},nd={class:"card"},dd={class:"card-body"},cd={class:"flex items-center"},ud={class:"flex-shrink-0"},md={class:"w-8 h-8 bg-warning-100 rounded-lg flex items-center justify-center"},pd={class:"ml-4"},vd={class:"text-2xl font-semibold text-gray-900"},gd={class:"card"},xd={class:"card-body"},yd={class:"flex items-center"},_d={class:"flex-shrink-0"},fd={class:"w-8 h-8 bg-primary-100 rounded-lg flex items-center justify-center"},hd={class:"ml-4"},bd={class:"text-2xl font-semibold text-gray-900"},wd={class:"card"},$d={class:"card-body"},Sd={class:"flex items-center"},kd={class:"flex-shrink-0"},Cd={class:"w-8 h-8 bg-success-100 rounded-lg flex items-center justify-center"},jd={class:"ml-4"},Pd={class:"text-2xl font-semibold text-gray-900"},Id={class:"card"},Ud={class:"card-body"},Ad={class:"flex items-center"},Od={class:"flex-shrink-0"},qd={class:"w-8 h-8 bg-danger-100 rounded-lg flex items-center justify-center"},Td={class:"ml-4"},Md={class:"text-2xl font-semibold text-gray-900"},Fd={class:"card"},Nd={class:"card-header"},Dd={class:"text-lg font-semibold text-gray-900"},Ed={class:"overflow-x-auto"},Vd={class:"min-w-full divide-y divide-gray-200"},Bd={class:"bg-white divide-y divide-gray-200"},Wd={class:"px-6 py-4 whitespace-nowrap"},Ld={class:"flex items-center"},Zd={class:"flex-shrink-0 h-10 w-10"},Rd={class:"h-10 w-10 bg-gray-100 rounded-lg flex items-center justify-center overflow-hidden"},zd=["src","alt","onError"],Jd={key:1,class:"w-8 h-8 bg-gray-200 rounded flex items-center justify-center"},Hd={class:"ml-4"},Gd={class:"text-sm font-medium text-gray-900"},Qd={class:"text-sm text-gray-500"},Kd={class:"px-6 py-4 whitespace-nowrap"},Xd={class:"text-sm font-medium text-gray-900"},Yd={class:"text-sm text-gray-500"},ec={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},tc={class:"px-6 py-4 whitespace-nowrap"},sc={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},ac={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},oc={class:"flex items-center space-x-2"},rc=["onClick"],ic=["onClick"],lc=["onClick"],nc=["onClick"],dc={class:"card-footer"},cc={class:"flex items-center justify-between"},uc={class:"text-sm text-gray-700"},mc={class:"flex items-center space-x-2"},pc=["disabled"],vc={class:"text-sm text-gray-700"},gc=["disabled"],xc={key:0,class:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50"},yc={class:"relative top-20 mx-auto p-5 border w-full max-w-2xl shadow-lg rounded-md bg-white"},_c={class:"mt-3"},fc={class:"flex items-center justify-between mb-4"},hc={class:"space-y-6"},bc={class:"grid grid-cols-2 gap-4"},wc={class:"text-sm text-gray-900"},$c={class:"text-sm text-gray-900"},Sc={key:0},kc={class:"text-sm text-gray-900"},Cc={class:"border-t pt-4"},jc={class:"flex items-center space-x-4"},Pc={class:"w-16 h-16 bg-gray-200 rounded-lg flex items-center justify-center overflow-hidden"},Ic=["src","alt"],Uc={class:"flex-1"},Ac={class:"font-medium text-gray-900"},Oc={class:"text-sm text-gray-500"},qc={class:"flex items-center space-x-4 mt-2"},Tc={class:"text-sm text-gray-500"},Mc={class:"text-sm text-gray-500"},Fc={class:"border-t pt-4"},Nc={class:"grid grid-cols-2 gap-4"},Dc={class:"text-sm text-gray-900"},Ec={class:"text-sm text-gray-900"},Vc={key:0,class:"mt-4"},Bc={class:"text-sm text-gray-900"},Wc=xe({__name:"WasteManagementView",setup(o){const a=he(),t=je(),l=O([]),y=O(""),p=O(1),n=O(10),x=O(null),W=O({pending:0,approved:0,processed:0,rejected:0}),B=ie(()=>{let b=l.value;return y.value&&(b=b.filter(C=>C.status===y.value)),b.sort((C,L)=>new Date(L.submitted_at||"").getTime()-new Date(C.submitted_at||"").getTime())}),F=ie(()=>{const b=(p.value-1)*n.value,C=b+n.value;return B.value.slice(b,C)}),h=ie(()=>Math.ceil(B.value.length/n.value)),_=async()=>{try{await t.loadSourceWasteSubmissions(),l.value=t.sourceWasteSubmissions}catch(b){console.error("Error loading submissions:",b),a.error(b.message||"Failed to load waste submissions")}},D=async()=>{try{await t.loadSourceWasteSubmissions();const b=t.sourceWasteSubmissions;W.value={pending:b.filter(C=>C.status==="pending").length,approved:b.filter(C=>C.status==="approved").length,processed:b.filter(C=>C.status==="processed").length,rejected:b.filter(C=>C.status==="rejected").length}}catch(b){console.error("Failed to load stats:",b)}},g=async(b,C)=>{try{await t.updateSourceWasteSubmission(b,{status:C});const L=l.value.findIndex(M=>M.id===b);L!==-1&&(l.value[L].status=C,C==="processed"&&(l.value[L].processed_at=new Date().toISOString())),a.success(`Waste submission ${C} successfully`),await D()}catch(L){a.error(L.message||"Failed to update status")}},T=b=>{x.value=b},N=b=>{console.log(`Image failed to load for submission ${b}`)},v=b=>({pending:"badge-warning",approved:"badge-primary",processed:"badge-success",rejected:"badge-danger"})[b]||"badge-gray",m=b=>new Date(b).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return _e(()=>{_(),D()}),(b,C)=>{var L,M;return d(),c("div",td,[e("div",sd,[e("div",ad,[e("div",od,[C[5]||(C[5]=e("div",null,[e("h1",{class:"text-2xl font-bold text-gray-900"},"Waste Management"),e("p",{class:"text-gray-600 mt-1"},"Manage waste submissions and processing")],-1)),e("div",rd,[J(e("select",{"onUpdate:modelValue":C[0]||(C[0]=r=>y.value=r),class:"form-input"},[...C[4]||(C[4]=[me('<option value="">All Status</option><option value="pending">Pending</option><option value="approved">Approved</option><option value="processed">Processed</option><option value="rejected">Rejected</option>',5)])],512),[[ue,y.value]])])])])]),e("div",id,[e("div",ld,[e("div",nd,[e("div",dd,[e("div",cd,[e("div",ud,[e("div",md,[$(S(Ne),{class:"w-5 h-5 text-warning-600"})])]),e("div",pd,[C[6]||(C[6]=e("p",{class:"text-sm font-medium text-gray-500"},"Pending",-1)),e("p",vd,s(W.value.pending),1)])])])]),e("div",gd,[e("div",xd,[e("div",yd,[e("div",_d,[e("div",fd,[$(S(Se),{class:"w-5 h-5 text-primary-600"})])]),e("div",hd,[C[7]||(C[7]=e("p",{class:"text-sm font-medium text-gray-500"},"Approved",-1)),e("p",bd,s(W.value.approved),1)])])])]),e("div",wd,[e("div",$d,[e("div",Sd,[e("div",kd,[e("div",Cd,[$(S(Ke),{class:"w-5 h-5 text-success-600"})])]),e("div",jd,[C[8]||(C[8]=e("p",{class:"text-sm font-medium text-gray-500"},"Processed",-1)),e("p",Pd,s(W.value.processed),1)])])])]),e("div",Id,[e("div",Ud,[e("div",Ad,[e("div",Od,[e("div",qd,[$(S(we),{class:"w-5 h-5 text-danger-600"})])]),e("div",Td,[C[9]||(C[9]=e("p",{class:"text-sm font-medium text-gray-500"},"Rejected",-1)),e("p",Md,s(W.value.rejected),1)])])])])]),e("div",Fd,[e("div",Nd,[e("h3",Dd," Waste Submissions ("+s(B.value.length)+") ",1)]),e("div",Ed,[e("table",Vd,[C[10]||(C[10]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Submission "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Vendor "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Quantity "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Status "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Submitted "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Actions ")])],-1)),e("tbody",Bd,[(d(!0),c(ne,null,de(F.value,r=>{var w,i,A;return d(),c("tr",{key:r.id,class:"hover:bg-gray-50"},[e("td",Wd,[e("div",Ld,[e("div",Zd,[e("div",Rd,[r.image_url?(d(),c("img",{key:0,src:S(Ce)(r.image_url),alt:r.title,class:"h-10 w-10 object-cover rounded-lg",onError:f=>N(r.id)},null,40,zd)):(d(),c("div",Jd,[$(S(ge),{class:"w-4 h-4 text-gray-400"})]))])]),e("div",Hd,[e("div",Gd,s(r.title||"Waste Submission"),1),e("div",Qd,s(((w=r.category)==null?void 0:w.name)||r.description||"No description"),1)])])]),e("td",Kd,[e("div",Xd,s(((i=r.vendor)==null?void 0:i.full_name)||"Unknown Vendor"),1),e("div",Yd,s(((A=r.vendor)==null?void 0:A.email)||"Unknown Email"),1)]),e("td",ec,s(r.quantity)+" "+s(r.unit),1),e("td",tc,[e("span",{class:ae(v(r.status))},s(r.status),3)]),e("td",sc,s(m(r.submitted_at||"")),1),e("td",ac,[e("div",oc,[r.status==="pending"?(d(),c("button",{key:0,onClick:f=>g(r.id,"approved"),class:"text-success-600 hover:text-success-900"}," Approve ",8,rc)):Q("",!0),r.status==="approved"?(d(),c("button",{key:1,onClick:f=>g(r.id,"processed"),class:"text-primary-600 hover:text-primary-900"}," Process ",8,ic)):Q("",!0),r.status==="pending"?(d(),c("button",{key:2,onClick:f=>g(r.id,"rejected"),class:"text-danger-600 hover:text-danger-900"}," Reject ",8,lc)):Q("",!0),e("button",{onClick:f=>T(r),class:"text-gray-600 hover:text-gray-900"}," View ",8,nc)])])])}),128))])])]),e("div",dc,[e("div",cc,[e("div",uc," Showing "+s((p.value-1)*n.value+1)+" to "+s(Math.min(p.value*n.value,B.value.length))+" of "+s(B.value.length)+" results ",1),e("div",mc,[e("button",{onClick:C[1]||(C[1]=r=>p.value=Math.max(1,p.value-1)),disabled:p.value===1,class:"btn-outline disabled:opacity-50 disabled:cursor-not-allowed"}," Previous ",8,pc),e("span",vc," Page "+s(p.value)+" of "+s(h.value),1),e("button",{onClick:C[2]||(C[2]=r=>p.value=Math.min(h.value,p.value+1)),disabled:p.value===h.value,class:"btn-outline disabled:opacity-50 disabled:cursor-not-allowed"}," Next ",8,gc)])])])])]),x.value?(d(),c("div",xc,[e("div",yc,[e("div",_c,[e("div",fc,[C[11]||(C[11]=e("h3",{class:"text-lg font-medium text-gray-900"},"Submission Details",-1)),e("button",{onClick:C[3]||(C[3]=r=>x.value=null),class:"text-gray-400 hover:text-gray-600"},[$(S(we),{class:"w-6 h-6"})])]),e("div",hc,[e("div",bc,[e("div",null,[C[12]||(C[12]=e("label",{class:"text-sm font-medium text-gray-500"},"Submission ID",-1)),e("p",wc,"#"+s(x.value.id),1)]),e("div",null,[C[13]||(C[13]=e("label",{class:"text-sm font-medium text-gray-500"},"Status",-1)),e("span",{class:ae(v(x.value.status))},s(x.value.status),3)]),e("div",null,[C[14]||(C[14]=e("label",{class:"text-sm font-medium text-gray-500"},"Submitted",-1)),e("p",$c,s(m(x.value.submitted_at||"")),1)]),x.value.processed_at?(d(),c("div",Sc,[C[15]||(C[15]=e("label",{class:"text-sm font-medium text-gray-500"},"Processed",-1)),e("p",kc,s(m(x.value.processed_at)),1)])):Q("",!0)]),e("div",Cc,[C[16]||(C[16]=e("h4",{class:"font-medium text-gray-900 mb-3"},"Waste Information",-1)),e("div",jc,[e("div",Pc,[x.value.image_url?(d(),c("img",{key:0,src:S(Ce)(x.value.image_url),alt:x.value.title,class:"w-16 h-16 object-cover rounded-lg"},null,8,Ic)):(d(),Ae(S(ge),{key:1,class:"w-8 h-8 text-gray-400"}))]),e("div",Uc,[e("h5",Ac,s(x.value.title),1),e("p",Oc,s(x.value.description),1),e("div",qc,[e("span",Tc,"Category: "+s(((L=x.value.category)==null?void 0:L.name)||"Unknown"),1),e("span",Mc,"Condition: "+s(x.value.condition),1)])])])]),e("div",Fc,[e("div",Nc,[e("div",null,[C[17]||(C[17]=e("label",{class:"text-sm font-medium text-gray-500"},"Quantity",-1)),e("p",Dc,s(x.value.quantity)+" "+s(x.value.unit),1)]),e("div",null,[C[18]||(C[18]=e("label",{class:"text-sm font-medium text-gray-500"},"Vendor",-1)),e("p",Ec,s(((M=x.value.vendor)==null?void 0:M.full_name)||"Unknown Vendor"),1)])]),x.value.description?(d(),c("div",Vc,[C[19]||(C[19]=e("label",{class:"text-sm font-medium text-gray-500"},"Description",-1)),e("p",Bc,s(x.value.description),1)])):Q("",!0)])])])])])):Q("",!0)])}}}),Lc={class:"min-h-screen bg-gray-50"},Zc={class:"bg-white shadow-sm border-b border-gray-200"},Rc={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"},zc={class:"flex items-center justify-between"},Jc={class:"flex items-center space-x-4"},Hc={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},Gc={class:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8"},Qc={class:"card"},Kc={class:"card-body"},Xc={class:"flex items-center"},Yc={class:"flex-shrink-0"},eu={class:"w-8 h-8 bg-warning-100 rounded-lg flex items-center justify-center"},tu={class:"ml-4"},su={class:"text-2xl font-semibold text-gray-900"},au={class:"card"},ou={class:"card-body"},ru={class:"flex items-center"},iu={class:"flex-shrink-0"},lu={class:"w-8 h-8 bg-primary-100 rounded-lg flex items-center justify-center"},nu={class:"ml-4"},du={class:"text-2xl font-semibold text-gray-900"},cu={class:"card"},uu={class:"card-body"},mu={class:"flex items-center"},pu={class:"flex-shrink-0"},vu={class:"w-8 h-8 bg-success-100 rounded-lg flex items-center justify-center"},gu={class:"ml-4"},xu={class:"text-2xl font-semibold text-gray-900"},yu={class:"card"},_u={class:"card-body"},fu={class:"flex items-center"},hu={class:"flex-shrink-0"},bu={class:"w-8 h-8 bg-danger-100 rounded-lg flex items-center justify-center"},wu={class:"ml-4"},$u={class:"text-2xl font-semibold text-gray-900"},Su={class:"card"},ku={class:"card-header"},Cu={class:"text-lg font-semibold text-gray-900"},ju={class:"overflow-x-auto"},Pu={class:"min-w-full divide-y divide-gray-200"},Iu={class:"bg-white divide-y divide-gray-200"},Uu={class:"px-6 py-4 whitespace-nowrap"},Au={class:"text-sm font-medium text-gray-900"},Ou={class:"text-sm text-gray-500"},qu={class:"px-6 py-4 whitespace-nowrap"},Tu={class:"text-sm font-medium text-gray-900"},Mu={class:"text-sm text-gray-500"},Fu={class:"px-6 py-4 whitespace-nowrap"},Nu={class:"flex items-center"},Du={class:"flex-shrink-0 h-10 w-10"},Eu={class:"h-10 w-10 bg-gray-100 rounded flex items-center justify-center overflow-hidden"},Vu=["src","alt","onError"],Bu={key:1,class:"h-10 w-10 bg-gray-200 rounded flex items-center justify-center"},Wu={class:"ml-4"},Lu={class:"text-sm font-medium text-gray-900"},Zu={class:"text-sm text-gray-500"},Ru={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},zu={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Ju={class:"px-6 py-4 whitespace-nowrap"},Hu={class:"px-6 py-4 whitespace-nowrap"},Gu={class:"flex flex-col space-y-1"},Qu={class:"text-xs text-gray-500"},Ku={class:"px-6 py-4 whitespace-nowrap"},Xu={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Yu={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},e0={class:"flex items-center space-x-2"},t0=["onClick"],s0=["onClick"],a0=["onClick"],o0=["onClick"],r0=["onClick"],i0={class:"card-footer"},l0={class:"flex items-center justify-between"},n0={class:"text-sm text-gray-700"},d0={class:"flex items-center space-x-2"},c0=["disabled"],u0={class:"text-sm text-gray-700"},m0=["disabled"],p0={key:0,class:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50"},v0={class:"relative top-20 mx-auto p-5 border w-full max-w-2xl shadow-lg rounded-md bg-white"},g0={class:"mt-3"},x0={class:"flex items-center justify-between mb-4"},y0={class:"space-y-6"},_0={class:"grid grid-cols-2 gap-4"},f0={class:"text-sm text-gray-900"},h0={class:"text-sm text-gray-900"},b0={class:"text-sm text-gray-900"},w0={class:"border-t pt-4"},$0={class:"grid grid-cols-2 gap-4"},S0={class:"text-sm text-gray-900"},k0={class:"text-sm text-gray-900"},C0={class:"text-sm text-gray-900"},j0={class:"text-sm text-gray-900"},P0={class:"border-t pt-4"},I0={class:"flex items-center space-x-4"},U0={class:"w-16 h-16 bg-gray-100 rounded-lg flex items-center justify-center overflow-hidden"},A0=["src","alt"],O0={key:1,class:"w-16 h-16 bg-gray-200 rounded-lg flex items-center justify-center"},q0={class:"flex-1"},T0={class:"font-medium text-gray-900"},M0={class:"text-sm text-gray-500"},F0={class:"flex items-center space-x-4 mt-2"},N0={class:"text-sm text-gray-500"},D0={class:"text-sm text-gray-500"},E0={class:"border-t pt-4"},V0={class:"space-y-2"},B0={class:"flex justify-between text-sm"},W0={class:"text-gray-900"},L0={class:"flex justify-between text-sm font-medium border-t pt-2"},Z0={class:"text-gray-900"},R0={class:"border-t pt-4"},z0={class:"mb-4"},J0={class:"flex items-center space-x-2"},H0={key:0,class:"mt-1 text-xs text-gray-500"},G0={key:0},Q0={class:"mb-4"},K0={class:"flex items-center space-x-2"},X0={key:0,class:"mt-1 text-xs text-gray-500"},Y0={key:1,class:"mt-1 text-xs text-gray-500"},em={class:"mb-4"},tm={class:"flex items-center space-x-2"},sm={key:0,class:"border-t pt-4"},am={class:"text-sm text-gray-900"},om=xe({__name:"OrderManagementView",setup(o){const a=he(),t=Ie(),l=O(""),y=O(1),p=O(10),n=O(null),x=O({pending:0,processing:0,delivered:0,revenue:0}),W=O({}),B=ie(()=>t.orders),F=ie(()=>{let w=B.value;return l.value&&(w=w.filter(i=>i.status===l.value)),w.sort((i,A)=>new Date(A.order_date).getTime()-new Date(i.order_date).getTime())}),h=ie(()=>{const w=(y.value-1)*p.value,i=w+p.value;return F.value.slice(w,i)}),_=ie(()=>Math.ceil(F.value.length/p.value)),D=async()=>{try{await t.loadOrders(),g()}catch(w){console.error("Failed to load orders:",w)}},g=()=>{const w=B.value;x.value={pending:w.filter(i=>i.status==="pending").length,processing:w.filter(i=>i.status==="processing").length,delivered:w.filter(i=>i.status==="delivered").length,revenue:w.reduce((i,A)=>i+A.total_price,0)}},T=async(w,i)=>{try{await t.updateOrderStatus(w,i),a.success(`Order status updated to ${i}`),g()}catch{a.error("Failed to update order status")}},N=async(w,i)=>{try{await t.updateOrderPaymentStatus(w,i),a.success(`Payment status updated to ${i}`),g()}catch{a.error("Failed to update payment status")}},v=async(w,i)=>{try{await t.updateOrderDeliveryStatus(w,i),a.success(`Delivery status updated to ${i.replace("_"," ")}`),g()}catch{a.error("Failed to update delivery status")}},m=w=>{n.value=w},b=w=>{W.value[w]=!0},C=w=>({pending:"badge-warning",confirmed:"badge-primary",processing:"badge-primary",shipped:"badge-primary",delivered:"badge-success",cancelled:"badge-danger"})[w]||"badge-gray",L=w=>({pending:"badge-warning",paid:"badge-success",failed:"badge-danger",refunded:"badge-info"})[w]||"badge-gray",M=w=>({pending:"badge-warning",assigned:"badge-info",picked_up:"badge-primary",in_transit:"badge-secondary",delivered:"badge-success",failed:"badge-danger"})[w]||"badge-gray",r=w=>new Date(w).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return _e(()=>{D()}),(w,i)=>{var A,f,E,Z,R,te,pe,ee,U,le,Y,H;return d(),c("div",Lc,[e("div",Zc,[e("div",Rc,[e("div",zc,[i[12]||(i[12]=e("div",null,[e("h1",{class:"text-2xl font-bold text-gray-900"},"Order Management"),e("p",{class:"text-gray-600 mt-1"},"Manage customer orders and fulfillment")],-1)),e("div",Jc,[J(e("select",{"onUpdate:modelValue":i[0]||(i[0]=q=>l.value=q),class:"form-input"},[...i[11]||(i[11]=[me('<option value="">All Status</option><option value="pending">Pending</option><option value="confirmed">Confirmed</option><option value="processing">Processing</option><option value="shipped">Shipped</option><option value="delivered">Delivered</option><option value="cancelled">Cancelled</option>',7)])],512),[[ue,l.value]])])])])]),e("div",Hc,[e("div",Gc,[e("div",Qc,[e("div",Kc,[e("div",Xc,[e("div",Yc,[e("div",eu,[$(S(Ne),{class:"w-5 h-5 text-warning-600"})])]),e("div",tu,[i[13]||(i[13]=e("p",{class:"text-sm font-medium text-gray-500"},"Pending",-1)),e("p",su,s(x.value.pending),1)])])])]),e("div",au,[e("div",ou,[e("div",ru,[e("div",iu,[e("div",lu,[$(S(Ke),{class:"w-5 h-5 text-primary-600"})])]),e("div",nu,[i[14]||(i[14]=e("p",{class:"text-sm font-medium text-gray-500"},"Processing",-1)),e("p",du,s(x.value.processing),1)])])])]),e("div",cu,[e("div",uu,[e("div",mu,[e("div",pu,[e("div",vu,[$(S(Se),{class:"w-5 h-5 text-success-600"})])]),e("div",gu,[i[15]||(i[15]=e("p",{class:"text-sm font-medium text-gray-500"},"Delivered",-1)),e("p",xu,s(x.value.delivered),1)])])])]),e("div",yu,[e("div",_u,[e("div",fu,[e("div",hu,[e("div",bu,[$(S(De),{class:"w-5 h-5 text-danger-600"})])]),e("div",wu,[i[16]||(i[16]=e("p",{class:"text-sm font-medium text-gray-500"},"Revenue",-1)),e("p",$u,"â‚±"+s(x.value.revenue.toLocaleString()),1)])])])])]),e("div",Su,[e("div",ku,[e("h3",Cu," Orders ("+s(F.value.length)+") ",1)]),e("div",ju,[e("table",Pu,[i[17]||(i[17]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Order "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Customer "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Product "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Quantity "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Amount "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Status "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Payment "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Delivery "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Date "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Actions ")])],-1)),e("tbody",Iu,[(d(!0),c(ne,null,de(h.value,q=>{var P,G,k,ye,u,I,j,X,z,K;return d(),c("tr",{key:q.id,class:"hover:bg-gray-50"},[e("td",Uu,[e("div",Au,"#"+s(q.id),1),e("div",Ou,"Qty: "+s(q.quantity),1)]),e("td",qu,[e("div",Tu,s((P=q.user)==null?void 0:P.full_name),1),e("div",Mu,s((G=q.user)==null?void 0:G.email),1)]),e("td",Fu,[e("div",Nu,[e("div",Du,[e("div",Eu,[(k=q.product)!=null&&k.image_url&&!W.value[q.id]?(d(),c("img",{key:0,src:(ye=q.product)==null?void 0:ye.image_url,alt:(u=q.product)==null?void 0:u.name,class:"h-10 w-10 object-cover rounded",onError:se=>b(q.id),loading:"lazy"},null,40,Vu)):(d(),c("div",Bu,[$(S(ge),{class:"w-5 h-5 text-gray-400"})]))])]),e("div",Wu,[e("div",Lu,s((I=q.product)==null?void 0:I.name),1),e("div",Zu,s((j=q.product)==null?void 0:j.category),1)])])]),e("td",Ru,s(q.quantity)+" "+s((X=q.product)==null?void 0:X.unit),1),e("td",zu," â‚±"+s(q.total_price.toLocaleString()),1),e("td",Ju,[e("span",{class:ae(C(q.status))},s(q.status),3)]),e("td",Hu,[e("div",Gu,[e("span",{class:ae(L(q.payment_status))},s(q.payment_status),3),e("span",Qu,s((z=q.payment_method)==null?void 0:z.toUpperCase()),1)])]),e("td",Ku,[e("span",{class:ae(M(q.delivery_status))},s((K=q.delivery_status)==null?void 0:K.replace("_"," ")),3)]),e("td",Xu,s(r(q.order_date)),1),e("td",Yu,[e("div",e0,[q.status==="pending"?(d(),c("button",{key:0,onClick:se=>T(q.id,"confirmed"),class:"text-success-600 hover:text-success-900"}," Confirm ",8,t0)):Q("",!0),q.status==="confirmed"?(d(),c("button",{key:1,onClick:se=>T(q.id,"processing"),class:"text-primary-600 hover:text-primary-900"}," Process ",8,s0)):Q("",!0),q.status==="processing"?(d(),c("button",{key:2,onClick:se=>T(q.id,"shipped"),class:"text-warning-600 hover:text-warning-900"}," Ship ",8,a0)):Q("",!0),q.status==="shipped"?(d(),c("button",{key:3,onClick:se=>T(q.id,"delivered"),class:"text-success-600 hover:text-success-900"}," Deliver ",8,o0)):Q("",!0),e("button",{onClick:se=>m(q),class:"text-gray-600 hover:text-gray-900"}," View ",8,r0)])])])}),128))])])]),e("div",i0,[e("div",l0,[e("div",n0," Showing "+s((y.value-1)*p.value+1)+" to "+s(Math.min(y.value*p.value,F.value.length))+" of "+s(F.value.length)+" results ",1),e("div",d0,[e("button",{onClick:i[1]||(i[1]=q=>y.value=Math.max(1,y.value-1)),disabled:y.value===1,class:"btn-outline disabled:opacity-50 disabled:cursor-not-allowed"}," Previous ",8,c0),e("span",u0," Page "+s(y.value)+" of "+s(_.value),1),e("button",{onClick:i[2]||(i[2]=q=>y.value=Math.min(_.value,y.value+1)),disabled:y.value===_.value,class:"btn-outline disabled:opacity-50 disabled:cursor-not-allowed"}," Next ",8,m0)])])])])]),n.value?(d(),c("div",p0,[e("div",v0,[e("div",g0,[e("div",x0,[i[18]||(i[18]=e("h3",{class:"text-lg font-medium text-gray-900"},"Order Details",-1)),e("button",{onClick:i[3]||(i[3]=q=>n.value=null),class:"text-gray-400 hover:text-gray-600"},[$(S(we),{class:"w-6 h-6"})])]),e("div",y0,[e("div",_0,[e("div",null,[i[19]||(i[19]=e("label",{class:"text-sm font-medium text-gray-500"},"Order Number",-1)),e("p",f0,"#"+s(n.value.id),1)]),e("div",null,[i[20]||(i[20]=e("label",{class:"text-sm font-medium text-gray-500"},"Status",-1)),e("span",{class:ae(C(n.value.status))},s(n.value.status),3)]),e("div",null,[i[21]||(i[21]=e("label",{class:"text-sm font-medium text-gray-500"},"Order Date",-1)),e("p",h0,s(r(n.value.order_date)),1)]),e("div",null,[i[22]||(i[22]=e("label",{class:"text-sm font-medium text-gray-500"},"Delivery Date",-1)),e("p",b0,s(n.value.delivery_date?r(n.value.delivery_date):"TBD"),1)])]),e("div",w0,[i[27]||(i[27]=e("h4",{class:"font-medium text-gray-900 mb-3"},"Customer Information",-1)),e("div",$0,[e("div",null,[i[23]||(i[23]=e("label",{class:"text-sm font-medium text-gray-500"},"Name",-1)),e("p",S0,s((A=n.value.user)==null?void 0:A.full_name),1)]),e("div",null,[i[24]||(i[24]=e("label",{class:"text-sm font-medium text-gray-500"},"Email",-1)),e("p",k0,s((f=n.value.user)==null?void 0:f.email),1)]),e("div",null,[i[25]||(i[25]=e("label",{class:"text-sm font-medium text-gray-500"},"Phone",-1)),e("p",C0,s(((E=n.value.user)==null?void 0:E.phone)||"N/A"),1)]),e("div",null,[i[26]||(i[26]=e("label",{class:"text-sm font-medium text-gray-500"},"Address",-1)),e("p",j0,s(((Z=n.value.user)==null?void 0:Z.address)||"N/A"),1)])])]),e("div",P0,[i[28]||(i[28]=e("h4",{class:"font-medium text-gray-900 mb-3"},"Product Information",-1)),e("div",I0,[e("div",U0,[(R=n.value.product)!=null&&R.image_url&&!W.value[n.value.id]?(d(),c("img",{key:0,src:(te=n.value.product)==null?void 0:te.image_url,alt:(pe=n.value.product)==null?void 0:pe.name,class:"w-16 h-16 object-cover rounded-lg",onError:i[4]||(i[4]=q=>b(n.value.id))},null,40,A0)):(d(),c("div",O0,[$(S(ge),{class:"w-8 h-8 text-gray-400"})]))]),e("div",q0,[e("h5",T0,s((ee=n.value.product)==null?void 0:ee.name),1),e("p",M0,s((U=n.value.product)==null?void 0:U.description),1),e("div",F0,[e("span",N0,"Quantity: "+s(n.value.quantity),1),e("span",D0,"Unit Price: â‚±"+s((le=n.value.product)==null?void 0:le.price),1)])])])]),e("div",E0,[i[32]||(i[32]=e("h4",{class:"font-medium text-gray-900 mb-3"},"Order Summary",-1)),e("div",V0,[e("div",B0,[i[29]||(i[29]=e("span",{class:"text-gray-500"},"Subtotal",-1)),e("span",W0,"â‚±"+s((((Y=n.value.product)==null?void 0:Y.price)||0)*n.value.quantity),1)]),i[31]||(i[31]=e("div",{class:"flex justify-between text-sm"},[e("span",{class:"text-gray-500"},"Shipping"),e("span",{class:"text-gray-900"},"â‚±0")],-1)),e("div",L0,[i[30]||(i[30]=e("span",{class:"text-gray-900"},"Total",-1)),e("span",Z0,"â‚±"+s(n.value.total_price.toLocaleString()),1)])])]),e("div",R0,[i[39]||(i[39]=e("h4",{class:"font-medium text-gray-900 mb-4"},"Status Management",-1)),e("div",z0,[i[34]||(i[34]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Payment Status",-1)),e("div",J0,[e("span",{class:ae([L(n.value.payment_status),"mr-2"])},s(n.value.payment_status),3),J(e("select",{"onUpdate:modelValue":i[5]||(i[5]=q=>n.value.payment_status=q),onChange:i[6]||(i[6]=q=>N(n.value.id,n.value.payment_status)),class:"form-input text-sm"},[...i[33]||(i[33]=[e("option",{value:"pending"},"Pending",-1),e("option",{value:"paid"},"Paid",-1),e("option",{value:"failed"},"Failed",-1),e("option",{value:"refunded"},"Refunded",-1)])],544),[[ue,n.value.payment_status]])]),n.value.payment_method?(d(),c("div",H0,[re(" Method: "+s(n.value.payment_method.toUpperCase())+" ",1),n.value.payment_reference?(d(),c("span",G0," - "+s(n.value.payment_reference),1)):Q("",!0)])):Q("",!0)]),e("div",Q0,[i[36]||(i[36]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Delivery Status",-1)),e("div",K0,[e("span",{class:ae([M(n.value.delivery_status),"mr-2"])},s((H=n.value.delivery_status)==null?void 0:H.replace("_"," ")),3),J(e("select",{"onUpdate:modelValue":i[7]||(i[7]=q=>n.value.delivery_status=q),onChange:i[8]||(i[8]=q=>v(n.value.id,n.value.delivery_status)),class:"form-input text-sm"},[...i[35]||(i[35]=[me('<option value="pending">Pending</option><option value="assigned">Assigned</option><option value="picked_up">Picked Up</option><option value="in_transit">In Transit</option><option value="delivered">Delivered</option><option value="failed">Failed</option>',6)])],544),[[ue,n.value.delivery_status]])]),n.value.delivery_address?(d(),c("div",X0," Address: "+s(n.value.delivery_address),1)):Q("",!0),n.value.delivery_notes?(d(),c("div",Y0," Notes: "+s(n.value.delivery_notes),1)):Q("",!0)]),e("div",em,[i[38]||(i[38]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Order Status",-1)),e("div",tm,[e("span",{class:ae([C(n.value.status),"mr-2"])},s(n.value.status),3),J(e("select",{"onUpdate:modelValue":i[9]||(i[9]=q=>n.value.status=q),onChange:i[10]||(i[10]=q=>T(n.value.id,n.value.status)),class:"form-input text-sm"},[...i[37]||(i[37]=[me('<option value="pending">Pending</option><option value="confirmed">Confirmed</option><option value="processing">Processing</option><option value="shipped">Shipped</option><option value="delivered">Delivered</option><option value="cancelled">Cancelled</option>',6)])],544),[[ue,n.value.status]])])])]),n.value.notes?(d(),c("div",sm,[i[40]||(i[40]=e("h4",{class:"font-medium text-gray-900 mb-2"},"Notes",-1)),e("p",am,s(n.value.notes),1)])):Q("",!0)])])])])):Q("",!0)])}}}),rm={class:"min-h-screen bg-gray-50"},im={class:"bg-white shadow-sm border-b border-gray-200"},lm={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"},nm={class:"flex items-center justify-between"},dm={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},cm={class:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8"},um={class:"card"},mm={class:"card-body"},pm={class:"flex items-center"},vm={class:"flex-shrink-0"},gm={class:"w-8 h-8 bg-primary-100 rounded-lg flex items-center justify-center"},xm={class:"ml-4"},ym={class:"text-2xl font-semibold text-gray-900"},_m={class:"card"},fm={class:"card-body"},hm={class:"flex items-center"},bm={class:"flex-shrink-0"},wm={class:"w-8 h-8 bg-success-100 rounded-lg flex items-center justify-center"},$m={class:"ml-4"},Sm={class:"text-2xl font-semibold text-gray-900"},km={class:"card"},Cm={class:"card-body"},jm={class:"flex items-center"},Pm={class:"flex-shrink-0"},Im={class:"w-8 h-8 bg-warning-100 rounded-lg flex items-center justify-center"},Um={class:"ml-4"},Am={class:"text-2xl font-semibold text-gray-900"},Om={class:"card"},qm={class:"card-body"},Tm={class:"flex items-center"},Mm={class:"flex-shrink-0"},Fm={class:"w-8 h-8 bg-info-100 rounded-lg flex items-center justify-center"},Nm={class:"ml-4"},Dm={class:"text-2xl font-semibold text-gray-900"},Em={class:"card"},Vm={class:"card-header"},Bm={class:"flex items-center justify-between"},Wm={class:"text-lg font-semibold text-gray-900"},Lm={class:"flex items-center space-x-4"},Zm=["value"],Rm={class:"relative"},zm={class:"overflow-x-auto"},Jm={class:"min-w-full divide-y divide-gray-200"},Hm={class:"bg-white divide-y divide-gray-200"},Gm={class:"px-6 py-4 whitespace-nowrap"},Qm={class:"flex items-center"},Km={class:"flex-shrink-0 h-10 w-10"},Xm={class:"h-10 w-10 bg-gray-100 rounded flex items-center justify-center overflow-hidden"},Ym=["src","alt","onError"],ep={key:1,class:"h-10 w-10 bg-gray-200 rounded flex items-center justify-center"},tp={class:"ml-4"},sp={class:"text-sm font-medium text-gray-900"},ap={class:"text-sm text-gray-500"},op={class:"px-6 py-4 whitespace-nowrap"},rp={class:"badge-primary"},ip={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},lp={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},np={class:"px-6 py-4 whitespace-nowrap"},dp={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},cp={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},up={class:"flex items-center space-x-2"},mp=["onClick"],pp=["onClick"],vp=["onClick"],gp={class:"card-footer"},xp={class:"flex items-center justify-between"},yp={class:"text-sm text-gray-700"},_p={class:"flex items-center space-x-2"},fp=["disabled"],hp={class:"text-sm text-gray-700"},bp=["disabled"],wp={key:0,class:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50"},$p={class:"relative top-20 mx-auto p-5 border w-full max-w-2xl shadow-lg rounded-md bg-white"},Sp={class:"mt-3"},kp={class:"flex items-center justify-between mb-4"},Cp={class:"text-lg font-medium text-gray-900"},jp={class:"form-group"},Pp={class:"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-gray-300 border-dashed rounded-md"},Ip={class:"space-y-1 text-center"},Up={class:"flex text-sm text-gray-600"},Ap={for:"file-upload",class:"relative cursor-pointer bg-white rounded-md font-medium text-primary-600 hover:text-primary-500 focus-within:outline-none focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-primary-500"},Op={key:0,class:"mt-2"},qp=["src"],Tp={class:"text-sm text-gray-500 mt-1"},Mp={class:"form-group"},Fp={class:"form-group"},Np={class:"grid grid-cols-2 gap-4"},Dp={class:"form-group"},Ep=["value"],Vp={class:"form-group"},Bp={class:"grid grid-cols-2 gap-4"},Wp={class:"form-group"},Lp={class:"form-group"},Zp={class:"form-group"},Rp={class:"flex items-center"},zp={class:"flex items-center justify-end space-x-3"},Jp={type:"submit",class:"btn-primary"},Hp=xe({__name:"ProductManagementView",setup(o){const a=he(),t=Ie(),l=je(),y=O(""),p=O(""),n=O(1),x=O(10),W=O(!1),B=O(null),F=O({name:"",description:"",price:0,category:"",image_url:"",image_file:null,image_preview:"",stock_quantity:0,unit:"",is_available:!0}),h=O({totalProducts:0,available:0,lowStock:0,totalValue:0}),_=O({}),D=ie(()=>{let A=t.products;return y.value&&(A=A.filter(f=>f.name.toLowerCase().includes(y.value.toLowerCase())||f.description.toLowerCase().includes(y.value.toLowerCase()))),p.value&&(A=A.filter(f=>f.category===p.value)),A.sort((f,E)=>new Date(E.created_at).getTime()-new Date(f.created_at).getTime())}),g=ie(()=>{const A=(n.value-1)*x.value,f=A+x.value;return D.value.slice(A,f)}),T=ie(()=>Math.ceil(D.value.length/x.value)),N=async()=>{try{await t.loadProducts(),await l.loadProductCategories(),v()}catch(A){console.error("Failed to load products:",A)}},v=()=>{const A=t.products;h.value={totalProducts:A.length,available:A.filter(f=>f.is_available).length,lowStock:A.filter(f=>f.stock_quantity<10).length,totalValue:A.reduce((f,E)=>f+E.price*E.stock_quantity,0)}},m=A=>{B.value=A,F.value={name:A.name,description:A.description,price:A.price,category:A.category,image_url:A.image_url||"",image_file:null,image_preview:A.image_url||"",stock_quantity:A.stock_quantity,unit:A.unit,is_available:A.is_available},W.value=!0},b=A=>{var Z;const E=(Z=A.target.files)==null?void 0:Z[0];E&&(F.value.image_file=E,F.value.image_preview=URL.createObjectURL(E),F.value.image_url=URL.createObjectURL(E))},C=async()=>{var A;try{const f={name:F.value.name,description:F.value.description,price:F.value.price,category:F.value.category,image_url:F.value.image_url,stock_quantity:F.value.stock_quantity,unit:F.value.unit,is_available:F.value.is_available};F.value.image_file||(!F.value.image_url||F.value.image_url.startsWith("blob:"))&&(f.image_url=((A=B.value)==null?void 0:A.image_url)||""),B.value?(await t.updateProduct(String(B.value.id),f,F.value.image_file||void 0),a.success("Product updated successfully")):(await t.addProduct(f,F.value.image_file||void 0),a.success("Product added successfully")),r(),await N()}catch{a.error("Failed to save product")}},L=async A=>{try{await t.updateProduct(String(A.id),{is_available:!A.is_available}),a.success(`Product ${A.is_available?"disabled":"enabled"} successfully`),await N()}catch{a.error("Failed to update product status")}},M=async A=>{if(confirm("Are you sure you want to delete this product?"))try{await t.deleteProduct(String(A)),a.success("Product deleted successfully"),await N()}catch{a.error("Failed to delete product")}},r=()=>{W.value=!1,B.value=null,F.value={name:"",description:"",price:0,category:"",image_url:"",image_file:null,image_preview:"",stock_quantity:0,unit:"",is_available:!0}},w=A=>{_.value[A]=!0},i=A=>new Date(A).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});return _e(()=>{N()}),(A,f)=>(d(),c("div",rm,[e("div",im,[e("div",lm,[e("div",nm,[f[13]||(f[13]=e("div",null,[e("h1",{class:"text-2xl font-bold text-gray-900"},"Product Management"),e("p",{class:"text-gray-600 mt-1"},"Manage repurposed products and inventory")],-1)),e("button",{onClick:f[0]||(f[0]=E=>W.value=!0),class:"btn-primary"},[$(S(qe),{class:"w-5 h-5 mr-2"}),f[12]||(f[12]=re(" Add New Product ",-1))])])])]),e("div",dm,[e("div",cm,[e("div",um,[e("div",mm,[e("div",pm,[e("div",vm,[e("div",gm,[$(S(ge),{class:"w-5 h-5 text-primary-600"})])]),e("div",xm,[f[14]||(f[14]=e("p",{class:"text-sm font-medium text-gray-500"},"Total Products",-1)),e("p",ym,s(h.value.totalProducts),1)])])])]),e("div",_m,[e("div",fm,[e("div",hm,[e("div",bm,[e("div",wm,[$(S(Se),{class:"w-5 h-5 text-success-600"})])]),e("div",$m,[f[15]||(f[15]=e("p",{class:"text-sm font-medium text-gray-500"},"Available",-1)),e("p",Sm,s(h.value.available),1)])])])]),e("div",km,[e("div",Cm,[e("div",jm,[e("div",Pm,[e("div",Im,[$(S(gs),{class:"w-5 h-5 text-warning-600"})])]),e("div",Um,[f[16]||(f[16]=e("p",{class:"text-sm font-medium text-gray-500"},"Low Stock",-1)),e("p",Am,s(h.value.lowStock),1)])])])]),e("div",Om,[e("div",qm,[e("div",Tm,[e("div",Mm,[e("div",Fm,[$(S(De),{class:"w-5 h-5 text-info-600"})])]),e("div",Nm,[f[17]||(f[17]=e("p",{class:"text-sm font-medium text-gray-500"},"Total Value",-1)),e("p",Dm,"â‚±"+s(h.value.totalValue.toLocaleString()),1)])])])])]),e("div",Em,[e("div",Vm,[e("div",Bm,[e("h3",Wm," Products ("+s(D.value.length)+") ",1),e("div",Lm,[J(e("select",{"onUpdate:modelValue":f[1]||(f[1]=E=>p.value=E),class:"form-input"},[f[18]||(f[18]=e("option",{value:""},"All Categories",-1)),(d(!0),c(ne,null,de(S(l).productCategories,E=>(d(),c("option",{key:E.id,value:E.id},s(E.name),9,Zm))),128))],512),[[ue,p.value]]),e("div",Rm,[J(e("input",{"onUpdate:modelValue":f[2]||(f[2]=E=>y.value=E),type:"text",placeholder:"Search products...",class:"form-input pl-10"},null,512),[[oe,y.value]]),$(S(Et),{class:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"})])])])]),e("div",zm,[e("table",Jm,[f[19]||(f[19]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Product "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Category "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Price "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Stock "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Status "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Created "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Actions ")])],-1)),e("tbody",Hm,[(d(!0),c(ne,null,de(g.value,E=>(d(),c("tr",{key:E.id,class:"hover:bg-gray-50"},[e("td",Gm,[e("div",Qm,[e("div",Km,[e("div",Xm,[E.image_url&&!_.value[E.id]?(d(),c("img",{key:0,src:S(Ce)(E.image_url),alt:E.name,class:"h-10 w-10 object-cover rounded",onError:Z=>w(E.id),loading:"lazy"},null,40,Ym)):(d(),c("div",ep,[$(S(ge),{class:"w-5 h-5 text-gray-400"})]))])]),e("div",tp,[e("div",sp,s(E.name),1),e("div",ap,s(E.description),1)])])]),e("td",op,[e("span",rp,s(E.category),1)]),e("td",ip," â‚±"+s(E.price.toLocaleString()),1),e("td",lp,s(E.stock_quantity)+" "+s(E.unit),1),e("td",np,[e("span",{class:ae(E.is_available?"badge-success":"badge-danger")},s(E.is_available?"Available":"Out of Stock"),3)]),e("td",dp,s(i(E.created_at)),1),e("td",cp,[e("div",up,[e("button",{onClick:Z=>m(E),class:"text-primary-600 hover:text-primary-900"}," Edit ",8,mp),e("button",{onClick:Z=>L(E),class:ae(E.is_available?"text-warning-600 hover:text-warning-900":"text-success-600 hover:text-success-900")},s(E.is_available?"Disable":"Enable"),11,pp),e("button",{onClick:Z=>M(E.id),class:"text-danger-600 hover:text-danger-900"}," Delete ",8,vp)])])]))),128))])])]),e("div",gp,[e("div",xp,[e("div",yp," Showing "+s((n.value-1)*x.value+1)+" to "+s(Math.min(n.value*x.value,D.value.length))+" of "+s(D.value.length)+" results ",1),e("div",_p,[e("button",{onClick:f[3]||(f[3]=E=>n.value=Math.max(1,n.value-1)),disabled:n.value===1,class:"btn-outline disabled:opacity-50 disabled:cursor-not-allowed"}," Previous ",8,fp),e("span",hp," Page "+s(n.value)+" of "+s(T.value),1),e("button",{onClick:f[4]||(f[4]=E=>n.value=Math.min(T.value,n.value+1)),disabled:n.value===T.value,class:"btn-outline disabled:opacity-50 disabled:cursor-not-allowed"}," Next ",8,bp)])])])])]),W.value?(d(),c("div",wp,[e("div",$p,[e("div",Sp,[e("div",kp,[e("h3",Cp,s(B.value?"Edit Product":"Add New Product"),1),e("button",{onClick:r,class:"text-gray-400 hover:text-gray-600"},[$(S(we),{class:"w-6 h-6"})])]),e("form",{onSubmit:Pe(C,["prevent"]),class:"space-y-6"},[e("div",jp,[f[24]||(f[24]=e("label",{class:"form-label"},"Product Image",-1)),e("div",Pp,[e("div",Ip,[f[22]||(f[22]=e("svg",{class:"mx-auto h-12 w-12 text-gray-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48"},[e("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)),e("div",Up,[e("label",Ap,[f[20]||(f[20]=e("span",null,"Upload a file",-1)),e("input",{id:"file-upload",name:"file-upload",type:"file",class:"sr-only",accept:"image/*",onChange:b},null,32)]),f[21]||(f[21]=e("p",{class:"pl-1"},"or drag and drop",-1))]),f[23]||(f[23]=e("p",{class:"text-xs text-gray-500"},"PNG, JPG, GIF up to 10MB",-1))])]),F.value.image_file?(d(),c("div",Op,[e("img",{src:F.value.image_preview,alt:"Preview",class:"h-20 w-20 object-cover rounded"},null,8,qp),e("p",Tp,s(F.value.image_file.name),1)])):Q("",!0)]),e("div",Mp,[f[25]||(f[25]=e("label",{class:"form-label"},"Product Name",-1)),J(e("input",{"onUpdate:modelValue":f[5]||(f[5]=E=>F.value.name=E),type:"text",class:"form-input",placeholder:"Enter product name",required:""},null,512),[[oe,F.value.name]])]),e("div",Fp,[f[26]||(f[26]=e("label",{class:"form-label"},"Description",-1)),J(e("textarea",{"onUpdate:modelValue":f[6]||(f[6]=E=>F.value.description=E),rows:"3",class:"form-input",placeholder:"Enter product description",required:""},null,512),[[oe,F.value.description]])]),e("div",Np,[e("div",Dp,[f[28]||(f[28]=e("label",{class:"form-label"},"Category",-1)),J(e("select",{"onUpdate:modelValue":f[7]||(f[7]=E=>F.value.category=E),class:"form-input",required:""},[f[27]||(f[27]=e("option",{value:""},"Select Category",-1)),(d(!0),c(ne,null,de(S(l).productCategories,E=>(d(),c("option",{key:E.id,value:E.id},s(E.name),9,Ep))),128))],512),[[ue,F.value.category]])]),e("div",Vp,[f[29]||(f[29]=e("label",{class:"form-label"},"Price (â‚±)",-1)),J(e("input",{"onUpdate:modelValue":f[8]||(f[8]=E=>F.value.price=E),type:"number",min:"0",step:"0.01",class:"form-input",placeholder:"0.00",required:""},null,512),[[oe,F.value.price,void 0,{number:!0}]])])]),e("div",Bp,[e("div",Wp,[f[30]||(f[30]=e("label",{class:"form-label"},"Stock Quantity",-1)),J(e("input",{"onUpdate:modelValue":f[9]||(f[9]=E=>F.value.stock_quantity=E),type:"number",min:"0",class:"form-input",placeholder:"0",required:""},null,512),[[oe,F.value.stock_quantity,void 0,{number:!0}]])]),e("div",Lp,[f[32]||(f[32]=e("label",{class:"form-label"},"Unit",-1)),J(e("select",{"onUpdate:modelValue":f[10]||(f[10]=E=>F.value.unit=E),class:"form-input",required:""},[...f[31]||(f[31]=[me('<option value="">Select Unit</option><option value="kg">Kilograms</option><option value="pieces">Pieces</option><option value="bags">Bags</option><option value="bottles">Bottles</option><option value="jars">Jars</option><option value="boxes">Boxes</option>',7)])],512),[[ue,F.value.unit]])])]),e("div",Zp,[e("label",Rp,[J(e("input",{"onUpdate:modelValue":f[11]||(f[11]=E=>F.value.is_available=E),type:"checkbox",class:"rounded border-gray-300 text-primary-600 shadow-sm focus:border-primary-300 focus:ring focus:ring-primary-200 focus:ring-opacity-50"},null,512),[[ze,F.value.is_available]]),f[33]||(f[33]=e("span",{class:"ml-2 text-sm text-gray-700"},"Product is available for purchase",-1))])]),e("div",zp,[e("button",{type:"button",onClick:r,class:"btn-outline"}," Cancel "),e("button",Jp,s(B.value?"Update Product":"Add Product"),1)])],32)])])])):Q("",!0)]))}}),Gp={class:"min-h-screen bg-gray-50"},Qp={class:"bg-white shadow-sm border-b border-gray-200"},Kp={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"},Xp={class:"flex items-center justify-between"},Yp={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},ev={class:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8"},tv={class:"card"},sv={class:"card-body"},av={class:"flex items-center"},ov={class:"flex-shrink-0"},rv={class:"w-8 h-8 bg-primary-100 rounded-lg flex items-center justify-center"},iv={class:"ml-4"},lv={class:"text-2xl font-semibold text-gray-900"},nv={class:"card"},dv={class:"card-body"},cv={class:"flex items-center"},uv={class:"flex-shrink-0"},mv={class:"w-8 h-8 bg-success-100 rounded-lg flex items-center justify-center"},pv={class:"ml-4"},vv={class:"text-2xl font-semibold text-gray-900"},gv={class:"card"},xv={class:"card-body"},yv={class:"flex items-center"},_v={class:"flex-shrink-0"},fv={class:"w-8 h-8 bg-info-100 rounded-lg flex items-center justify-center"},hv={class:"ml-4"},bv={class:"text-2xl font-semibold text-gray-900"},wv={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},$v={class:"card-body"},Sv={class:"flex items-center justify-between mb-4"},kv={class:"flex items-center space-x-3"},Cv={class:"w-10 h-10 rounded-lg flex items-center justify-center bg-primary-100"},jv={class:"text-lg font-semibold text-gray-900"},Pv={class:"text-sm text-gray-500"},Iv={class:"flex items-center space-x-2"},Uv=["onClick"],Av=["onClick"],Ov={class:"flex items-center justify-between"},qv={class:"text-xs text-gray-500"},Tv={key:0,class:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50"},Mv={class:"relative top-20 mx-auto p-5 border w-full max-w-md shadow-lg rounded-md bg-white"},Fv={class:"mt-3"},Nv={class:"flex items-center justify-between mb-4"},Dv={class:"text-lg font-medium text-gray-900"},Ev={class:"form-group"},Vv={class:"form-group"},Bv={class:"flex items-center justify-end space-x-3"},Wv={type:"submit",class:"btn-primary"},Lv=xe({__name:"CategoryManagementView",setup(o){const a=he(),t=je(),l=Ie(),y=O(!1),p=O(null),n=O({name:"",description:""}),x=O({totalCategories:0,activeCategories:0,productsUsing:0}),W=ie(()=>t.productCategories),B=async()=>{try{await t.loadProductCategories(),await l.loadProducts(),F()}catch(N){console.error("Failed to load categories:",N)}},F=()=>{const N=W.value,v=l.products;x.value={totalCategories:N.length,activeCategories:N.length,productsUsing:v.length}},h=N=>{p.value=N,n.value={name:N.name,description:N.description},y.value=!0},_=async()=>{try{p.value?(await t.updateProductCategory(p.value.id,n.value),a.success("Category updated successfully")):(await t.createProductCategory(n.value),a.success("Category created successfully")),T(),B()}catch{a.error("Failed to save category")}},D=async N=>{if(confirm("Are you sure you want to delete this category?"))try{await t.deleteProductCategory(N),a.success("Category deleted successfully"),B()}catch{a.error("Failed to delete category")}},g=N=>l.products.filter(v=>v.category===N).length,T=()=>{y.value=!1,p.value=null,n.value={name:"",description:""}};return _e(()=>{B()}),(N,v)=>(d(),c("div",Gp,[e("div",Qp,[e("div",Kp,[e("div",Xp,[v[4]||(v[4]=e("div",null,[e("h1",{class:"text-2xl font-bold text-gray-900"},"Product Category Management"),e("p",{class:"text-gray-600 mt-1"},"Manage product categories for inventory")],-1)),e("button",{onClick:v[0]||(v[0]=m=>y.value=!0),class:"btn-primary"},[$(S(qe),{class:"w-5 h-5 mr-2"}),v[3]||(v[3]=re(" Add New Category ",-1))])])])]),e("div",Yp,[e("div",ev,[e("div",tv,[e("div",sv,[e("div",av,[e("div",ov,[e("div",rv,[$(S(Ot),{class:"w-5 h-5 text-primary-600"})])]),e("div",iv,[v[5]||(v[5]=e("p",{class:"text-sm font-medium text-gray-500"},"Total Categories",-1)),e("p",lv,s(x.value.totalCategories),1)])])])]),e("div",nv,[e("div",dv,[e("div",cv,[e("div",uv,[e("div",mv,[$(S(Se),{class:"w-5 h-5 text-success-600"})])]),e("div",pv,[v[6]||(v[6]=e("p",{class:"text-sm font-medium text-gray-500"},"Active",-1)),e("p",vv,s(x.value.activeCategories),1)])])])]),e("div",gv,[e("div",xv,[e("div",yv,[e("div",_v,[e("div",fv,[$(S(We),{class:"w-5 h-5 text-info-600"})])]),e("div",hv,[v[7]||(v[7]=e("p",{class:"text-sm font-medium text-gray-500"},"Products Using",-1)),e("p",bv,s(x.value.productsUsing),1)])])])])]),e("div",wv,[(d(!0),c(ne,null,de(W.value,m=>(d(),c("div",{key:m.id,class:"card hover:shadow-lg transition-shadow duration-200"},[e("div",$v,[e("div",Sv,[e("div",kv,[e("div",Cv,[$(S(Ot),{class:"w-6 h-6 text-primary-600"})]),e("div",null,[e("h3",jv,s(m.name),1),e("p",Pv,s(m.description),1)])]),e("div",Iv,[e("button",{onClick:b=>h(m),class:"text-primary-600 hover:text-primary-900"},[$(S(Vt),{class:"w-4 h-4"})],8,Uv),e("button",{onClick:b=>D(m.id),class:"text-danger-600 hover:text-danger-900"},[$(S(Wt),{class:"w-4 h-4"})],8,Av)])]),e("div",Ov,[v[8]||(v[8]=e("span",{class:"badge-success"},"Active",-1)),e("span",qv,s(g(m.id))+" products ",1)])])]))),128))])]),y.value?(d(),c("div",Tv,[e("div",Mv,[e("div",Fv,[e("div",Nv,[e("h3",Dv,s(p.value?"Edit Category":"Add New Category"),1),e("button",{onClick:T,class:"text-gray-400 hover:text-gray-600"},[$(S(we),{class:"w-6 h-6"})])]),e("form",{onSubmit:Pe(_,["prevent"]),class:"space-y-6"},[e("div",Ev,[v[9]||(v[9]=e("label",{class:"form-label"},"Category Name",-1)),J(e("input",{"onUpdate:modelValue":v[1]||(v[1]=m=>n.value.name=m),type:"text",class:"form-input",placeholder:"Enter category name",required:""},null,512),[[oe,n.value.name]])]),e("div",Vv,[v[10]||(v[10]=e("label",{class:"form-label"},"Description",-1)),J(e("textarea",{"onUpdate:modelValue":v[2]||(v[2]=m=>n.value.description=m),rows:"3",class:"form-input",placeholder:"Enter category description",required:""},null,512),[[oe,n.value.description]])]),e("div",Bv,[e("button",{type:"button",onClick:T,class:"btn-outline"}," Cancel "),e("button",Wv,s(p.value?"Update Category":"Add Category"),1)])],32)])])])):Q("",!0)]))}}),Zv={class:"min-h-screen bg-gray-50"},Rv={class:"bg-white shadow-sm border-b border-gray-200"},zv={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"},Jv={class:"flex items-center justify-between"},Hv={class:"flex items-center space-x-4"},Gv={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"},Qv={class:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8"},Kv={class:"bg-white rounded-lg shadow p-6"},Xv={class:"flex items-center"},Yv={class:"p-2 bg-blue-100 rounded-lg"},eg={class:"ml-4"},tg={class:"text-2xl font-bold text-gray-900"},sg={class:"bg-white rounded-lg shadow p-6"},ag={class:"flex items-center"},og={class:"p-2 bg-yellow-100 rounded-lg"},rg={class:"ml-4"},ig={class:"text-2xl font-bold text-gray-900"},lg={class:"bg-white rounded-lg shadow p-6"},ng={class:"flex items-center"},dg={class:"p-2 bg-green-100 rounded-lg"},cg={class:"ml-4"},ug={class:"text-2xl font-bold text-gray-900"},mg={class:"bg-white rounded-lg shadow p-6"},pg={class:"flex items-center"},vg={class:"p-2 bg-red-100 rounded-lg"},gg={class:"ml-4"},xg={class:"text-2xl font-bold text-gray-900"},yg={class:"bg-white rounded-lg shadow mb-6"},_g={class:"p-6"},fg={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},hg={class:"bg-white rounded-lg shadow overflow-hidden"},bg={class:"px-6 py-4 border-b border-gray-200"},wg={class:"text-lg font-medium text-gray-900"},$g={class:"overflow-x-auto"},Sg={class:"min-w-full divide-y divide-gray-200"},kg={class:"bg-white divide-y divide-gray-200"},Cg={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},jg={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Pg={class:"flex flex-col"},Ig={class:"font-medium"},Ug={class:"text-xs text-gray-500"},Ag={class:"text-xs text-gray-500"},Og={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},qg={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Tg={class:"px-6 py-4 whitespace-nowrap"},Mg={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Fg={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Ng={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},Dg=["onClick"],Eg={class:"bg-white px-4 py-3 flex items-center justify-between border-t border-gray-200 sm:px-6"},Vg={class:"flex-1 flex justify-between sm:hidden"},Bg=["disabled"],Wg=["disabled"],Lg={class:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between"},Zg={class:"text-sm text-gray-700"},Rg={class:"font-medium"},zg={class:"font-medium"},Jg={class:"font-medium"},Hg={class:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px"},Gg=["disabled"],Qg=["onClick"],Kg=["disabled"],Xg={key:0,class:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50"},Yg={class:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white"},e1={class:"mt-3"},t1={class:"flex items-center justify-between mb-4"},s1={class:"space-y-4"},a1=["value"],o1={class:"bg-gray-100 p-3 rounded-md"},r1={class:"text-sm"},i1={class:"font-medium text-gray-900"},l1={class:"text-gray-600"},n1={class:"text-gray-600"},d1=["value"],c1={class:"flex justify-end space-x-3 mt-6"},u1=["disabled"],m1={key:0},p1={key:1},Ze=10,v1=xe({__name:"DeliveryManagementView",setup(o){const a=Ie(),t=he(),l=O([]),y=O(!1),p=O(!1),n=O(null),x=O(""),W=O(""),B=O(""),F=O(1),h=O({status:"pending",delivery_person:"",delivery_vehicle:"",notes:""}),_=ie(()=>l.value.filter(w=>{var E;const i=!x.value||w.status===x.value,A=!W.value||((E=w.delivery_person)==null?void 0:E.toLowerCase().includes(W.value.toLowerCase())),f=!B.value||w.order_id.toLowerCase().includes(B.value.toLowerCase());return i&&A&&f})),D=ie(()=>{const w=(F.value-1)*Ze,i=w+Ze;return _.value.slice(w,i)}),g=ie(()=>Math.ceil(_.value.length/Ze)),T=ie(()=>{const w=[],i=Math.max(1,F.value-2),A=Math.min(g.value,i+4);for(let f=i;f<=A;f++)w.push(f);return w}),N=ie(()=>({total:l.value.length,pending:l.value.filter(w=>w.status==="pending").length,delivered:l.value.filter(w=>w.status==="delivered").length,failed:l.value.filter(w=>w.status==="failed").length})),v=async()=>{try{await a.loadDeliveries(),l.value=a.deliveries}catch(w){console.error("Failed to load deliveries:",w),t.error("Failed to load deliveries")}},m=w=>{n.value=w,h.value={status:w.status,delivery_person:w.delivery_person||"",delivery_vehicle:w.delivery_vehicle||"",notes:w.notes||""},p.value=!0},b=()=>{p.value=!1,n.value=null,h.value={status:"pending",delivery_person:"",delivery_vehicle:"",notes:""}},C=async()=>{if(n.value){y.value=!0;try{await a.updateDeliveryStatus(n.value.id,h.value.status,h.value.delivery_person,h.value.delivery_vehicle);const w=l.value.find(i=>i.id===n.value.id);w&&(w.status=h.value.status,w.delivery_person=h.value.delivery_person,w.delivery_vehicle=h.value.delivery_vehicle,w.notes=h.value.notes,w.updated_at=new Date().toISOString()),t.success("Delivery updated successfully"),b()}catch(w){console.error("Failed to update delivery:",w),t.error("Failed to update delivery")}finally{y.value=!1}}},L=()=>{x.value="",W.value="",B.value="",F.value=1},M=w=>({pending:"badge-warning",assigned:"badge-info",picked_up:"badge-primary",in_transit:"badge-secondary",delivered:"badge-success",failed:"badge-danger"})[w]||"badge-secondary",r=w=>new Date(w).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return _e(()=>{v()}),(w,i)=>{var A,f,E,Z,R,te,pe,ee,U,le,Y,H;return d(),c("div",Zv,[e("div",Rv,[e("div",zv,[e("div",Jv,[i[12]||(i[12]=e("div",null,[e("h1",{class:"text-2xl font-bold text-gray-900"},"Delivery Management"),e("p",{class:"text-gray-600 mt-1"},"Manage delivery assignments and tracking")],-1)),e("div",Hv,[e("button",{onClick:v,class:"btn-secondary"},[$(S(ls),{class:"w-4 h-4 mr-2"}),i[11]||(i[11]=re(" Refresh ",-1))])])])])]),e("div",Gv,[e("div",Qv,[e("div",Kv,[e("div",Xv,[e("div",Yv,[$(S(Lt),{class:"w-6 h-6 text-blue-600"})]),e("div",eg,[i[13]||(i[13]=e("p",{class:"text-sm font-medium text-gray-600"},"Total Deliveries",-1)),e("p",tg,s(N.value.total),1)])])]),e("div",sg,[e("div",ag,[e("div",og,[$(S(Ne),{class:"w-6 h-6 text-yellow-600"})]),e("div",rg,[i[14]||(i[14]=e("p",{class:"text-sm font-medium text-gray-600"},"Pending",-1)),e("p",ig,s(N.value.pending),1)])])]),e("div",lg,[e("div",ng,[e("div",dg,[$(S(Se),{class:"w-6 h-6 text-green-600"})]),e("div",cg,[i[15]||(i[15]=e("p",{class:"text-sm font-medium text-gray-600"},"Delivered",-1)),e("p",ug,s(N.value.delivered),1)])])]),e("div",mg,[e("div",pg,[e("div",vg,[$(S(mt),{class:"w-6 h-6 text-red-600"})]),e("div",gg,[i[16]||(i[16]=e("p",{class:"text-sm font-medium text-gray-600"},"Failed",-1)),e("p",xg,s(N.value.failed),1)])])])]),e("div",yg,[e("div",_g,[e("div",fg,[e("div",null,[i[18]||(i[18]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Status",-1)),J(e("select",{"onUpdate:modelValue":i[0]||(i[0]=q=>x.value=q),class:"form-input"},[...i[17]||(i[17]=[me('<option value="">All Status</option><option value="pending">Pending</option><option value="assigned">Assigned</option><option value="picked_up">Picked Up</option><option value="in_transit">In Transit</option><option value="delivered">Delivered</option><option value="failed">Failed</option>',7)])],512),[[ue,x.value]])]),e("div",null,[i[19]||(i[19]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Delivery Person",-1)),J(e("input",{"onUpdate:modelValue":i[1]||(i[1]=q=>W.value=q),type:"text",placeholder:"Search by delivery person...",class:"form-input"},null,512),[[oe,W.value]])]),e("div",null,[i[20]||(i[20]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Order ID",-1)),J(e("input",{"onUpdate:modelValue":i[2]||(i[2]=q=>B.value=q),type:"text",placeholder:"Search by order ID...",class:"form-input"},null,512),[[oe,B.value]])]),e("div",{class:"flex items-end"},[e("button",{onClick:L,class:"btn-secondary w-full"}," Clear Filters ")])])])]),e("div",hg,[e("div",bg,[e("h3",wg,"Deliveries ("+s(_.value.length)+")",1)]),e("div",$g,[e("table",Sg,[i[21]||(i[21]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Order ID"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Customer"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Product"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Delivery Address"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Status"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Delivery Person"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Created"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Actions")])],-1)),e("tbody",kg,[(d(!0),c(ne,null,de(D.value,q=>{var P,G,k,ye,u,I,j,X,z;return d(),c("tr",{key:q.id,class:"hover:bg-gray-50"},[e("td",Cg,s(q.order_id),1),e("td",jg,[e("div",Pg,[e("span",Ig,s(((G=(P=q.order)==null?void 0:P.user)==null?void 0:G.full_name)||"N/A"),1),e("span",Ug,s(((ye=(k=q.order)==null?void 0:k.user)==null?void 0:ye.email)||"N/A"),1),e("span",Ag,s(((I=(u=q.order)==null?void 0:u.user)==null?void 0:I.phone)||"N/A"),1)])]),e("td",Og,s(((X=(j=q.order)==null?void 0:j.product)==null?void 0:X.name)||"N/A"),1),e("td",qg,s(((z=q.order)==null?void 0:z.delivery_address)||"N/A"),1),e("td",Tg,[e("span",{class:ae([M(q.status),"badge"])},s(q.status.replace("_"," ").toUpperCase()),3)]),e("td",Mg,s(q.delivery_person||"Not assigned"),1),e("td",Fg,s(r(q.created_at)),1),e("td",Ng,[e("button",{onClick:K=>m(q),class:"text-primary-600 hover:text-primary-900 mr-3"}," Manage ",8,Dg)])])}),128))])])]),e("div",Eg,[e("div",Vg,[e("button",{onClick:i[3]||(i[3]=q=>F.value=Math.max(1,F.value-1)),disabled:F.value===1,class:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50"}," Previous ",8,Bg),e("button",{onClick:i[4]||(i[4]=q=>F.value=Math.min(g.value,F.value+1)),disabled:F.value===g.value,class:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50"}," Next ",8,Wg)]),e("div",Lg,[e("div",null,[e("p",Zg,[i[22]||(i[22]=re(" Showing ",-1)),e("span",Rg,s((F.value-1)*Ze+1),1),i[23]||(i[23]=re(" to ",-1)),e("span",zg,s(Math.min(F.value*Ze,_.value.length)),1),i[24]||(i[24]=re(" of ",-1)),e("span",Jg,s(_.value.length),1),i[25]||(i[25]=re(" results ",-1))])]),e("div",null,[e("nav",Hg,[e("button",{onClick:i[5]||(i[5]=q=>F.value=Math.max(1,F.value-1)),disabled:F.value===1,class:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50"},[$(S(ps),{class:"h-5 w-5"})],8,Gg),(d(!0),c(ne,null,de(T.value,q=>(d(),c("button",{key:q,onClick:P=>F.value=q,class:ae([q===F.value?"z-10 bg-primary-50 border-primary-500 text-primary-600":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50","relative inline-flex items-center px-4 py-2 border text-sm font-medium"])},s(q),11,Qg))),128)),e("button",{onClick:i[6]||(i[6]=q=>F.value=Math.min(g.value,F.value+1)),disabled:F.value===g.value,class:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50"},[$(S(vs),{class:"h-5 w-5"})],8,Kg)])])])])])]),p.value?(d(),c("div",Xg,[e("div",Yg,[e("div",e1,[e("div",t1,[i[26]||(i[26]=e("h3",{class:"text-lg font-medium text-gray-900"},"Manage Delivery",-1)),e("button",{onClick:b,class:"text-gray-400 hover:text-gray-600"},[$(S(we),{class:"w-6 h-6"})])]),e("div",s1,[e("div",null,[i[27]||(i[27]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Order ID",-1)),e("input",{value:(A=n.value)==null?void 0:A.order_id,disabled:"",class:"form-input bg-gray-100"},null,8,a1)]),e("div",null,[i[28]||(i[28]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Customer",-1)),e("div",o1,[e("div",r1,[e("div",i1,s(((Z=(E=(f=n.value)==null?void 0:f.order)==null?void 0:E.user)==null?void 0:Z.full_name)||"N/A"),1),e("div",l1,s(((pe=(te=(R=n.value)==null?void 0:R.order)==null?void 0:te.user)==null?void 0:pe.email)||"N/A"),1),e("div",n1,s(((le=(U=(ee=n.value)==null?void 0:ee.order)==null?void 0:U.user)==null?void 0:le.phone)||"N/A"),1)])])]),e("div",null,[i[29]||(i[29]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Delivery Address",-1)),e("textarea",{value:(H=(Y=n.value)==null?void 0:Y.order)==null?void 0:H.delivery_address,disabled:"",rows:"2",class:"form-input bg-gray-100"},null,8,d1)]),e("div",null,[i[31]||(i[31]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Status",-1)),J(e("select",{"onUpdate:modelValue":i[7]||(i[7]=q=>h.value.status=q),class:"form-input"},[...i[30]||(i[30]=[me('<option value="pending">Pending</option><option value="assigned">Assigned</option><option value="picked_up">Picked Up</option><option value="in_transit">In Transit</option><option value="delivered">Delivered</option><option value="failed">Failed</option>',6)])],512),[[ue,h.value.status]])]),e("div",null,[i[32]||(i[32]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Delivery Person",-1)),J(e("input",{"onUpdate:modelValue":i[8]||(i[8]=q=>h.value.delivery_person=q),type:"text",placeholder:"Enter delivery person name",class:"form-input"},null,512),[[oe,h.value.delivery_person]])]),e("div",null,[i[33]||(i[33]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Delivery Vehicle",-1)),J(e("input",{"onUpdate:modelValue":i[9]||(i[9]=q=>h.value.delivery_vehicle=q),type:"text",placeholder:"Enter vehicle type",class:"form-input"},null,512),[[oe,h.value.delivery_vehicle]])]),e("div",null,[i[34]||(i[34]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Notes",-1)),J(e("textarea",{"onUpdate:modelValue":i[10]||(i[10]=q=>h.value.notes=q),rows:"3",placeholder:"Enter delivery notes",class:"form-input"},null,512),[[oe,h.value.notes]])])]),e("div",c1,[e("button",{onClick:b,class:"btn-secondary"}," Cancel "),e("button",{onClick:C,class:"btn-primary",disabled:y.value},[y.value?(d(),c("span",m1,"Updating...")):(d(),c("span",p1,"Update Delivery"))],8,u1)])])])])):Q("",!0)])}}}),g1={class:"min-h-screen bg-gray-50"},x1={class:"bg-white shadow-sm border-b border-gray-200"},y1={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"},_1={class:"flex items-center justify-between"},f1={class:"flex items-center space-x-4"},h1={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},b1={class:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8"},w1={class:"card"},$1={class:"card-body"},S1={class:"flex items-center"},k1={class:"flex-shrink-0"},C1={class:"w-8 h-8 bg-primary-100 rounded-lg flex items-center justify-center"},j1={class:"ml-4"},P1={class:"text-2xl font-semibold text-gray-900"},I1={class:"text-xs text-success-600"},U1={class:"card"},A1={class:"card-body"},O1={class:"flex items-center"},q1={class:"flex-shrink-0"},T1={class:"w-8 h-8 bg-success-100 rounded-lg flex items-center justify-center"},M1={class:"ml-4"},F1={class:"text-2xl font-semibold text-gray-900"},N1={class:"text-xs text-success-600"},D1={class:"card"},E1={class:"card-body"},V1={class:"flex items-center"},B1={class:"flex-shrink-0"},W1={class:"w-8 h-8 bg-warning-100 rounded-lg flex items-center justify-center"},L1={class:"ml-4"},Z1={class:"text-2xl font-semibold text-gray-900"},R1={class:"text-xs text-success-600"},z1={class:"card"},J1={class:"card-body"},H1={class:"flex items-center"},G1={class:"flex-shrink-0"},Q1={class:"w-8 h-8 bg-info-100 rounded-lg flex items-center justify-center"},K1={class:"ml-4"},X1={class:"text-2xl font-semibold text-gray-900"},Y1={class:"text-xs text-success-600"},ex={class:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8"},tx={class:"card"},sx={class:"card-body"},ax={class:"h-64"},ox={class:"card"},rx={class:"card-body"},ix={class:"h-64"},lx={class:"card mb-8"},nx={class:"card-body"},dx={class:"grid grid-cols-1 md:grid-cols-4 gap-6"},cx={class:"text-center"},ux={class:"w-16 h-16 bg-primary-100 rounded-full flex items-center justify-center mx-auto mb-3"},mx={class:"text-2xl font-bold text-primary-600"},px={class:"text-center"},vx={class:"w-16 h-16 bg-success-100 rounded-full flex items-center justify-center mx-auto mb-3"},gx={class:"text-2xl font-bold text-success-600"},xx={class:"text-center"},yx={class:"w-16 h-16 bg-warning-100 rounded-full flex items-center justify-center mx-auto mb-3"},_x={class:"text-2xl font-bold text-warning-600"},fx={class:"text-center"},hx={class:"w-16 h-16 bg-info-100 rounded-full flex items-center justify-center mx-auto mb-3"},bx={class:"text-2xl font-bold text-info-600"},wx={class:"text-sm text-gray-500"},$x={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},Sx={class:"card"},kx={class:"card-body"},Cx={class:"space-y-4"},jx={class:"flex items-center space-x-3"},Px={class:"w-8 h-8 bg-primary-100 rounded-full flex items-center justify-center"},Ix={class:"text-sm font-medium text-primary-600"},Ux={class:"font-medium text-gray-900"},Ax={class:"text-sm text-gray-500"},Ox={class:"text-right"},qx={class:"font-medium text-gray-900"},Tx={class:"card"},Mx={class:"card-body"},Fx={class:"space-y-4"},Nx={class:"flex items-center space-x-3"},Dx={class:"w-8 h-8 bg-success-100 rounded-full flex items-center justify-center"},Ex={class:"text-sm font-medium text-success-600"},Vx={class:"font-medium text-gray-900"},Bx={class:"text-sm text-gray-500"},Wx={class:"text-right"},Lx={class:"font-medium text-gray-900"},Zx={class:"text-sm text-gray-500"},Rx={class:"mt-8"},zx={class:"card"},Jx={class:"card-body"},Hx={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},Gx={class:"text-center"},Qx={class:"w-16 h-16 bg-success-100 rounded-full flex items-center justify-center mx-auto mb-3"},Kx={class:"text-center"},Xx={class:"w-16 h-16 bg-primary-100 rounded-full flex items-center justify-center mx-auto mb-3"},Yx={class:"text-center"},ey={class:"w-16 h-16 bg-info-100 rounded-full flex items-center justify-center mx-auto mb-3"},ty={class:"text-2xl font-bold text-info-600"},sy=xe({__name:"ReportsView",setup(o){Oe.register(xt,yt,_t,ft,ht,bt,wt,$t,St,kt);const a=he(),t=$e(),l=je(),y=Ie(),p=O(),n=O(),x=O("30"),W=O(!1),B=O({totalUsers:0,userGrowth:0,wasteProcessed:0,wasteGrowth:0,ordersCompleted:0,orderGrowth:0,revenue:0,revenueGrowth:0,activeUsers:0}),F=O([]),h=O([]),_=O({totalUsers:0,vendors:0,customers:0,activeUsers:0,activePercentage:0}),D=async()=>{W.value=!0;try{await Promise.all([t.loadUsers(),l.loadSourceWasteSubmissions(),y.loadProducts(),y.loadOrders()]);const v=t.users,m=l.sourceWasteSubmissions,b=y.products,C=y.orders,M=m.filter(Y=>Y.status==="processed").reduce((Y,H)=>Y+H.quantity,0),r=v.length,w=v.filter(Y=>Y.is_active).length,i=v.filter(Y=>Y.role==="vendor").length,A=v.filter(Y=>Y.role==="user").length,f=C.filter(Y=>Y.status==="delivered").length,E=C.reduce((Y,H)=>Y+H.total_price,0),Z=new Date,R=new Date(Z.getTime()-30*24*60*60*1e3),te=v.filter(Y=>new Date(Y.created_at)>R).length,pe=m.filter(Y=>new Date(Y.submitted_at||"")>R).length,ee=C.filter(Y=>new Date(Y.order_date)>R).length;B.value={totalUsers:r,userGrowth:r>0?Math.round(te/r*100*10)/10:0,wasteProcessed:M,wasteGrowth:m.length>0?Math.round(pe/m.length*100*10)/10:0,ordersCompleted:f,orderGrowth:C.length>0?Math.round(ee/C.length*100*10)/10:0,revenue:E,revenueGrowth:E>0?Math.round(Math.random()*30+10):0,activeUsers:w},_.value={totalUsers:r,vendors:i,customers:A,activeUsers:w,activePercentage:r>0?Math.round(w/r*100):0};const U={};m.forEach(Y=>{var q;const H=Y.vendor_id||(typeof Y.vendor=="object"?(q=Y.vendor)==null?void 0:q.id:Y.vendor);if(H){if(!U[H]){const P=v.find(G=>G.id===H);U[H]={name:(P==null?void 0:P.full_name)||"Unknown Vendor",submissions:0,wasteProcessed:0}}U[H].submissions++,U[H].wasteProcessed+=Y.quantity}}),F.value=Object.entries(U).map(([,Y],H)=>({id:H+1,name:Y.name,submissions:Y.submissions,wasteProcessed:Y.wasteProcessed})).sort((Y,H)=>H.wasteProcessed-Y.wasteProcessed).slice(0,5);const le={};C.forEach(Y=>{const H=Y.product||b.find(q=>q.id===Y.product_id);H&&(le[H.id]||(le[H.id]={name:H.name,category:H.category.charAt(0).toUpperCase()+H.category.slice(1),orders:0,revenue:0}),le[H.id].orders++,le[H.id].revenue+=Y.total_price)}),h.value=Object.entries(le).map(([Y,H])=>({id:Y,...H})).sort((Y,H)=>H.revenue-Y.revenue).slice(0,5)}catch(v){console.error("Failed to load metrics:",v),a.error("Failed to load report data")}finally{W.value=!1}},g=()=>{a.success(`Generating report for last ${x.value} days...`)},T=()=>{if(!p.value)return;const v=p.value.getContext("2d");if(!v)return;const m=[],b=[];for(let C=6;C>=0;C--){const L=new Date;L.setDate(L.getDate()-C),m.push(L.toLocaleDateString("en-US",{month:"short",day:"numeric"}));const M=new Date(L);M.setHours(0,0,0,0);const r=new Date(L);r.setHours(23,59,59,999);const i=l.sourceWasteSubmissions.filter(A=>{const f=new Date(A.submitted_at||new Date);return f>=M&&f<=r&&A.status==="processed"}).reduce((A,f)=>A+f.quantity,0);b.push(i)}new Oe(v,{type:"bar",data:{labels:m,datasets:[{label:"Waste Processed (kg)",data:b,backgroundColor:"rgba(99, 102, 241, 0.8)",borderColor:"rgba(99, 102, 241, 1)",borderWidth:1}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{y:{beginAtZero:!0,title:{display:!0,text:"Waste Processed (kg)"}}}}})},N=()=>{if(!n.value)return;const v=n.value.getContext("2d");if(!v)return;const m=[],b=[];for(let C=6;C>=0;C--){const L=new Date;L.setDate(L.getDate()-C),m.push(L.toLocaleDateString("en-US",{month:"short",day:"numeric"}));const M=new Date(L);M.setHours(0,0,0,0);const r=new Date(L);r.setHours(23,59,59,999);const i=y.orders.filter(A=>{const f=new Date(A.order_date);return f>=M&&f<=r&&A.status==="delivered"}).reduce((A,f)=>A+f.total_price,0);b.push(i)}new Oe(v,{type:"line",data:{labels:m,datasets:[{label:"Revenue (â‚±)",data:b,borderColor:"rgba(16, 185, 129, 1)",backgroundColor:"rgba(16, 185, 129, 0.2)",fill:!0,tension:.3}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{callbacks:{label:function(C){let L=C.dataset.label||"";return L&&(L+=": "),C.parsed.y!==null&&(L+=`â‚±${C.parsed.y.toLocaleString()}`),L}}}},scales:{y:{beginAtZero:!0,title:{display:!0,text:"Revenue (â‚±)"}}}}})};return _e(async()=>{await D(),await gt(),T(),N()}),(v,m)=>(d(),c("div",g1,[e("div",x1,[e("div",y1,[e("div",_1,[m[3]||(m[3]=e("div",null,[e("h1",{class:"text-2xl font-bold text-gray-900"},"Reports & Analytics"),e("p",{class:"text-gray-600 mt-1"},"Comprehensive system reports and analytics")],-1)),e("div",f1,[J(e("select",{"onUpdate:modelValue":m[0]||(m[0]=b=>x.value=b),class:"form-input"},[...m[1]||(m[1]=[e("option",{value:"7"},"Last 7 days",-1),e("option",{value:"30"},"Last 30 days",-1),e("option",{value:"90"},"Last 90 days",-1),e("option",{value:"365"},"Last year",-1)])],512),[[ue,x.value]]),e("button",{onClick:g,class:"btn-primary"},[$(S(Nt),{class:"w-5 h-5 mr-2"}),m[2]||(m[2]=re(" Export Report ",-1))])])])])]),e("div",h1,[e("div",b1,[e("div",w1,[e("div",$1,[e("div",S1,[e("div",k1,[e("div",C1,[$(S(lt),{class:"w-5 h-5 text-primary-600"})])]),e("div",j1,[m[4]||(m[4]=e("p",{class:"text-sm font-medium text-gray-500"},"Total Users",-1)),e("p",P1,s(B.value.totalUsers),1),e("p",I1,"+"+s(B.value.userGrowth)+"% from last period",1)])])])]),e("div",U1,[e("div",A1,[e("div",O1,[e("div",q1,[e("div",T1,[$(S(ge),{class:"w-5 h-5 text-success-600"})])]),e("div",M1,[m[5]||(m[5]=e("p",{class:"text-sm font-medium text-gray-500"},"Waste Processed",-1)),e("p",F1,s(B.value.wasteProcessed)+" kg",1),e("p",N1,"+"+s(B.value.wasteGrowth)+"% from last period",1)])])])]),e("div",D1,[e("div",E1,[e("div",V1,[e("div",B1,[e("div",W1,[$(S(Ue),{class:"w-5 h-5 text-warning-600"})])]),e("div",L1,[m[6]||(m[6]=e("p",{class:"text-sm font-medium text-gray-500"},"Orders Completed",-1)),e("p",Z1,s(B.value.ordersCompleted),1),e("p",R1,"+"+s(B.value.orderGrowth)+"% from last period",1)])])])]),e("div",z1,[e("div",J1,[e("div",H1,[e("div",G1,[e("div",Q1,[$(S(De),{class:"w-5 h-5 text-info-600"})])]),e("div",K1,[m[7]||(m[7]=e("p",{class:"text-sm font-medium text-gray-500"},"Revenue",-1)),e("p",X1,"â‚±"+s(B.value.revenue.toLocaleString()),1),e("p",Y1,"+"+s(B.value.revenueGrowth)+"% from last period",1)])])])])]),e("div",ex,[e("div",tx,[m[8]||(m[8]=e("div",{class:"card-header"},[e("h3",{class:"text-lg font-semibold text-gray-900"},"Waste Processing Trend")],-1)),e("div",sx,[e("div",ax,[e("canvas",{ref_key:"wasteTrendChart",ref:p},null,512)])])]),e("div",ox,[m[9]||(m[9]=e("div",{class:"card-header"},[e("h3",{class:"text-lg font-semibold text-gray-900"},"Revenue Trend")],-1)),e("div",rx,[e("div",ix,[e("canvas",{ref_key:"revenueTrendChart",ref:n},null,512)])])])]),e("div",lx,[m[17]||(m[17]=e("div",{class:"card-header"},[e("h3",{class:"text-lg font-semibold text-gray-900"},"User Statistics")],-1)),e("div",nx,[e("div",dx,[e("div",cx,[e("div",ux,[$(S(lt),{class:"w-8 h-8 text-primary-600"})]),m[10]||(m[10]=e("h4",{class:"font-medium text-gray-900 mb-1"},"Total Users",-1)),e("p",mx,s(_.value.totalUsers),1),m[11]||(m[11]=e("p",{class:"text-sm text-gray-500"},"All registered users",-1))]),e("div",px,[e("div",vx,[$(S(ge),{class:"w-8 h-8 text-success-600"})]),m[12]||(m[12]=e("h4",{class:"font-medium text-gray-900 mb-1"},"Vendors",-1)),e("p",gx,s(_.value.vendors),1),m[13]||(m[13]=e("p",{class:"text-sm text-gray-500"},"Waste suppliers",-1))]),e("div",xx,[e("div",yx,[$(S(Ue),{class:"w-8 h-8 text-warning-600"})]),m[14]||(m[14]=e("h4",{class:"font-medium text-gray-900 mb-1"},"Customers",-1)),e("p",_x,s(_.value.customers),1),m[15]||(m[15]=e("p",{class:"text-sm text-gray-500"},"Product buyers",-1))]),e("div",fx,[e("div",hx,[$(S(Se),{class:"w-8 h-8 text-info-600"})]),m[16]||(m[16]=e("h4",{class:"font-medium text-gray-900 mb-1"},"Active Users",-1)),e("p",bx,s(_.value.activeUsers),1),e("p",wx,s(_.value.activePercentage)+"% of total",1)])])])]),e("div",$x,[e("div",Sx,[m[19]||(m[19]=e("div",{class:"card-header"},[e("h3",{class:"text-lg font-semibold text-gray-900"},"Top Performing Vendors")],-1)),e("div",kx,[e("div",Cx,[(d(!0),c(ne,null,de(F.value,(b,C)=>(d(),c("div",{key:b.id,class:"flex items-center justify-between p-3 bg-gray-50 rounded-lg"},[e("div",jx,[e("div",Px,[e("span",Ix,s(C+1),1)]),e("div",null,[e("p",Ux,s(b.name),1),e("p",Ax,s(b.submissions)+" submissions",1)])]),e("div",Ox,[e("p",qx,s(b.wasteProcessed)+" kg",1),m[18]||(m[18]=e("p",{class:"text-sm text-gray-500"},"processed",-1))])]))),128))])])]),e("div",Tx,[m[20]||(m[20]=e("div",{class:"card-header"},[e("h3",{class:"text-lg font-semibold text-gray-900"},"Most Popular Products")],-1)),e("div",Mx,[e("div",Fx,[(d(!0),c(ne,null,de(h.value,(b,C)=>(d(),c("div",{key:b.id,class:"flex items-center justify-between p-3 bg-gray-50 rounded-lg"},[e("div",Nx,[e("div",Dx,[e("span",Ex,s(C+1),1)]),e("div",null,[e("p",Vx,s(b.name),1),e("p",Bx,s(b.category),1)])]),e("div",Wx,[e("p",Lx,s(b.orders)+" orders",1),e("p",Zx,"â‚±"+s(b.revenue.toLocaleString()),1)])]))),128))])])])]),e("div",Rx,[e("div",zx,[m[29]||(m[29]=e("div",{class:"card-header"},[e("h3",{class:"text-lg font-semibold text-gray-900"},"System Health & Performance")],-1)),e("div",Jx,[e("div",Hx,[e("div",Gx,[e("div",Qx,[$(S(Se),{class:"w-8 h-8 text-success-600"})]),m[21]||(m[21]=e("h4",{class:"font-medium text-gray-900 mb-1"},"System Uptime",-1)),m[22]||(m[22]=e("p",{class:"text-2xl font-bold text-success-600"},"99.9%",-1)),m[23]||(m[23]=e("p",{class:"text-sm text-gray-500"},"Last 30 days",-1))]),e("div",Kx,[e("div",Xx,[$(S(Ne),{class:"w-8 h-8 text-primary-600"})]),m[24]||(m[24]=e("h4",{class:"font-medium text-gray-900 mb-1"},"Avg Response Time",-1)),m[25]||(m[25]=e("p",{class:"text-2xl font-bold text-primary-600"},"245ms",-1)),m[26]||(m[26]=e("p",{class:"text-sm text-gray-500"},"API calls",-1))]),e("div",Yx,[e("div",ey,[$(S(lt),{class:"w-8 h-8 text-info-600"})]),m[27]||(m[27]=e("h4",{class:"font-medium text-gray-900 mb-1"},"Active Users",-1)),e("p",ty,s(B.value.activeUsers),1),m[28]||(m[28]=e("p",{class:"text-sm text-gray-500"},"Currently online",-1))])])])])])])]))}}),ay={class:"min-h-screen bg-gray-50"},oy={class:"bg-white shadow-sm border-b border-gray-200"},ry={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"},iy={class:"flex items-center justify-between"},ly={class:"flex items-center space-x-4"},ny={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},dy={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"},cy={class:"card"},uy={class:"card-body"},my={class:"flex items-center justify-between"},py={class:"text-2xl font-semibold text-gray-900"},vy={class:"w-12 h-12 bg-success-100 rounded-lg flex items-center justify-center"},gy={class:"card"},xy={class:"card-body"},yy={class:"flex items-center justify-between"},_y={class:"text-2xl font-semibold text-gray-900"},fy={class:"w-12 h-12 bg-primary-100 rounded-lg flex items-center justify-center"},hy={class:"card"},by={class:"card-body"},wy={class:"flex items-center justify-between"},$y={class:"text-2xl font-semibold text-gray-900"},Sy={class:"w-12 h-12 bg-warning-100 rounded-lg flex items-center justify-center"},ky={class:"card"},Cy={class:"card-body"},jy={class:"flex items-center justify-between"},Py={class:"text-2xl font-semibold text-gray-900"},Iy={class:"w-12 h-12 bg-danger-100 rounded-lg flex items-center justify-center"},Uy={class:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8"},Ay={class:"card"},Oy={class:"card-body"},qy={class:"h-64"},Ty={class:"card"},My={class:"card-body"},Fy={class:"h-64"},Ny={class:"grid grid-cols-1 lg:grid-cols-3 gap-8"},Dy={class:"card"},Ey={class:"card-body"},Vy={class:"space-y-4"},By={class:"flex items-center space-x-3"},Wy={class:"w-8 h-8 bg-primary-100 rounded-full flex items-center justify-center"},Ly={class:"text-sm font-medium text-primary-600"},Zy={class:"text-sm font-medium text-gray-900"},Ry={class:"text-xs text-gray-500"},zy={class:"text-right"},Jy={class:"text-sm font-medium text-gray-900"},Hy={class:"card"},Gy={class:"card-body"},Qy={class:"space-y-4"},Ky={class:"flex items-center space-x-3"},Xy={class:"text-sm font-medium text-gray-900"},Yy={class:"text-right"},e_={class:"text-sm font-medium text-gray-900"},t_={class:"text-xs text-gray-500"},s_=xe({__name:"AnalyticsView",setup(o){Oe.register(xt,yt,_t,ft,ht,bt,wt,$t,St,kt);const a=he(),t=$e(),l=je(),y=Ie(),p=O(),n=O(),x=O("30"),W=O(!1),B=O({wasteReduction:0,activeUsers:0,productsCreated:0,revenueGrowth:0}),F=O([]),h=O([]),_=async()=>{W.value=!0;try{await Promise.all([t.loadUsers(),l.loadSourceWasteSubmissions(),y.loadProducts(),y.loadOrders()]);const N=t.users,v=l.sourceWasteSubmissions,m=y.products,b=y.orders,C=v.length,L=v.filter(f=>f.status==="processed").length,M=C>0?(L/C*100).toFixed(1):"0",r=b.reduce((f,E)=>f+E.total_price,0),w=r>0?(r/100).toFixed(1):"0";B.value={wasteReduction:parseFloat(M),activeUsers:N.filter(f=>f.is_active).length,productsCreated:m.length,revenueGrowth:parseFloat(w)};const i={};v.forEach(f=>{var Z;const E=((Z=f.category)==null?void 0:Z.name)||"other";i[E]=(i[E]||0)+1}),F.value=Object.entries(i).map(([f,E])=>({type:f.charAt(0).toUpperCase()+f.slice(1),category:f,count:E})).sort((f,E)=>E.count-f.count).slice(0,5);const A={};N.forEach(f=>{A[f.role]=(A[f.role]||0)+1}),h.value=Object.entries(A).map(([f,E])=>({type:f.charAt(0).toUpperCase()+f.slice(1)+"s",count:E,percentage:N.length>0?(E/N.length*100).toFixed(1):"0",color:D(f)}))}catch(N){console.error("Failed to load analytics:",N),a.error("Failed to load analytics data")}finally{W.value=!1}},D=N=>({admin:"bg-danger-500",vendor:"bg-primary-500",user:"bg-success-500"})[N]||"bg-gray-500",g=()=>{if(!p.value)return;const N=p.value.getContext("2d");if(!N)return;const v=[],m=[];for(let b=6;b>=0;b--){const C=new Date;C.setDate(C.getDate()-b),v.push(C.toLocaleDateString("en-US",{month:"short",day:"numeric"}));const L=new Date(C);L.setHours(0,0,0,0);const M=new Date(C);M.setHours(23,59,59,999);const r=l.sourceWasteSubmissions.filter(w=>{const i=new Date(w.submitted_at||new Date);return i>=L&&i<=M});m.push(r.length)}new Oe(N,{type:"bar",data:{labels:v,datasets:[{label:"Waste Submissions",data:m,backgroundColor:"rgba(239, 68, 68, 0.8)",borderColor:"rgba(239, 68, 68, 1)",borderWidth:1}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{y:{beginAtZero:!0,title:{display:!0,text:"Number of Submissions"}}}}})},T=()=>{if(!n.value)return;const N=n.value.getContext("2d");if(!N)return;const v=[],m=[];for(let b=6;b>=0;b--){const C=new Date;C.setDate(C.getDate()-b),v.push(C.toLocaleDateString("en-US",{month:"short",day:"numeric"}));const L=new Date(C);L.setHours(0,0,0,0);const M=new Date(C);M.setHours(23,59,59,999);const r=t.users.filter(w=>{const i=new Date(w.created_at);return i>=L&&i<=M});m.push(r.length)}new Oe(N,{type:"line",data:{labels:v,datasets:[{label:"User Registrations",data:m,borderColor:"rgba(99, 102, 241, 1)",backgroundColor:"rgba(99, 102, 241, 0.2)",fill:!0,tension:.3}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{y:{beginAtZero:!0,title:{display:!0,text:"Number of Registrations"}}}}})};return _e(async()=>{await _(),await gt(),g(),T()}),(N,v)=>(d(),c("div",ay,[e("div",oy,[e("div",ry,[e("div",iy,[v[2]||(v[2]=e("div",null,[e("h1",{class:"text-2xl font-bold text-gray-900"},"Analytics Dashboard"),e("p",{class:"text-gray-600 mt-1"},"System performance and insights")],-1)),e("div",ly,[J(e("select",{"onUpdate:modelValue":v[0]||(v[0]=m=>x.value=m),class:"form-input"},[...v[1]||(v[1]=[e("option",{value:"7"},"Last 7 days",-1),e("option",{value:"30"},"Last 30 days",-1),e("option",{value:"90"},"Last 90 days",-1),e("option",{value:"365"},"Last year",-1)])],512),[[ue,x.value]])])])])]),e("div",ny,[e("div",dy,[e("div",cy,[e("div",uy,[e("div",my,[e("div",null,[v[3]||(v[3]=e("p",{class:"text-sm font-medium text-gray-500"},"Waste Reduction",-1)),e("p",py,s(B.value.wasteReduction)+"%",1),v[4]||(v[4]=e("p",{class:"text-sm text-success-600"},"+12% from last month",-1))]),e("div",vy,[$(S(We),{class:"w-6 h-6 text-success-600"})])])])]),e("div",gy,[e("div",xy,[e("div",yy,[e("div",null,[v[5]||(v[5]=e("p",{class:"text-sm font-medium text-gray-500"},"Active Users",-1)),e("p",_y,s(B.value.activeUsers),1),v[6]||(v[6]=e("p",{class:"text-sm text-primary-600"},"+8% from last month",-1))]),e("div",fy,[$(S(Be),{class:"w-6 h-6 text-primary-600"})])])])]),e("div",hy,[e("div",by,[e("div",wy,[e("div",null,[v[7]||(v[7]=e("p",{class:"text-sm font-medium text-gray-500"},"Products Created",-1)),e("p",$y,s(B.value.productsCreated),1),v[8]||(v[8]=e("p",{class:"text-sm text-warning-600"},"+15% from last month",-1))]),e("div",Sy,[$(S(ge),{class:"w-6 h-6 text-warning-600"})])])])]),e("div",ky,[e("div",Cy,[e("div",jy,[e("div",null,[v[9]||(v[9]=e("p",{class:"text-sm font-medium text-gray-500"},"Revenue Growth",-1)),e("p",Py,"â‚±"+s(B.value.revenueGrowth.toLocaleString()),1),v[10]||(v[10]=e("p",{class:"text-sm text-danger-600"},"+23% from last month",-1))]),e("div",Iy,[$(S(De),{class:"w-6 h-6 text-danger-600"})])])])])]),e("div",Uy,[e("div",Ay,[v[11]||(v[11]=e("div",{class:"card-header"},[e("h3",{class:"text-lg font-semibold text-gray-900"},"Waste Submission Trends")],-1)),e("div",Oy,[e("div",qy,[e("canvas",{ref_key:"wasteSubmissionChart",ref:p},null,512)])])]),e("div",Ty,[v[12]||(v[12]=e("div",{class:"card-header"},[e("h3",{class:"text-lg font-semibold text-gray-900"},"User Registration Trends")],-1)),e("div",My,[e("div",Fy,[e("canvas",{ref_key:"userRegistrationChart",ref:n},null,512)])])])]),e("div",Ny,[e("div",Dy,[v[14]||(v[14]=e("div",{class:"card-header"},[e("h3",{class:"text-lg font-semibold text-gray-900"},"Top Waste Types")],-1)),e("div",Ey,[e("div",Vy,[(d(!0),c(ne,null,de(F.value,(m,b)=>(d(),c("div",{key:m.type,class:"flex items-center justify-between"},[e("div",By,[e("div",Wy,[e("span",Ly,s(b+1),1)]),e("div",null,[e("p",Zy,s(m.type),1),e("p",Ry,s(m.category),1)])]),e("div",zy,[e("p",Jy,s(m.count),1),v[13]||(v[13]=e("p",{class:"text-xs text-gray-500"},"submissions",-1))])]))),128))])])]),e("div",Hy,[v[15]||(v[15]=e("div",{class:"card-header"},[e("h3",{class:"text-lg font-semibold text-gray-900"},"User Distribution")],-1)),e("div",Gy,[e("div",Qy,[(d(!0),c(ne,null,de(h.value,m=>(d(),c("div",{key:m.type,class:"flex items-center justify-between"},[e("div",Ky,[e("div",{class:ae([m.color,"w-3 h-3 rounded-full"])},null,2),e("span",Xy,s(m.type),1)]),e("div",Yy,[e("p",e_,s(m.count),1),e("p",t_,s(m.percentage)+"%",1)])]))),128))])])])])])]))}}),a_={class:"min-h-screen bg-gray-50"},o_={class:"bg-white shadow-sm border-b border-gray-200"},r_={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 sm:py-6"},i_={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between"},l_={class:"flex items-center space-x-4"},n_={class:"text-right"},d_={class:"text-xs sm:text-sm text-gray-500"},c_={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 sm:py-6 lg:py-8"},u_={class:"grid grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4 lg:gap-6 mb-6 sm:mb-8"},m_={class:"card"},p_={class:"card-body p-3 sm:p-4 lg:p-6"},v_={class:"flex items-center"},g_={class:"flex-shrink-0"},x_={class:"w-6 h-6 sm:w-8 sm:h-8 bg-emerald-100 rounded-lg flex items-center justify-center"},y_={class:"ml-2 sm:ml-4"},__={class:"text-lg sm:text-xl lg:text-2xl font-semibold text-gray-900"},f_={class:"card"},h_={class:"card-body p-3 sm:p-4 lg:p-6"},b_={class:"flex items-center"},w_={class:"flex-shrink-0"},$_={class:"w-6 h-6 sm:w-8 sm:h-8 bg-diamond-100 rounded-lg flex items-center justify-center"},S_={class:"ml-2 sm:ml-4"},k_={class:"text-lg sm:text-xl lg:text-2xl font-semibold text-gray-900"},C_={class:"card"},j_={class:"card-body p-3 sm:p-4 lg:p-6"},P_={class:"flex items-center"},I_={class:"flex-shrink-0"},U_={class:"w-6 h-6 sm:w-8 sm:h-8 bg-warning-100 rounded-lg flex items-center justify-center"},A_={class:"ml-2 sm:ml-4"},O_={class:"text-lg sm:text-xl lg:text-2xl font-semibold text-gray-900"},q_={class:"card"},T_={class:"card-body p-3 sm:p-4 lg:p-6"},M_={class:"flex items-center"},F_={class:"flex-shrink-0"},N_={class:"w-6 h-6 sm:w-8 sm:h-8 bg-danger-100 rounded-lg flex items-center justify-center"},D_={class:"ml-2 sm:ml-4"},E_={class:"text-lg sm:text-xl lg:text-2xl font-semibold text-gray-900"},V_={class:"grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6 lg:gap-8 mb-6 sm:mb-8"},B_={class:"card"},W_={class:"card-body p-3 sm:p-4 lg:p-6"},L_={class:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4"},Z_={class:"card"},R_={class:"card-body p-3 sm:p-4 lg:p-6"},z_={class:"space-y-3 sm:space-y-4"},J_={class:"flex items-center space-x-2 sm:space-x-3"},H_={class:"w-8 h-8 sm:w-10 sm:h-10 bg-gray-100 rounded flex items-center justify-center overflow-hidden"},G_=["src","alt","onError"],Q_={key:1,class:"w-8 h-8 sm:w-10 sm:h-10 bg-gray-200 rounded flex items-center justify-center"},K_={class:"text-xs sm:text-sm font-medium text-gray-900"},X_={class:"text-xs text-gray-500"},Y_={class:"text-right"},ef={class:"text-xs sm:text-sm font-medium text-gray-900 mt-1"},tf={class:"mt-3 sm:mt-4"},sf={class:"card"},af={class:"card-body p-3 sm:p-4 lg:p-6"},of={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4 lg:gap-6"},rf={class:"w-full h-24 sm:h-32 bg-gray-100 flex items-center justify-center overflow-hidden"},lf=["src","alt","onError"],nf={key:1,class:"w-full h-24 sm:h-32 bg-gray-200 flex items-center justify-center"},df={class:"p-3 sm:p-4"},cf={class:"font-medium text-gray-900 text-sm sm:text-base"},uf={class:"text-xs sm:text-sm text-gray-500 mt-1"},mf={class:"flex items-center justify-between mt-2 sm:mt-3"},pf={class:"text-sm sm:text-lg font-semibold text-primary-600"},qt=xe({__name:"DashboardView",setup(o){const a=fe(),t=Ie(),l=ie(()=>a.user),y=O({}),p=O({totalOrders:0,completedOrders:0,pendingOrders:0,totalSpent:0}),n=O([{id:"ORD-001",product:{name:"Organic Banana Compost",image_url:"/images/banana-compost.jpg"},status:"delivered",total_price:300},{id:"ORD-002",product:{name:"Mango Jam",image_url:"/images/mango-jam.jpg"},status:"shipped",total_price:80}]),x=O([{id:"1",name:"Organic Banana Compost",description:"Rich compost made from overripe bananas",price:150,image_url:"/images/banana-compost.jpg"},{id:"2",name:"Tomato Fertilizer",description:"Natural fertilizer derived from bruised tomatoes",price:200,image_url:"/images/tomato-fertilizer.jpg"},{id:"3",name:"Mango Jam",description:"Delicious jam made from damaged mangoes",price:80,image_url:"/images/mango-jam.jpg"},{id:"4",name:"Rice Husk Fertilizer",description:"Eco-friendly fertilizer made from excess rice husks",price:90,image_url:"/images/rice-fertilizer.jpg"}]),W=h=>({pending:"badge-warning",confirmed:"badge-primary",processing:"badge-primary",shipped:"badge-primary",delivered:"badge-success",cancelled:"badge-danger"})[h]||"badge-gray",B=h=>{y.value[h]=!0},F=async()=>{var h,_;try{if(!a.isAuthenticated){console.log("User not authenticated, using fallback data"),p.value={totalOrders:0,completedOrders:0,pendingOrders:0,totalSpent:0},n.value=[],x.value=[];return}console.log("Loading dashboard for user:",l.value),console.log("User ID:",(h=l.value)==null?void 0:h.id),await Promise.all([t.loadProducts(),t.loadOrders()]);const D=((_=l.value)==null?void 0:_.id)!=null?String(l.value.id):"",g=t.orders.filter(T=>String(T.user_id)===D);p.value={totalOrders:g.length,completedOrders:g.filter(T=>T.status==="delivered").length,pendingOrders:g.filter(T=>["pending","confirmed","processing","shipped"].includes(T.status)).length,totalSpent:g.reduce((T,N)=>T+N.total_price,0)},n.value=g.slice(0,5).map(T=>{var N,v;return{id:T.id,product:{name:((N=T.product)==null?void 0:N.name)||"Unknown Product",image_url:((v=T.product)==null?void 0:v.image_url)||"/images/placeholder.jpg"},status:T.status,total_price:T.total_price}}),x.value=t.products.slice(0,4).map(T=>({id:T.id,name:T.name,description:T.description,price:T.price,image_url:T.image_url||"/images/placeholder.jpg"}))}catch(D){console.error("Failed to load stats:",D)}};return _e(()=>{F()}),(h,_)=>{var g;const D=Te("router-link");return d(),c("div",a_,[e("div",o_,[e("div",r_,[e("div",i_,[_[1]||(_[1]=e("div",{class:"mb-2 sm:mb-0"},[e("h1",{class:"text-xl sm:text-2xl font-bold text-gray-900"},"User Dashboard"),e("p",{class:"text-sm sm:text-base text-gray-600 mt-1"},"Welcome to AniHan Platform")],-1)),e("div",l_,[e("div",n_,[e("p",d_,"Welcome, "+s((g=l.value)==null?void 0:g.full_name),1),_[0]||(_[0]=e("p",{class:"text-xs sm:text-sm text-gray-500"},"General User",-1))])])])])]),e("div",c_,[e("div",u_,[e("div",m_,[e("div",p_,[e("div",v_,[e("div",g_,[e("div",x_,[$(S(Ue),{class:"w-3 h-3 sm:w-5 sm:h-5 text-emerald-600"})])]),e("div",y_,[_[2]||(_[2]=e("p",{class:"text-xs sm:text-sm font-medium text-gray-500"},"Total Orders",-1)),e("p",__,s(p.value.totalOrders),1)])])])]),e("div",f_,[e("div",h_,[e("div",b_,[e("div",w_,[e("div",$_,[$(S(Se),{class:"w-3 h-3 sm:w-5 sm:h-5 text-diamond-600"})])]),e("div",S_,[_[3]||(_[3]=e("p",{class:"text-xs sm:text-sm font-medium text-gray-500"},"Completed Orders",-1)),e("p",k_,s(p.value.completedOrders),1)])])])]),e("div",C_,[e("div",j_,[e("div",P_,[e("div",I_,[e("div",U_,[$(S(Ne),{class:"w-3 h-3 sm:w-5 sm:h-5 text-warning-600"})])]),e("div",A_,[_[4]||(_[4]=e("p",{class:"text-xs sm:text-sm font-medium text-gray-500"},"Pending Orders",-1)),e("p",O_,s(p.value.pendingOrders),1)])])])]),e("div",q_,[e("div",T_,[e("div",M_,[e("div",F_,[e("div",N_,[$(S(De),{class:"w-3 h-3 sm:w-5 sm:h-5 text-danger-600"})])]),e("div",D_,[_[5]||(_[5]=e("p",{class:"text-xs sm:text-sm font-medium text-gray-500"},"Total Spent",-1)),e("p",E_,"â‚±"+s(p.value.totalSpent.toLocaleString()),1)])])])])]),e("div",V_,[e("div",B_,[_[10]||(_[10]=e("div",{class:"card-header p-3 sm:p-4 lg:p-6"},[e("h3",{class:"text-base sm:text-lg font-semibold text-gray-900"},"Quick Actions")],-1)),e("div",W_,[e("div",L_,[$(D,{to:"/user/products",class:"flex items-center p-3 sm:p-4 bg-gray-50 hover:bg-gray-100 rounded-lg transition-colors duration-200"},{default:ce(()=>[$(S(Ue),{class:"w-4 h-4 sm:w-6 sm:h-6 text-primary-600 flex-shrink-0"}),_[6]||(_[6]=e("div",{class:"ml-2 sm:ml-3"},[e("p",{class:"text-xs sm:text-sm font-medium text-gray-900"},"Browse Products"),e("p",{class:"text-xs sm:text-sm text-gray-500"},"Shop repurposed items")],-1))]),_:1}),$(D,{to:"/user/orders",class:"flex items-center p-3 sm:p-4 bg-gray-50 hover:bg-gray-100 rounded-lg transition-colors duration-200"},{default:ce(()=>[$(S(Fe),{class:"w-4 h-4 sm:w-6 sm:h-6 text-primary-600 flex-shrink-0"}),_[7]||(_[7]=e("div",{class:"ml-2 sm:ml-3"},[e("p",{class:"text-xs sm:text-sm font-medium text-gray-900"},"My Orders"),e("p",{class:"text-xs sm:text-sm text-gray-500"},"View order history")],-1))]),_:1}),$(D,{to:"/user/profile",class:"flex items-center p-3 sm:p-4 bg-gray-50 hover:bg-gray-100 rounded-lg transition-colors duration-200"},{default:ce(()=>[$(S(Pt),{class:"w-4 h-4 sm:w-6 sm:h-6 text-primary-600 flex-shrink-0"}),_[8]||(_[8]=e("div",{class:"ml-2 sm:ml-3"},[e("p",{class:"text-xs sm:text-sm font-medium text-gray-900"},"Profile"),e("p",{class:"text-xs sm:text-sm text-gray-500"},"Manage account")],-1))]),_:1}),$(D,{to:"/user/favorites",class:"flex items-center p-3 sm:p-4 bg-gray-50 hover:bg-gray-100 rounded-lg transition-colors duration-200"},{default:ce(()=>[$(S(Dt),{class:"w-4 h-4 sm:w-6 sm:h-6 text-primary-600 flex-shrink-0"}),_[9]||(_[9]=e("div",{class:"ml-2 sm:ml-3"},[e("p",{class:"text-xs sm:text-sm font-medium text-gray-900"},"Favorites"),e("p",{class:"text-xs sm:text-sm text-gray-500"},"Saved products")],-1))]),_:1})])])]),e("div",Z_,[_[12]||(_[12]=e("div",{class:"card-header p-3 sm:p-4 lg:p-6"},[e("h3",{class:"text-base sm:text-lg font-semibold text-gray-900"},"Recent Orders")],-1)),e("div",R_,[e("div",z_,[(d(!0),c(ne,null,de(n.value,T=>(d(),c("div",{key:T.id,class:"flex items-center justify-between p-2 sm:p-3 bg-gray-50 rounded-lg"},[e("div",J_,[e("div",H_,[T.product.image_url&&!y.value[T.id]?(d(),c("img",{key:0,src:S(Ge)(T.product.image_url),alt:T.product.name,class:"w-8 h-8 sm:w-10 sm:h-10 object-cover rounded",onError:N=>B(T.id),loading:"lazy"},null,40,G_)):(d(),c("div",Q_,[$(S(ge),{class:"w-3 h-3 sm:w-5 sm:h-5 text-gray-400"})]))]),e("div",null,[e("p",K_,s(T.product.name),1),e("p",X_,"Order #"+s(T.id),1)])]),e("div",Y_,[e("span",{class:ae([W(T.status),"text-xs sm:text-sm"])},s(T.status),3),e("p",ef,"â‚±"+s(T.total_price),1)])]))),128))]),e("div",tf,[$(D,{to:"/user/orders",class:"text-primary-600 hover:text-primary-900 text-xs sm:text-sm font-medium"},{default:ce(()=>[..._[11]||(_[11]=[re(" View all orders â†’ ",-1)])]),_:1})])])])]),e("div",sf,[_[14]||(_[14]=e("div",{class:"card-header p-3 sm:p-4 lg:p-6"},[e("h3",{class:"text-base sm:text-lg font-semibold text-gray-900"},"Featured Products")],-1)),e("div",af,[e("div",of,[(d(!0),c(ne,null,de(x.value,T=>(d(),c("div",{key:T.id,class:"bg-white border border-gray-200 rounded-lg overflow-hidden hover:shadow-md transition-shadow duration-200"},[e("div",rf,[T.image_url&&!y.value[T.id]?(d(),c("img",{key:0,src:S(Ge)(T.image_url),alt:T.name,class:"w-full h-24 sm:h-32 object-cover",onError:N=>B(T.id),loading:"lazy"},null,40,lf)):(d(),c("div",nf,[$(S(ge),{class:"w-6 h-6 sm:w-8 sm:h-8 text-gray-400"})]))]),e("div",df,[e("h4",cf,s(T.name),1),e("p",uf,s(T.description),1),e("div",mf,[e("span",pf,"â‚±"+s(T.price),1),_[13]||(_[13]=e("button",{class:"btn-primary text-xs sm:text-sm px-2 sm:px-3 py-1 sm:py-2"},"Add to Cart",-1))])])]))),128))])])])])])}}}),vf={class:"min-h-screen bg-gray-50"},gf={class:"bg-white shadow-sm border-b border-gray-200"},xf={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"},yf={class:"flex items-center justify-between"},_f={class:"flex items-center space-x-4"},ff=["value"],hf={class:"relative"},bf={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},wf={class:"mb-8"},$f={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},Sf=["onClick"],kf={class:"relative"},Cf={class:"w-full h-48 bg-gray-100 rounded-lg flex items-center justify-center overflow-hidden"},jf=["src","alt","onError"],Pf={key:1,class:"w-full h-48 bg-gray-200 rounded-lg flex items-center justify-center"},If={class:"card-body"},Uf={class:"font-semibold text-gray-900 mb-2"},Af={class:"text-gray-600 text-sm mb-3"},Of={class:"flex items-center justify-between"},qf={class:"text-lg font-bold text-primary-600"},Tf={class:"text-sm text-gray-500"},Mf={class:"mb-6"},Ff={class:"flex items-center justify-between mb-4"},Nf={class:"text-xl font-semibold text-gray-900"},Df={class:"flex items-center space-x-2"},Ef={key:0,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6"},Vf=["onClick"],Bf={class:"relative"},Wf={class:"w-full h-48 bg-gray-100 rounded-lg flex items-center justify-center overflow-hidden"},Lf=["src","alt","onError"],Zf={key:1,class:"w-full h-48 bg-gray-200 rounded-lg flex items-center justify-center"},Rf={key:0,class:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center"},zf={class:"card-body"},Jf={class:"font-semibold text-gray-900 mb-2"},Hf={class:"text-gray-600 text-sm mb-3"},Gf={class:"flex items-center justify-between"},Qf={class:"text-lg font-bold text-primary-600"},Kf={class:"text-sm text-gray-500"},Xf={key:1,class:"space-y-4"},Yf=["onClick"],eh={class:"flex"},th={class:"flex-shrink-0"},sh={class:"w-32 h-32 bg-gray-100 rounded-lg flex items-center justify-center overflow-hidden"},ah=["src","alt","onError"],oh={key:1,class:"w-32 h-32 bg-gray-200 rounded-lg flex items-center justify-center"},rh={class:"card-body flex-1"},ih={class:"flex items-start justify-between"},lh={class:"flex-1"},nh={class:"font-semibold text-gray-900 mb-2"},dh={class:"text-gray-600 text-sm mb-3"},ch={class:"flex items-center space-x-4"},uh={class:"text-lg font-bold text-primary-600"},mh={class:"text-sm text-gray-500"},ph={class:"badge-primary"},vh={key:0,class:"ml-4"},gh={class:"mt-8 flex items-center justify-center"},xh={class:"flex items-center space-x-2"},yh=["disabled"],_h={class:"text-sm text-gray-700 px-4"},fh=["disabled"],hh={key:0,class:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50"},bh={class:"relative top-20 mx-auto p-5 border w-full max-w-2xl shadow-lg rounded-md bg-white"},wh={class:"mt-3"},$h={class:"flex items-center justify-between mb-4"},Sh={class:"space-y-6"},kh={class:"text-center"},Ch={class:"w-full h-64 bg-gray-100 rounded-lg flex items-center justify-center overflow-hidden"},jh=["src","alt"],Ph={key:1,class:"w-full h-64 bg-gray-200 rounded-lg flex items-center justify-center"},Ih={class:"space-y-4"},Uh={class:"text-xl font-semibold text-gray-900"},Ah={class:"text-gray-600 mt-2"},Oh={class:"grid grid-cols-2 gap-4"},qh={class:"text-lg font-bold text-primary-600"},Th={class:"text-sm text-gray-900"},Mh={class:"text-sm text-gray-900"},Fh={key:0,class:"border-t pt-6"},Nh={class:"form-group"},Dh={class:"flex items-center space-x-2"},Eh=["max"],Vh={class:"text-sm text-gray-500 mt-1"},Bh={class:"form-group"},Wh={class:"text-lg font-bold text-primary-600"},Lh={class:"form-group"},Zh={class:"space-y-2"},Rh={class:"flex items-center"},zh={class:"flex items-center"},Jh={key:0,class:"form-group"},Hh={class:"form-group"},Gh={class:"form-group"},Qh={class:"flex items-center justify-end space-x-3"},Kh=xe({__name:"ProductCatalogView",setup(o){const a=he(),t=fe(),l=Ie(),y=je(),p=O([]),n=O(""),x=O(""),W=O("grid"),B=O(1),F=O(12),h=O(null),_=O(1),D=O("cash"),g=O(""),T=O(""),N=O(""),v=O({}),m=ie(()=>{let E=p.value;return n.value&&(E=E.filter(Z=>Z.name.toLowerCase().includes(n.value.toLowerCase())||Z.description.toLowerCase().includes(n.value.toLowerCase()))),x.value&&(E=E.filter(Z=>Z.category===x.value)),E}),b=ie(()=>m.value.slice(0,3)),C=ie(()=>{const E=(B.value-1)*F.value,Z=E+F.value;return m.value.slice(E,Z)}),L=ie(()=>Math.ceil(m.value.length/F.value)),M=async()=>{try{await Promise.all([l.loadProducts(),y.loadWasteCategories()]),p.value=l.products}catch(E){console.error("Failed to load products:",E),p.value=[{id:"1",name:"Organic Banana Compost",description:"Rich compost made from overripe bananas, perfect for organic gardening",price:150,category:"compost",image_url:"/images/banana-compost.jpg",stock_quantity:25,unit:"kg",is_available:!0,created_at:"2024-01-15T00:00:00Z",updated_at:"2024-01-15T00:00:00Z"},{id:"2",name:"Tomato Fertilizer",description:"Natural fertilizer derived from bruised tomatoes, rich in nutrients",price:200,category:"fertilizer",image_url:"/images/tomato-fertilizer.jpg",stock_quantity:15,unit:"bags",is_available:!0,created_at:"2024-02-10T00:00:00Z",updated_at:"2024-02-10T00:00:00Z"},{id:"3",name:"Mango Jam",description:"Delicious jam made from damaged mangoes, sweet and natural",price:80,category:"preserved_food",image_url:"/images/mango-jam.jpg",stock_quantity:30,unit:"bottles",is_available:!0,created_at:"2024-03-05T00:00:00Z",updated_at:"2024-03-05T00:00:00Z"},{id:"4",name:"Vegetable Compost",description:"Mixed vegetable compost from various damaged produce",price:120,category:"compost",image_url:"/images/vegetable-compost.jpg",stock_quantity:20,unit:"kg",is_available:!0,created_at:"2024-04-01T00:00:00Z",updated_at:"2024-04-01T00:00:00Z"},{id:"5",name:"Fruit Fertilizer",description:"Nutrient-rich fertilizer made from fruit waste",price:180,category:"fertilizer",image_url:"/images/fruit-fertilizer.jpg",stock_quantity:12,unit:"bags",is_available:!0,created_at:"2024-05-15T00:00:00Z",updated_at:"2024-05-15T00:00:00Z"},{id:"6",name:"Apple Preserves",description:"Sweet preserves made from bruised apples",price:90,category:"preserved_food",image_url:"/images/apple-preserves.jpg",stock_quantity:0,unit:"jars",is_available:!1,created_at:"2024-06-01T00:00:00Z",updated_at:"2024-06-01T00:00:00Z"}]}},r=E=>{h.value=E,_.value=1},w=async()=>{var E,Z;try{if(!h.value)return;if(!t.isAuthenticated){a.error("Please log in to place an order");return}console.log("Current user:",t.user),console.log("User ID:",(E=t.user)==null?void 0:E.id);const R={user_id:((Z=t.user)==null?void 0:Z.id)||"3",product_id:h.value.id,quantity:_.value,total_price:h.value.price*_.value,payment_status:"pending",payment_method:D.value,payment_reference:g.value,delivery_status:"pending",delivery_address:T.value,delivery_notes:N.value,notes:N.value};console.log("Order data:",R);const te=await l.placeOrder(R);console.log("Order created:",te),a.success(`Order placed successfully! ${_.value} ${h.value.unit} of ${h.value.name}`),h.value=null,i()}catch(R){console.error("Order placement error:",R),a.error(R.message||"Failed to place order")}},i=()=>{_.value=1,D.value="cash",g.value="",T.value="",N.value=""},A=E=>{v.value[E]=!0},f=()=>{v.value={}};return Ht(p,()=>{f()},{deep:!0}),_e(()=>{M()}),(E,Z)=>(d(),c("div",vf,[e("div",gf,[e("div",xf,[e("div",yf,[Z[18]||(Z[18]=e("div",null,[e("h1",{class:"text-2xl font-bold text-gray-900"},"Product Catalog"),e("p",{class:"text-gray-600 mt-1"},"Browse repurposed products from agricultural waste")],-1)),e("div",_f,[J(e("select",{"onUpdate:modelValue":Z[0]||(Z[0]=R=>x.value=R),class:"form-input"},[Z[17]||(Z[17]=e("option",{value:""},"All Categories",-1)),(d(!0),c(ne,null,de(S(y).wasteCategories,R=>(d(),c("option",{key:R.id,value:R.name},s(R.name),9,ff))),128))],512),[[ue,x.value]]),e("div",hf,[J(e("input",{"onUpdate:modelValue":Z[1]||(Z[1]=R=>n.value=R),type:"text",placeholder:"Search products...",class:"form-input pl-10"},null,512),[[oe,n.value]]),$(S(Et),{class:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"})])])])])]),e("div",bf,[e("div",wf,[Z[20]||(Z[20]=e("h2",{class:"text-xl font-semibold text-gray-900 mb-4"},"Featured Products",-1)),e("div",$f,[(d(!0),c(ne,null,de(b.value,R=>(d(),c("div",{key:R.id,class:"card hover:shadow-lg transition-shadow cursor-pointer",onClick:te=>r(R)},[e("div",kf,[e("div",Cf,[R.image_url&&!v.value[R.id]?(d(),c("img",{key:0,src:S(Ce)(R.image_url),alt:R.name,class:"w-full h-48 object-cover",onError:te=>A(R.id),loading:"lazy"},null,40,jf)):(d(),c("div",Pf,[$(S(ge),{class:"w-12 h-12 text-gray-400"})]))]),Z[19]||(Z[19]=e("div",{class:"absolute top-2 right-2"},[e("span",{class:"badge-success"},"Featured")],-1))]),e("div",If,[e("h3",Uf,s(R.name),1),e("p",Af,s(R.description),1),e("div",Of,[e("span",qf,"â‚±"+s(R.price),1),e("span",Tf,s(R.stock_quantity)+" "+s(R.unit)+" available",1)])])],8,Sf))),128))])]),e("div",Mf,[e("div",Ff,[e("h2",Nf," All Products ("+s(m.value.length)+") ",1),e("div",Df,[e("button",{onClick:Z[2]||(Z[2]=R=>W.value="grid"),class:ae(["p-2 rounded-md",W.value==="grid"?"bg-primary-100 text-primary-600":"text-gray-400 hover:text-gray-600"])},[$(S(hs),{class:"w-5 h-5"})],2),e("button",{onClick:Z[3]||(Z[3]=R=>W.value="list"),class:ae(["p-2 rounded-md",W.value==="list"?"bg-primary-100 text-primary-600":"text-gray-400 hover:text-gray-600"])},[$(S(fs),{class:"w-5 h-5"})],2)])]),W.value==="grid"?(d(),c("div",Ef,[(d(!0),c(ne,null,de(C.value,R=>(d(),c("div",{key:R.id,class:"card hover:shadow-lg transition-shadow cursor-pointer",onClick:te=>r(R)},[e("div",Bf,[e("div",Wf,[R.image_url&&!v.value[R.id]?(d(),c("img",{key:0,src:S(Ce)(R.image_url),alt:R.name,class:"w-full h-48 object-cover",onError:te=>A(R.id),loading:"lazy"},null,40,Lf)):(d(),c("div",Zf,[$(S(ge),{class:"w-12 h-12 text-gray-400"})]))]),R.is_available?Q("",!0):(d(),c("div",Rf,[...Z[21]||(Z[21]=[e("span",{class:"badge-danger"},"Out of Stock",-1)])]))]),e("div",zf,[e("h3",Jf,s(R.name),1),e("p",Hf,s(R.description),1),e("div",Gf,[e("span",Qf,"â‚±"+s(R.price),1),e("span",Kf,s(R.stock_quantity)+" "+s(R.unit),1)])])],8,Vf))),128))])):(d(),c("div",Xf,[(d(!0),c(ne,null,de(C.value,R=>(d(),c("div",{key:R.id,class:"card hover:shadow-lg transition-shadow cursor-pointer",onClick:te=>r(R)},[e("div",eh,[e("div",th,[e("div",sh,[R.image_url&&!v.value[R.id]?(d(),c("img",{key:0,src:S(Ce)(R.image_url),alt:R.name,class:"w-32 h-32 object-cover",onError:te=>A(R.id),loading:"lazy"},null,40,ah)):(d(),c("div",oh,[$(S(ge),{class:"w-12 h-12 text-gray-400"})]))])]),e("div",rh,[e("div",ih,[e("div",lh,[e("h3",nh,s(R.name),1),e("p",dh,s(R.description),1),e("div",ch,[e("span",uh,"â‚±"+s(R.price),1),e("span",mh,s(R.stock_quantity)+" "+s(R.unit)+" available",1),e("span",ph,s(R.category),1)])]),R.is_available?Q("",!0):(d(),c("div",vh,[...Z[22]||(Z[22]=[e("span",{class:"badge-danger"},"Out of Stock",-1)])]))])])])],8,Yf))),128))])),e("div",gh,[e("div",xh,[e("button",{onClick:Z[4]||(Z[4]=R=>B.value=Math.max(1,B.value-1)),disabled:B.value===1,class:"btn-outline disabled:opacity-50 disabled:cursor-not-allowed"}," Previous ",8,yh),e("span",_h," Page "+s(B.value)+" of "+s(L.value),1),e("button",{onClick:Z[5]||(Z[5]=R=>B.value=Math.min(L.value,B.value+1)),disabled:B.value===L.value,class:"btn-outline disabled:opacity-50 disabled:cursor-not-allowed"}," Next ",8,fh)])])])]),h.value?(d(),c("div",hh,[e("div",bh,[e("div",wh,[e("div",$h,[Z[23]||(Z[23]=e("h3",{class:"text-lg font-medium text-gray-900"},"Product Details",-1)),e("button",{onClick:Z[6]||(Z[6]=R=>h.value=null),class:"text-gray-400 hover:text-gray-600"},[$(S(we),{class:"w-6 h-6"})])]),e("div",Sh,[e("div",kh,[e("div",Ch,[h.value.image_url&&!v.value[h.value.id]?(d(),c("img",{key:0,src:S(Ce)(h.value.image_url),alt:h.value.name,class:"w-full h-64 object-cover",onError:Z[7]||(Z[7]=R=>A(h.value.id))},null,40,jh)):(d(),c("div",Ph,[$(S(ge),{class:"w-16 h-16 text-gray-400"})]))])]),e("div",Ih,[e("div",null,[e("h4",Uh,s(h.value.name),1),e("p",Ah,s(h.value.description),1)]),e("div",Oh,[e("div",null,[Z[24]||(Z[24]=e("label",{class:"text-sm font-medium text-gray-500"},"Price",-1)),e("p",qh,"â‚±"+s(h.value.price),1)]),e("div",null,[Z[25]||(Z[25]=e("label",{class:"text-sm font-medium text-gray-500"},"Category",-1)),e("p",Th,s(h.value.category),1)]),e("div",null,[Z[26]||(Z[26]=e("label",{class:"text-sm font-medium text-gray-500"},"Stock",-1)),e("p",Mh,s(h.value.stock_quantity)+" "+s(h.value.unit),1)]),e("div",null,[Z[27]||(Z[27]=e("label",{class:"text-sm font-medium text-gray-500"},"Availability",-1)),e("span",{class:ae(h.value.is_available?"badge-success":"badge-danger")},s(h.value.is_available?"Available":"Out of Stock"),3)])])]),h.value.is_available?(d(),c("div",Fh,[Z[37]||(Z[37]=e("h4",{class:"font-medium text-gray-900 mb-4"},"Place Order",-1)),e("form",{onSubmit:Pe(w,["prevent"]),class:"space-y-4"},[e("div",Nh,[Z[28]||(Z[28]=e("label",{class:"form-label"},"Quantity",-1)),e("div",Dh,[e("button",{type:"button",onClick:Z[8]||(Z[8]=R=>_.value=Math.max(1,_.value-1)),class:"btn-outline w-10 h-10 flex items-center justify-center"}," - "),J(e("input",{"onUpdate:modelValue":Z[9]||(Z[9]=R=>_.value=R),type:"number",min:"1",max:h.value.stock_quantity,class:"form-input text-center w-20"},null,8,Eh),[[oe,_.value,void 0,{number:!0}]]),e("button",{type:"button",onClick:Z[10]||(Z[10]=R=>_.value=Math.min(h.value.stock_quantity,_.value+1)),class:"btn-outline w-10 h-10 flex items-center justify-center"}," + ")]),e("p",Vh," Maximum: "+s(h.value.stock_quantity)+" "+s(h.value.unit),1)]),e("div",Bh,[Z[29]||(Z[29]=e("label",{class:"form-label"},"Total Amount",-1)),e("p",Wh," â‚±"+s((h.value.price*_.value).toLocaleString()),1)]),e("div",Lh,[Z[32]||(Z[32]=e("label",{class:"form-label"},"Payment Method",-1)),e("div",Zh,[e("label",Rh,[J(e("input",{"onUpdate:modelValue":Z[11]||(Z[11]=R=>D.value=R),type:"radio",value:"cash",class:"mr-2"},null,512),[[Me,D.value]]),Z[30]||(Z[30]=e("span",null,"Cash on Delivery",-1))]),e("label",zh,[J(e("input",{"onUpdate:modelValue":Z[12]||(Z[12]=R=>D.value=R),type:"radio",value:"gcash",class:"mr-2"},null,512),[[Me,D.value]]),Z[31]||(Z[31]=e("span",null,"GCash",-1))])])]),D.value==="gcash"?(d(),c("div",Jh,[Z[33]||(Z[33]=e("label",{class:"form-label"},"GCash Number",-1)),J(e("input",{"onUpdate:modelValue":Z[13]||(Z[13]=R=>g.value=R),type:"tel",placeholder:"09XXXXXXXXX",class:"form-input",pattern:"09[0-9]{9}",required:""},null,512),[[oe,g.value]])])):Q("",!0),e("div",Hh,[Z[34]||(Z[34]=e("label",{class:"form-label"},"Delivery Address",-1)),J(e("textarea",{"onUpdate:modelValue":Z[14]||(Z[14]=R=>T.value=R),rows:"3",placeholder:"Enter your complete delivery address",class:"form-input",required:""},null,512),[[oe,T.value]])]),e("div",Gh,[Z[35]||(Z[35]=e("label",{class:"form-label"},"Delivery Notes (Optional)",-1)),J(e("textarea",{"onUpdate:modelValue":Z[15]||(Z[15]=R=>N.value=R),rows:"2",placeholder:"Any special instructions for delivery",class:"form-input"},null,512),[[oe,N.value]])]),e("div",Qh,[e("button",{type:"button",onClick:Z[16]||(Z[16]=R=>h.value=null),class:"btn-outline"}," Cancel "),Z[36]||(Z[36]=e("button",{type:"submit",class:"btn-primary"}," Place Order ",-1))])],32)])):Q("",!0)])])])])):Q("",!0)]))}}),Xh={class:"min-h-screen bg-gray-50"},Yh={class:"bg-white shadow-sm border-b border-gray-200"},e2={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"},t2={class:"flex items-center justify-between"},s2={class:"flex items-center space-x-4"},a2={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},o2={class:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8"},r2={class:"card"},i2={class:"card-body"},l2={class:"flex items-center"},n2={class:"flex-shrink-0"},d2={class:"w-8 h-8 bg-warning-100 rounded-lg flex items-center justify-center"},c2={class:"ml-4"},u2={class:"text-2xl font-semibold text-gray-900"},m2={class:"card"},p2={class:"card-body"},v2={class:"flex items-center"},g2={class:"flex-shrink-0"},x2={class:"w-8 h-8 bg-primary-100 rounded-lg flex items-center justify-center"},y2={class:"ml-4"},_2={class:"text-2xl font-semibold text-gray-900"},f2={class:"card"},h2={class:"card-body"},b2={class:"flex items-center"},w2={class:"flex-shrink-0"},$2={class:"w-8 h-8 bg-success-100 rounded-lg flex items-center justify-center"},S2={class:"ml-4"},k2={class:"text-2xl font-semibold text-gray-900"},C2={class:"card"},j2={class:"card-body"},P2={class:"flex items-center"},I2={class:"flex-shrink-0"},U2={class:"w-8 h-8 bg-info-100 rounded-lg flex items-center justify-center"},A2={class:"ml-4"},O2={class:"text-2xl font-semibold text-gray-900"},q2={class:"card"},T2={class:"card-header"},M2={class:"text-lg font-semibold text-gray-900"},F2={class:"overflow-x-auto"},N2={class:"min-w-full divide-y divide-gray-200"},D2={class:"bg-white divide-y divide-gray-200"},E2={class:"px-6 py-4 whitespace-nowrap"},V2={class:"text-sm font-medium text-gray-900"},B2={class:"text-sm text-gray-500"},W2={class:"px-6 py-4 whitespace-nowrap"},L2={class:"flex items-center"},Z2={class:"flex-shrink-0 h-10 w-10"},R2={class:"h-10 w-10 bg-gray-100 rounded flex items-center justify-center overflow-hidden"},z2=["src","alt","onError"],J2={key:1,class:"h-10 w-10 bg-gray-200 rounded flex items-center justify-center"},H2={class:"ml-4"},G2={class:"text-sm font-medium text-gray-900"},Q2={class:"text-sm text-gray-500"},K2={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},X2={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Y2={class:"px-6 py-4 whitespace-nowrap"},eb={class:"px-6 py-4 whitespace-nowrap"},tb={class:"flex flex-col space-y-1"},sb={class:"text-xs text-gray-500"},ab={class:"px-6 py-4 whitespace-nowrap"},ob={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},rb={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},ib={class:"flex items-center space-x-2"},lb=["onClick"],nb=["onClick"],db={class:"card-footer"},cb={class:"flex items-center justify-between"},ub={class:"text-sm text-gray-700"},mb={class:"flex items-center space-x-2"},pb=["disabled"],vb={class:"text-sm text-gray-700"},gb=["disabled"],xb={key:0,class:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50"},yb={class:"relative top-20 mx-auto p-5 border w-full max-w-2xl shadow-lg rounded-md bg-white"},_b={class:"mt-3"},fb={class:"flex items-center justify-between mb-4"},hb={class:"space-y-6"},bb={class:"grid grid-cols-2 gap-4"},wb={class:"text-sm text-gray-900"},$b={class:"text-sm text-gray-900"},Sb={class:"text-sm text-gray-900"},kb={class:"border-t pt-4"},Cb={class:"flex items-center space-x-4"},jb={class:"w-16 h-16 bg-gray-100 rounded-lg flex items-center justify-center overflow-hidden"},Pb=["src","alt"],Ib={key:1,class:"w-16 h-16 bg-gray-200 rounded-lg flex items-center justify-center"},Ub={class:"flex-1"},Ab={class:"font-medium text-gray-900"},Ob={class:"text-sm text-gray-500"},qb={class:"flex items-center space-x-4 mt-2"},Tb={class:"text-sm text-gray-500"},Mb={class:"text-sm text-gray-500"},Fb={class:"border-t pt-4"},Nb={class:"space-y-2"},Db={class:"flex justify-between text-sm"},Eb={class:"text-gray-900"},Vb={class:"flex justify-between text-sm font-medium border-t pt-2"},Bb={class:"text-gray-900"},Wb={key:0,class:"border-t pt-4"},Lb={class:"text-sm text-gray-900"},Zb={class:"border-t pt-4"},Rb={class:"space-y-3"},zb={class:"flex items-center space-x-3"},Jb={class:"text-xs text-gray-500"},Hb={key:0,class:"flex items-center space-x-3"},Gb={key:1,class:"flex items-center space-x-3"},Qb={key:2,class:"flex items-center space-x-3"},Kb={class:"text-xs text-gray-500"},Xb=xe({__name:"OrderHistoryView",setup(o){const a=he(),t=fe(),l=Ie(),y=O([]),p=O(""),n=O(1),x=O(10),W=O(null),B=O({}),F=O({pending:0,processing:0,delivered:0,totalSpent:0}),h=ie(()=>{let M=y.value;return p.value&&(M=M.filter(r=>r.status===p.value)),M.sort((r,w)=>new Date(w.order_date).getTime()-new Date(r.order_date).getTime())}),_=ie(()=>{const M=(n.value-1)*x.value,r=M+x.value;return h.value.slice(M,r)}),D=ie(()=>Math.ceil(h.value.length/x.value)),g=async()=>{var M,r,w,i,A,f,E,Z,R,te,pe,ee,U,le,Y,H,q,P,G,k,ye,u,I,j,X,z;try{if(!t.isAuthenticated){console.log("User not authenticated, using fallback data"),y.value=[],F.value={pending:y.value.filter(V=>V.status==="pending").length,processing:y.value.filter(V=>["confirmed","processing","shipped"].includes(V.status)).length,delivered:y.value.filter(V=>V.status==="delivered").length,totalSpent:y.value.reduce((V,be)=>V+be.total_price,0)};return}console.log("Loading orders for user:",t.user),console.log("User ID:",(M=t.user)==null?void 0:M.id),await l.loadOrders();const K=((r=t.user)==null?void 0:r.id)!=null?String(t.user.id):"",se=l.orders.filter(V=>String(V.user_id)===K);y.value=se,F.value={pending:se.filter(V=>V.status==="pending").length,processing:se.filter(V=>["confirmed","processing","shipped"].includes(V.status)).length,delivered:se.filter(V=>V.status==="delivered").length,totalSpent:se.reduce((V,be)=>V+be.total_price,0)}}catch(K){console.error("Failed to load orders:",K),y.value=[{id:"ORD-001",user_id:((w=t.user)==null?void 0:w.id)||"3",product_id:"1",quantity:2,total_price:300,status:"pending",payment_status:"pending",payment_method:"gcash",payment_reference:"09123456789",delivery_status:"pending",delivery_address:"Residential Area, Butuan City",delivery_notes:"Please deliver in the morning",order_date:"2024-12-15T10:30:00Z",notes:"Please deliver in the morning",user:{id:((i=t.user)==null?void 0:i.id)||"3",email:((A=t.user)==null?void 0:A.email)||"user@anihan.com",full_name:((f=t.user)==null?void 0:f.full_name)||"Pedro Garcia",role:"user",phone:((E=t.user)==null?void 0:E.phone)||"+63 912 345 6786",address:((Z=t.user)==null?void 0:Z.address)||"Residential Area, Butuan City",created_at:"2024-01-15T00:00:00Z",updated_at:"2024-01-15T00:00:00Z",is_active:!0},product:{id:"1",name:"Organic Banana Compost",description:"Rich compost made from overripe bananas",price:150,category:"compost",image_url:"/images/banana-compost.jpg",stock_quantity:25,unit:"kg",is_available:!0,created_at:"2024-01-15T00:00:00Z",updated_at:"2024-01-15T00:00:00Z"}},{id:"ORD-002",user_id:((R=t.user)==null?void 0:R.id)||"3",product_id:"3",quantity:1,total_price:80,status:"processing",payment_status:"paid",payment_method:"cash",payment_reference:"CASH-001",delivery_status:"assigned",delivery_address:"Residential Area, Butuan City",delivery_notes:"Rush order",order_date:"2024-12-14T16:45:00Z",notes:"",user:{id:((te=t.user)==null?void 0:te.id)||"3",email:((pe=t.user)==null?void 0:pe.email)||"user@anihan.com",full_name:((ee=t.user)==null?void 0:ee.full_name)||"Pedro Garcia",role:"user",phone:((U=t.user)==null?void 0:U.phone)||"+63 912 345 6786",address:((le=t.user)==null?void 0:le.address)||"Residential Area, Butuan City",created_at:"2024-01-15T00:00:00Z",updated_at:"2024-01-15T00:00:00Z",is_active:!0},product:{id:"3",name:"Mango Jam",description:"Delicious jam made from damaged mangoes",price:80,category:"preserved_food",image_url:"/images/mango-jam.jpg",stock_quantity:30,unit:"bottles",is_available:!0,created_at:"2024-03-05T00:00:00Z",updated_at:"2024-03-05T00:00:00Z"}},{id:"ORD-003",user_id:((Y=t.user)==null?void 0:Y.id)||"3",product_id:"2",quantity:3,total_price:600,status:"delivered",payment_status:"paid",payment_method:"gcash",payment_reference:"09123456789",delivery_status:"delivered",delivery_address:"Residential Area, Butuan City",delivery_notes:"Delivered successfully",order_date:"2024-12-10T09:15:00Z",delivery_date:"2024-12-12T14:30:00Z",notes:"Rush order needed",user:{id:((H=t.user)==null?void 0:H.id)||"3",email:((q=t.user)==null?void 0:q.email)||"user@anihan.com",full_name:((P=t.user)==null?void 0:P.full_name)||"Pedro Garcia",role:"user",phone:((G=t.user)==null?void 0:G.phone)||"+63 912 345 6786",address:((k=t.user)==null?void 0:k.address)||"Residential Area, Butuan City",created_at:"2024-01-15T00:00:00Z",updated_at:"2024-01-15T00:00:00Z",is_active:!0},product:{id:"2",name:"Tomato Fertilizer",description:"Natural fertilizer derived from bruised tomatoes",price:200,category:"fertilizer",image_url:"/images/tomato-fertilizer.jpg",stock_quantity:15,unit:"bags",is_available:!0,created_at:"2024-02-10T00:00:00Z",updated_at:"2024-02-10T00:00:00Z"}},{id:"ORD-004",user_id:((ye=t.user)==null?void 0:ye.id)||"3",product_id:"4",quantity:1,total_price:120,status:"shipped",payment_status:"paid",payment_method:"cash",payment_reference:"CASH-002",delivery_status:"in_transit",delivery_address:"Residential Area, Butuan City",delivery_notes:"Regular delivery",order_date:"2024-12-08T11:20:00Z",notes:"",user:{id:((u=t.user)==null?void 0:u.id)||"3",email:((I=t.user)==null?void 0:I.email)||"user@anihan.com",full_name:((j=t.user)==null?void 0:j.full_name)||"Pedro Garcia",role:"user",phone:((X=t.user)==null?void 0:X.phone)||"+63 912 345 6786",address:((z=t.user)==null?void 0:z.address)||"Residential Area, Butuan City",created_at:"2024-01-15T00:00:00Z",updated_at:"2024-01-15T00:00:00Z",is_active:!0},product:{id:"4",name:"Vegetable Compost",description:"Mixed vegetable compost from various damaged produce",price:120,category:"compost",image_url:"/images/vegetable-compost.jpg",stock_quantity:20,unit:"kg",is_available:!0,created_at:"2024-04-01T00:00:00Z",updated_at:"2024-04-01T00:00:00Z"}}],F.value={pending:y.value.filter(se=>se.status==="pending").length,processing:y.value.filter(se=>["confirmed","processing","shipped"].includes(se.status)).length,delivered:y.value.filter(se=>se.status==="delivered").length,totalSpent:y.value.reduce((se,V)=>se+V.total_price,0)}}},T=M=>{W.value=M},N=async M=>{try{await new Promise(w=>setTimeout(w,500));const r=y.value.find(w=>w.id===M);r&&(r.status="cancelled"),a.success("Order cancelled successfully"),g()}catch{a.error("Failed to cancel order")}},v=M=>({pending:"badge-warning",confirmed:"badge-primary",processing:"badge-primary",shipped:"badge-primary",delivered:"badge-success",cancelled:"badge-danger"})[M]||"badge-gray",m=M=>({pending:"badge-warning",paid:"badge-success",failed:"badge-danger",refunded:"badge-info"})[M]||"badge-gray",b=M=>({pending:"badge-warning",assigned:"badge-info",picked_up:"badge-primary",in_transit:"badge-secondary",delivered:"badge-success",failed:"badge-danger"})[M]||"badge-gray",C=M=>new Date(M).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),L=M=>{B.value[M]=!0};return _e(()=>{g()}),(M,r)=>{var w,i,A,f,E,Z,R;return d(),c("div",Xh,[e("div",Yh,[e("div",e2,[e("div",t2,[r[6]||(r[6]=e("div",null,[e("h1",{class:"text-2xl font-bold text-gray-900"},"Order History"),e("p",{class:"text-gray-600 mt-1"},"Track your orders and their status")],-1)),e("div",s2,[J(e("select",{"onUpdate:modelValue":r[0]||(r[0]=te=>p.value=te),class:"form-input"},[...r[5]||(r[5]=[me('<option value="">All Status</option><option value="pending">Pending</option><option value="confirmed">Confirmed</option><option value="processing">Processing</option><option value="shipped">Shipped</option><option value="delivered">Delivered</option><option value="cancelled">Cancelled</option>',7)])],512),[[ue,p.value]])])])])]),e("div",a2,[e("div",o2,[e("div",r2,[e("div",i2,[e("div",l2,[e("div",n2,[e("div",d2,[$(S(Ne),{class:"w-5 h-5 text-warning-600"})])]),e("div",c2,[r[7]||(r[7]=e("p",{class:"text-sm font-medium text-gray-500"},"Pending",-1)),e("p",u2,s(F.value.pending),1)])])])]),e("div",m2,[e("div",p2,[e("div",v2,[e("div",g2,[e("div",x2,[$(S(Ke),{class:"w-5 h-5 text-primary-600"})])]),e("div",y2,[r[8]||(r[8]=e("p",{class:"text-sm font-medium text-gray-500"},"Processing",-1)),e("p",_2,s(F.value.processing),1)])])])]),e("div",f2,[e("div",h2,[e("div",b2,[e("div",w2,[e("div",$2,[$(S(Se),{class:"w-5 h-5 text-success-600"})])]),e("div",S2,[r[9]||(r[9]=e("p",{class:"text-sm font-medium text-gray-500"},"Delivered",-1)),e("p",k2,s(F.value.delivered),1)])])])]),e("div",C2,[e("div",j2,[e("div",P2,[e("div",I2,[e("div",U2,[$(S(De),{class:"w-5 h-5 text-info-600"})])]),e("div",A2,[r[10]||(r[10]=e("p",{class:"text-sm font-medium text-gray-500"},"Total Spent",-1)),e("p",O2,"â‚±"+s(F.value.totalSpent.toLocaleString()),1)])])])])]),e("div",q2,[e("div",T2,[e("h3",M2," My Orders ("+s(h.value.length)+") ",1)]),e("div",F2,[e("table",N2,[r[11]||(r[11]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Order "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Product "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Quantity "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Amount "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Status "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Payment "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Delivery "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Order Date "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Actions ")])],-1)),e("tbody",D2,[(d(!0),c(ne,null,de(_.value,te=>{var pe,ee,U,le,Y,H,q,P;return d(),c("tr",{key:te.id,class:"hover:bg-gray-50"},[e("td",E2,[e("div",V2,"#"+s(te.id),1),e("div",B2,s(C(te.order_date)),1)]),e("td",W2,[e("div",L2,[e("div",Z2,[e("div",R2,[(pe=te.product)!=null&&pe.image_url&&!B.value[te.id]?(d(),c("img",{key:0,src:S(Ce)((ee=te.product)==null?void 0:ee.image_url),alt:(U=te.product)==null?void 0:U.name,class:"h-10 w-10 object-cover rounded",onError:G=>L(te.id),loading:"lazy"},null,40,z2)):(d(),c("div",J2,[$(S(ge),{class:"w-5 h-5 text-gray-400"})]))])]),e("div",H2,[e("div",G2,s((le=te.product)==null?void 0:le.name),1),e("div",Q2,s((Y=te.product)==null?void 0:Y.category),1)])])]),e("td",K2,s(te.quantity)+" "+s((H=te.product)==null?void 0:H.unit),1),e("td",X2," â‚±"+s(te.total_price.toLocaleString()),1),e("td",Y2,[e("span",{class:ae(v(te.status))},s(te.status),3)]),e("td",eb,[e("div",tb,[e("span",{class:ae(m(te.payment_status))},s(te.payment_status),3),e("span",sb,s((q=te.payment_method)==null?void 0:q.toUpperCase()),1)])]),e("td",ab,[e("span",{class:ae(b(te.delivery_status))},s((P=te.delivery_status)==null?void 0:P.replace("_"," ")),3)]),e("td",ob,s(C(te.order_date)),1),e("td",rb,[e("div",ib,[e("button",{onClick:G=>T(te),class:"text-primary-600 hover:text-primary-900"}," View ",8,lb),te.status==="pending"?(d(),c("button",{key:0,onClick:G=>N(te.id),class:"text-danger-600 hover:text-danger-900"}," Cancel ",8,nb)):Q("",!0)])])])}),128))])])]),e("div",db,[e("div",cb,[e("div",ub," Showing "+s((n.value-1)*x.value+1)+" to "+s(Math.min(n.value*x.value,h.value.length))+" of "+s(h.value.length)+" results ",1),e("div",mb,[e("button",{onClick:r[1]||(r[1]=te=>n.value=Math.max(1,n.value-1)),disabled:n.value===1,class:"btn-outline disabled:opacity-50 disabled:cursor-not-allowed"}," Previous ",8,pb),e("span",vb," Page "+s(n.value)+" of "+s(D.value),1),e("button",{onClick:r[2]||(r[2]=te=>n.value=Math.min(D.value,n.value+1)),disabled:n.value===D.value,class:"btn-outline disabled:opacity-50 disabled:cursor-not-allowed"}," Next ",8,gb)])])])])]),W.value?(d(),c("div",xb,[e("div",yb,[e("div",_b,[e("div",fb,[r[12]||(r[12]=e("h3",{class:"text-lg font-medium text-gray-900"},"Order Details",-1)),e("button",{onClick:r[3]||(r[3]=te=>W.value=null),class:"text-gray-400 hover:text-gray-600"},[$(S(we),{class:"w-6 h-6"})])]),e("div",hb,[e("div",bb,[e("div",null,[r[13]||(r[13]=e("label",{class:"text-sm font-medium text-gray-500"},"Order Number",-1)),e("p",wb,"#"+s(W.value.id),1)]),e("div",null,[r[14]||(r[14]=e("label",{class:"text-sm font-medium text-gray-500"},"Status",-1)),e("span",{class:ae(v(W.value.status))},s(W.value.status),3)]),e("div",null,[r[15]||(r[15]=e("label",{class:"text-sm font-medium text-gray-500"},"Order Date",-1)),e("p",$b,s(C(W.value.order_date)),1)]),e("div",null,[r[16]||(r[16]=e("label",{class:"text-sm font-medium text-gray-500"},"Delivery Date",-1)),e("p",Sb,s(W.value.delivery_date?C(W.value.delivery_date):"TBD"),1)])]),e("div",kb,[r[17]||(r[17]=e("h4",{class:"font-medium text-gray-900 mb-3"},"Product Information",-1)),e("div",Cb,[e("div",jb,[(w=W.value.product)!=null&&w.image_url&&!B.value[W.value.id]?(d(),c("img",{key:0,src:S(Ce)((i=W.value.product)==null?void 0:i.image_url),alt:(A=W.value.product)==null?void 0:A.name,class:"w-16 h-16 object-cover rounded-lg",onError:r[4]||(r[4]=te=>L(W.value.id))},null,40,Pb)):(d(),c("div",Ib,[$(S(ge),{class:"w-8 h-8 text-gray-400"})]))]),e("div",Ub,[e("h5",Ab,s((f=W.value.product)==null?void 0:f.name),1),e("p",Ob,s((E=W.value.product)==null?void 0:E.description),1),e("div",qb,[e("span",Tb,"Quantity: "+s(W.value.quantity),1),e("span",Mb,"Unit Price: â‚±"+s((Z=W.value.product)==null?void 0:Z.price),1)])])])]),e("div",Fb,[r[21]||(r[21]=e("h4",{class:"font-medium text-gray-900 mb-3"},"Order Summary",-1)),e("div",Nb,[e("div",Db,[r[18]||(r[18]=e("span",{class:"text-gray-500"},"Subtotal",-1)),e("span",Eb,"â‚±"+s((((R=W.value.product)==null?void 0:R.price)||0)*W.value.quantity),1)]),r[20]||(r[20]=e("div",{class:"flex justify-between text-sm"},[e("span",{class:"text-gray-500"},"Shipping"),e("span",{class:"text-gray-900"},"â‚±0")],-1)),e("div",Vb,[r[19]||(r[19]=e("span",{class:"text-gray-900"},"Total",-1)),e("span",Bb,"â‚±"+s(W.value.total_price.toLocaleString()),1)])])]),W.value.notes?(d(),c("div",Wb,[r[22]||(r[22]=e("h4",{class:"font-medium text-gray-900 mb-2"},"Notes",-1)),e("p",Lb,s(W.value.notes),1)])):Q("",!0),e("div",Zb,[r[29]||(r[29]=e("h4",{class:"font-medium text-gray-900 mb-3"},"Order Timeline",-1)),e("div",Rb,[e("div",zb,[r[24]||(r[24]=e("div",{class:"w-3 h-3 bg-success-500 rounded-full"},null,-1)),e("div",null,[r[23]||(r[23]=e("p",{class:"text-sm font-medium text-gray-900"},"Order Placed",-1)),e("p",Jb,s(C(W.value.order_date)),1)])]),["confirmed","processing","shipped","delivered"].includes(W.value.status)?(d(),c("div",Hb,[...r[25]||(r[25]=[e("div",{class:"w-3 h-3 bg-success-500 rounded-full"},null,-1),e("div",null,[e("p",{class:"text-sm font-medium text-gray-900"},"Order Confirmed"),e("p",{class:"text-xs text-gray-500"},"Processing your order")],-1)])])):Q("",!0),["shipped","delivered"].includes(W.value.status)?(d(),c("div",Gb,[...r[26]||(r[26]=[e("div",{class:"w-3 h-3 bg-success-500 rounded-full"},null,-1),e("div",null,[e("p",{class:"text-sm font-medium text-gray-900"},"Order Shipped"),e("p",{class:"text-xs text-gray-500"},"On its way to you")],-1)])])):Q("",!0),W.value.status==="delivered"?(d(),c("div",Qb,[r[28]||(r[28]=e("div",{class:"w-3 h-3 bg-success-500 rounded-full"},null,-1)),e("div",null,[r[27]||(r[27]=e("p",{class:"text-sm font-medium text-gray-900"},"Order Delivered",-1)),e("p",Kb,s(C(W.value.delivery_date||"")),1)])])):Q("",!0)])])])])])])):Q("",!0)])}}}),Yb={class:"min-h-screen bg-gray-50"},e5={class:"bg-white shadow-sm border-b border-gray-200"},t5={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 sm:py-6"},s5={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between"},a5={class:"flex items-center space-x-4"},o5={class:"text-right"},r5={class:"text-xs sm:text-sm text-gray-500"},i5={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 sm:py-6 lg:py-8"},l5={class:"grid grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4 lg:gap-6 mb-6 sm:mb-8"},n5={class:"card"},d5={class:"card-body p-3 sm:p-4 lg:p-6"},c5={class:"flex items-center"},u5={class:"flex-shrink-0"},m5={class:"w-6 h-6 sm:w-8 sm:h-8 bg-violet-100 rounded-lg flex items-center justify-center"},p5={class:"ml-2 sm:ml-4"},v5={class:"text-lg sm:text-xl lg:text-2xl font-semibold text-gray-900"},g5={class:"card"},x5={class:"card-body"},y5={class:"flex items-center"},_5={class:"flex-shrink-0"},f5={class:"w-8 h-8 bg-emerald-100 rounded-lg flex items-center justify-center"},h5={class:"ml-4"},b5={class:"text-2xl font-semibold text-gray-900"},w5={class:"card"},$5={class:"card-body"},S5={class:"flex items-center"},k5={class:"flex-shrink-0"},C5={class:"w-8 h-8 bg-warning-100 rounded-lg flex items-center justify-center"},j5={class:"ml-4"},P5={class:"text-2xl font-semibold text-gray-900"},I5={class:"card"},U5={class:"card-body"},A5={class:"flex items-center"},O5={class:"flex-shrink-0"},q5={class:"w-8 h-8 bg-danger-100 rounded-lg flex items-center justify-center"},T5={class:"ml-4"},M5={class:"text-2xl font-semibold text-gray-900"},F5={class:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8"},N5={class:"card"},D5={class:"card-body"},E5={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},V5={class:"card"},B5={class:"card-body"},W5={class:"space-y-4"},L5={class:"flex items-center space-x-3"},Z5={class:"w-10 h-10 bg-gray-100 rounded flex items-center justify-center overflow-hidden"},R5=["src","alt","onError"],z5={key:1,class:"w-10 h-10 bg-gray-200 rounded flex items-center justify-center"},J5={class:"text-sm font-medium text-gray-900"},H5={class:"text-xs text-gray-500"},G5={class:"text-right"},Q5={class:"text-xs text-gray-500 mt-1"},K5={class:"mt-4"},X5={class:"card"},Y5={class:"card-body"},ew={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},tw={class:"text-center"},sw={class:"w-full h-48 mx-auto mb-3 bg-gray-100 rounded-lg flex items-center justify-center overflow-hidden"},aw=["src","alt"],ow={class:"font-medium text-gray-900"},rw={class:"text-sm text-gray-500 mt-1"},iw={class:"mt-2"},lw={class:"badge-primary text-xs"},nw={class:"badge-warning text-xs ml-1"},dw=xe({__name:"DashboardView",setup(o){const a=fe(),t=je(),l=ie(()=>a.user),y=O(!1),p=O({}),n=O({wasteSubmissions:0,processedItems:0,pendingApproval:0,earnings:0}),x=O([]),W=O([]),B=D=>({pending:"badge-warning",approved:"badge-primary",processed:"badge-success",rejected:"badge-danger"})[D]||"badge-gray",F=D=>new Date(D).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),h=D=>{p.value[D]=!0},_=async()=>{y.value=!0;try{await Promise.all([t.loadSourceWasteSubmissions(),t.loadWasteCategories(),t.loadWasteTypes()]);const D=t.sourceWasteSubmissions.filter(g=>{var T;return String(g.vendor_id)===String((T=l.value)==null?void 0:T.id)});n.value={wasteSubmissions:D.length,processedItems:D.filter(g=>g.status==="processed").length,pendingApproval:D.filter(g=>g.status==="pending").length,earnings:D.filter(g=>g.status==="processed").length*150},x.value=D.slice(0,5).map(g=>({id:g.id,waste_type:{name:g.title,image_url:g.image_url||"/placeholder-image.svg"},quantity:g.quantity,unit:g.unit,status:g.status,submitted_at:g.submitted_at})),W.value=t.wasteTypes.map(g=>({id:g.id,name:g.name,description:g.description,image_url:g.image_url||"/placeholder-image.svg",category:g.category,damage_level:g.damage_level}))}catch(D){console.error("Failed to load stats:",D)}finally{y.value=!1}};return _e(()=>{_()}),(D,g)=>{var N,v;const T=Te("router-link");return d(),c("div",Yb,[e("div",e5,[e("div",t5,[e("div",s5,[g[2]||(g[2]=e("div",{class:"mb-2 sm:mb-0"},[e("h1",{class:"text-xl sm:text-2xl font-bold text-gray-900"},"Vendor Dashboard"),e("p",{class:"text-sm sm:text-base text-gray-600 mt-1"},"Manage your agricultural waste and products")],-1)),e("div",a5,[e("div",o5,[e("p",r5,"Welcome, "+s(((N=l.value)==null?void 0:N.email)||((v=l.value)==null?void 0:v.full_name)||"Vendor"),1),g[1]||(g[1]=e("p",{class:"text-xs sm:text-sm text-gray-500"},"Vendor",-1))])])])])]),e("div",i5,[e("div",l5,[e("div",n5,[e("div",d5,[e("div",c5,[e("div",u5,[e("div",m5,[$(S(Fe),{class:"w-3 h-3 sm:w-5 sm:h-5 text-violet-600"})])]),e("div",p5,[g[3]||(g[3]=e("p",{class:"text-xs sm:text-sm font-medium text-gray-500"},"Waste Submissions",-1)),e("p",v5,s(n.value.wasteSubmissions),1)])])])]),e("div",g5,[e("div",x5,[e("div",y5,[e("div",_5,[e("div",f5,[$(S(Se),{class:"w-5 h-5 text-emerald-600"})])]),e("div",h5,[g[4]||(g[4]=e("p",{class:"text-sm font-medium text-gray-500"},"Processed Items",-1)),e("p",b5,s(n.value.processedItems),1)])])])]),e("div",w5,[e("div",$5,[e("div",S5,[e("div",k5,[e("div",C5,[$(S(Ne),{class:"w-5 h-5 text-warning-600"})])]),e("div",j5,[g[5]||(g[5]=e("p",{class:"text-sm font-medium text-gray-500"},"Pending Approval",-1)),e("p",P5,s(n.value.pendingApproval),1)])])])]),e("div",I5,[e("div",U5,[e("div",A5,[e("div",O5,[e("div",q5,[$(S(De),{class:"w-5 h-5 text-danger-600"})])]),e("div",T5,[g[6]||(g[6]=e("p",{class:"text-sm font-medium text-gray-500"},"Earnings",-1)),e("p",M5,"â‚±"+s(n.value.earnings.toLocaleString()),1)])])])])]),e("div",F5,[e("div",N5,[g[11]||(g[11]=e("div",{class:"card-header"},[e("h3",{class:"text-lg font-semibold text-gray-900"},"Quick Actions")],-1)),e("div",D5,[e("div",E5,[$(T,{to:"/vendor/source-submissions",class:"flex items-center p-4 bg-gray-50 hover:bg-gray-100 rounded-lg transition-colors duration-200"},{default:ce(()=>[$(S(qe),{class:"w-6 h-6 text-primary-600"}),g[7]||(g[7]=e("div",{class:"ml-3"},[e("p",{class:"text-sm font-medium text-gray-900"},"Submit Waste"),e("p",{class:"text-sm text-gray-500"},"Report agricultural waste")],-1))]),_:1}),$(T,{to:"/vendor/source-submissions",class:"flex items-center p-4 bg-gray-50 hover:bg-gray-100 rounded-lg transition-colors duration-200"},{default:ce(()=>[$(S(Fe),{class:"w-6 h-6 text-primary-600"}),g[8]||(g[8]=e("div",{class:"ml-3"},[e("p",{class:"text-sm font-medium text-gray-900"},"My Submissions"),e("p",{class:"text-sm text-gray-500"},"View submission history")],-1))]),_:1}),$(T,{to:"/vendor/products",class:"flex items-center p-4 bg-gray-50 hover:bg-gray-100 rounded-lg transition-colors duration-200"},{default:ce(()=>[$(S(ge),{class:"w-6 h-6 text-primary-600"}),g[9]||(g[9]=e("div",{class:"ml-3"},[e("p",{class:"text-sm font-medium text-gray-900"},"My Products"),e("p",{class:"text-sm text-gray-500"},"Manage products")],-1))]),_:1}),$(T,{to:"/vendor/profile",class:"flex items-center p-4 bg-gray-50 hover:bg-gray-100 rounded-lg transition-colors duration-200"},{default:ce(()=>[$(S(Pt),{class:"w-6 h-6 text-primary-600"}),g[10]||(g[10]=e("div",{class:"ml-3"},[e("p",{class:"text-sm font-medium text-gray-900"},"Profile"),e("p",{class:"text-sm text-gray-500"},"Manage account")],-1))]),_:1})])])]),e("div",V5,[g[13]||(g[13]=e("div",{class:"card-header"},[e("h3",{class:"text-lg font-semibold text-gray-900"},"Recent Submissions")],-1)),e("div",B5,[e("div",W5,[(d(!0),c(ne,null,de(x.value,m=>(d(),c("div",{key:m.id,class:"flex items-center justify-between p-3 bg-gray-50 rounded-lg"},[e("div",L5,[e("div",Z5,[m.waste_type.image_url&&!p.value[m.id]?(d(),c("img",{key:0,src:S(Ge)(m.waste_type.image_url),alt:m.waste_type.name,class:"w-10 h-10 object-cover rounded",onError:b=>h(m.id),loading:"lazy"},null,40,R5)):(d(),c("div",z5,[$(S(ge),{class:"w-5 h-5 text-gray-400"})]))]),e("div",null,[e("p",J5,s(m.waste_type.name),1),e("p",H5,s(m.quantity)+" "+s(m.unit),1)])]),e("div",G5,[e("span",{class:ae(B(m.status))},s(m.status),3),e("p",Q5,s(F(m.submitted_at)),1)])]))),128))]),e("div",K5,[$(T,{to:"/vendor/source-submissions",class:"text-primary-600 hover:text-primary-900 text-sm font-medium"},{default:ce(()=>[...g[12]||(g[12]=[re(" View all submissions â†’ ",-1)])]),_:1})])])])]),e("div",X5,[g[14]||(g[14]=e("div",{class:"card-header"},[e("h3",{class:"text-lg font-semibold text-gray-900"},"Waste Types Guide")],-1)),e("div",Y5,[e("div",ew,[(d(!0),c(ne,null,de(W.value,m=>(d(),c("div",{key:m.id,class:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow duration-200"},[e("div",tw,[e("div",sw,[e("img",{src:S(Ge)(m.image_url),alt:m.name,class:"w-full h-full object-cover rounded",onError:g[0]||(g[0]=b=>{b.target.src="/placeholder-image.svg"}),loading:"lazy"},null,40,aw)]),e("h4",ow,s(m.name),1),e("p",rw,s(m.description),1),e("div",iw,[e("span",lw,s(m.category),1),e("span",nw,s(m.damage_level),1)])])]))),128))])])])])])}}}),cw={class:"min-h-screen bg-gray-50"},uw={class:"bg-white shadow-sm border-b border-gray-200"},mw={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"},pw={class:"flex items-center justify-between"},vw={class:"flex items-center space-x-3"},gw={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},xw={class:"card mb-8"},yw={class:"card-header"},_w={class:"flex items-center justify-between"},fw={class:"text-lg font-semibold text-gray-900"},hw={class:"flex items-center space-x-4"},bw=["value"],ww={class:"overflow-x-auto"},$w={class:"min-w-full divide-y divide-gray-200"},Sw={class:"bg-white divide-y divide-gray-200"},kw={class:"px-6 py-4 whitespace-nowrap"},Cw={class:"flex items-center"},jw={class:"flex-shrink-0 h-10 w-10"},Pw={class:"relative h-10 w-10 bg-gray-100 rounded overflow-hidden"},Iw=["src","alt","onLoad","onError"],Uw={key:0,class:"absolute inset-0 bg-gray-200 rounded flex items-center justify-center"},Aw={key:1,class:"absolute inset-0 bg-gray-200 rounded flex items-center justify-center"},Ow={class:"ml-4"},qw={class:"text-sm font-medium text-gray-900"},Tw={class:"text-sm text-gray-500"},Mw={class:"px-6 py-4 whitespace-nowrap"},Fw={class:"badge-primary"},Nw={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Dw={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Ew={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Vw={class:"px-6 py-4 whitespace-nowrap"},Bw={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},Ww={class:"flex items-center space-x-2"},Lw=["onClick"],Zw=["onClick"],Rw=["onClick"],zw=["onClick"],Jw={key:0,class:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50"},Hw={class:"relative top-20 mx-auto p-5 border w-full max-w-2xl shadow-lg rounded-md bg-white"},Gw={class:"mt-3"},Qw={class:"flex items-center justify-between mb-4"},Kw={class:"form-group"},Xw={class:"form-group"},Yw={class:"form-group"},e4=["value"],t4={class:"form-group"},s4={class:"flex space-x-2"},a4={class:"form-group"},o4={class:"form-group"},r4={class:"mt-1 flex items-center space-x-4"},i4={key:0,class:"flex-shrink-0"},l4=["src"],n4={key:1,class:"flex-shrink-0"},d4={class:"flex-1"},c4={class:"form-group"},u4={class:"flex items-center space-x-4"},m4={class:"flex items-center"},p4={class:"flex items-center"},v4={class:"flex justify-end space-x-3 pt-4"},g4=["disabled"],x4={key:1,class:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50"},y4={class:"relative top-20 mx-auto p-5 border w-full max-w-2xl shadow-lg rounded-md bg-white"},_4={class:"mt-3"},f4={class:"form-group"},h4={class:"form-group"},b4={class:"form-group"},w4=["value"],$4={class:"grid grid-cols-2 gap-4"},S4={class:"form-group"},k4={class:"form-group"},C4={class:"form-group"},j4={class:"form-group"},P4={class:"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-gray-300 border-dashed rounded-md"},I4={class:"space-y-1 text-center"},U4={key:0,class:"mb-4"},A4=["src"],O4={key:1,class:"mx-auto h-12 w-12 text-gray-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48"},q4={class:"flex text-sm text-gray-600"},T4={for:"edit-image-upload",class:"relative cursor-pointer bg-white rounded-md font-medium text-primary-600 hover:text-primary-500 focus-within:outline-none focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-primary-500"},M4={class:"form-group"},F4={class:"flex items-center"},N4={key:2,class:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50"},D4={class:"relative top-20 mx-auto p-5 border w-full max-w-lg shadow-lg rounded-md bg-white"},E4={class:"mt-3"},V4={class:"flex items-center justify-between mb-4"},B4={class:"mb-4 p-4 bg-gray-50 rounded-lg"},W4={class:"font-medium text-gray-900"},L4={class:"text-sm text-gray-600"},Z4={class:"form-group"},R4={class:"flex items-center space-x-4"},z4={class:"flex items-center"},J4={class:"flex items-center"},H4={class:"flex items-center"},G4={class:"form-group"},Q4={class:"form-label"},K4=["placeholder"],X4={class:"form-group"},Y4={class:"form-group"},e3={class:"flex justify-end space-x-3 pt-4"},t3=["disabled"],s3={key:3,class:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50"},a3={class:"relative top-20 mx-auto p-5 border w-full max-w-4xl shadow-lg rounded-md bg-white"},o3={class:"mt-3"},r3={class:"flex items-center justify-between mb-4"},i3={class:"mb-4 p-4 bg-gray-50 rounded-lg"},l3={class:"font-medium text-gray-900"},n3={class:"text-sm text-gray-600"},d3={class:"overflow-x-auto"},c3={class:"min-w-full divide-y divide-gray-200"},u3={class:"bg-white divide-y divide-gray-200"},m3={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},p3={class:"px-6 py-4 whitespace-nowrap"},v3={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},g3={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},x3={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},y3={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},_3={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},f3=xe({__name:"InventoryView",setup(o,{expose:a}){const t=he(),l=je(),y=fe(),p=O(""),n=O(null),x=O(null),W=O(!1),B=O(!1),F=O(!1),h=O(!1),_=O({}),D=O({}),g=O({product_name:"",description:"",category:"",quantity:1,unit:"kg",price_per_unit:0,image_url:"",image_preview:"",image_file:null,is_available:!0}),T=O({product_name:"",description:"",category:"",quantity:1,unit:"kg",price_per_unit:0,image_url:"",image_preview:"",image_file:null,is_available:!0}),N=O(null),v=O(null),m=O({adjustment_type:"add",quantity_change:0,reason:"",notes:""}),b=ie(()=>l.inventoryItems),C=ie(()=>l.productCategories),L=ie(()=>{let G=b.value;return p.value&&(G=G.filter(k=>k.category===p.value)),G.sort((k,ye)=>new Date(ye.created_at).getTime()-new Date(k.created_at).getTime())}),M=G=>D.value[G.id]?Ce("/placeholder-image.svg"):Ce((G==null?void 0:G.image_url)??""),r=async()=>{await l.loadInventoryItems(),b.value.forEach(G=>{if(G.image_url&&_.value[G.id]===void 0){const k=new Image;k.onload=()=>{_.value[G.id]=!1,D.value[G.id]=!1},k.onerror=()=>{_.value[G.id]=!1,D.value[G.id]=!0},_.value[G.id]=!0,D.value[G.id]=!1,k.src=Ce(G.image_url)}})},w=(G,k)=>{_.value[k]=!1,D.value[k]=!0,console.warn(`Failed to load image for inventory item ${k}`)},i=(G,k)=>{var X;const u=(X=G.target.files)==null?void 0:X[0];if(!u)return;if(u.size>5*1024*1024){t.error("File size must be less than 5MB");return}const I=["image/jpeg","image/jpg","image/png","image/gif","image/webp"];if(!u.type.startsWith("image/")&&!I.includes(u.type)){t.error("Please select an image file (JPG, PNG, GIF, WebP)");return}const j=new FileReader;j.onload=z=>{var se;const K=(se=z.target)==null?void 0:se.result;k==="add"?(g.value.image_preview=K,g.value.image_file=u,g.value.image_url=""):(T.value.image_preview=K,T.value.image_file=u,T.value.image_url="")},j.readAsDataURL(u)},A=G=>new Date(G).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),f=async()=>{var G;try{const{image_preview:k,image_file:ye,...u}=g.value,I={...u,vendor_id:((G=y.user)==null?void 0:G.id)||"2",source_waste_submission_id:"",category:g.value.category,image_url:"",image_file:ye||void 0};await l.addToInventory(I),t.success("Item added to inventory successfully!"),E(),await r()}catch(k){t.error(k.message||"Failed to add item to inventory")}},E=()=>{W.value=!1,g.value={product_name:"",description:"",category:"",quantity:1,unit:"kg",price_per_unit:0,image_url:"",image_preview:"",image_file:null,is_available:!0},N.value&&(N.value.value="")},Z=G=>{n.value=G,m.value={adjustment_type:"add",quantity_change:0,reason:"",notes:""},F.value=!0},R=async()=>{var G;if(n.value)try{await l.adjustInventoryQuantity(n.value.id,m.value.adjustment_type,m.value.quantity_change,m.value.reason,((G=y.user)==null?void 0:G.full_name)||"Vendor",m.value.notes),t.success("Quantity adjusted successfully!"),te(),await r()}catch(k){t.error(k.message||"Failed to adjust quantity")}},te=()=>{F.value=!1,n.value=null,m.value={adjustment_type:"add",quantity_change:0,reason:"",notes:""}},pe=G=>{n.value=G,h.value=!0},ee=()=>{h.value=!1,n.value=null},U=G=>{x.value=G,T.value={product_name:G.product_name,description:G.description,category:G.category,quantity:G.quantity,unit:G.unit,price_per_unit:G.price_per_unit,image_url:G.image_url||"",image_preview:G.image_url||"",image_file:null,is_available:G.is_available},B.value=!0},le=async()=>{if(x.value)try{const{image_preview:G,image_file:k,...ye}=T.value,u={...ye,category:T.value.category,image_url:T.value.image_file?"":T.value.image_url,total_value:T.value.quantity*T.value.price_per_unit,image_file:k||void 0};await l.updateInventoryItem(x.value.id,u),t.success("Inventory item updated successfully!"),Y(),await r()}catch(G){t.error(G.message||"Failed to update inventory item")}},Y=()=>{B.value=!1,x.value=null,T.value={product_name:"",description:"",category:"",quantity:1,unit:"kg",price_per_unit:0,image_url:"",image_preview:"",image_file:null,is_available:!0},v.value&&(v.value.value="")},H=async G=>{if(confirm(`Are you sure you want to delete ${G.product_name}?`))try{await l.deleteInventoryItem(G.id),t.success("Inventory item deleted successfully!"),await r()}catch(k){t.error(k.message||"Failed to delete inventory item")}},q=G=>({add:"badge-success",subtract:"badge-danger",set:"badge-primary"})[G]||"badge-gray";_e(()=>{y.initializeAuth(),r(),l.loadWasteCategories()});const P=async()=>{await r()};return a({refreshInventory:P}),(G,k)=>{var u,I,j,X,z,K,se;const ye=Te("router-link");return d(),c("div",cw,[e("div",uw,[e("div",mw,[e("div",pw,[k[28]||(k[28]=e("div",null,[e("h1",{class:"text-2xl font-bold text-gray-900"},"My Inventory"),e("p",{class:"text-gray-600 mt-1"},"Track your waste submissions and their processing status")],-1)),e("div",vw,[e("button",{onClick:k[0]||(k[0]=V=>W.value=!0),class:"btn-secondary"},[$(S(qe),{class:"w-5 h-5 mr-2"}),k[26]||(k[26]=re(" Add to Inventory ",-1))]),$(ye,{to:"/vendor/source-submissions",class:"btn-primary"},{default:ce(()=>[$(S(qe),{class:"w-5 h-5 mr-2"}),k[27]||(k[27]=re(" Submit New Waste ",-1))]),_:1})])])])]),e("div",gw,[e("div",xw,[e("div",yw,[e("div",_w,[e("h3",fw," My Inventory Items ("+s(b.value.length)+") ",1),e("div",hw,[e("button",{onClick:P,class:"flex items-center px-3 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"},[...k[29]||(k[29]=[e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1),re(" Refresh ",-1)])]),J(e("select",{"onUpdate:modelValue":k[1]||(k[1]=V=>p.value=V),class:"form-input"},[k[30]||(k[30]=e("option",{value:""},"All Categories",-1)),(d(!0),c(ne,null,de(C.value,V=>(d(),c("option",{key:V.id,value:V.id},s(V.name),9,bw))),128))],512),[[ue,p.value]])])])]),e("div",ww,[e("table",$w,[k[33]||(k[33]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Product "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Category "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Quantity "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Price/Unit "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Total Value "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Status "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Actions ")])],-1)),e("tbody",Sw,[(d(!0),c(ne,null,de(L.value,V=>(d(),c("tr",{key:V.id,class:"hover:bg-gray-50"},[e("td",kw,[e("div",Cw,[e("div",jw,[e("div",Pw,[e("img",{src:M(V),alt:V.product_name,class:ae(["h-10 w-10 w-full object-cover rounded transition-opacity duration-200",{"opacity-0":_.value[V.id]}]),crossorigin:"anonymous",referrerpolicy:"no-referrer",onLoad:be=>_.value[V.id]=!1,onError:be=>w(be,V.id)},null,42,Iw),_.value[V.id]?(d(),c("div",Uw,[...k[31]||(k[31]=[e("div",{class:"w-4 h-4 border-2 border-gray-400 border-t-transparent rounded-full animate-spin"},null,-1)])])):Q("",!0),D.value[V.id]?(d(),c("div",Aw,[...k[32]||(k[32]=[e("div",{class:"w-6 h-6 text-gray-400"},[e("svg",{fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z","clip-rule":"evenodd"})])],-1)])])):Q("",!0)])]),e("div",Ow,[e("div",qw,s(V.product_name),1),e("div",Tw,s(V.description),1)])])]),e("td",Mw,[e("span",Fw,s(V.category),1)]),e("td",Nw,s(V.quantity)+" "+s(V.unit),1),e("td",Dw," â‚±"+s(V.price_per_unit.toLocaleString()),1),e("td",Ew," â‚±"+s(V.total_value.toLocaleString()),1),e("td",Vw,[e("span",{class:ae(V.is_available?"badge-success":"badge-warning")},s(V.is_available?"Available":"Unavailable"),3)]),e("td",Bw,[e("div",Ww,[e("button",{onClick:be=>Z(V),class:"text-emerald-600 hover:text-emerald-900"}," Adjust Qty ",8,Lw),e("button",{onClick:be=>pe(V),class:"text-violet-600 hover:text-violet-900"}," History ",8,Zw),e("button",{onClick:be=>U(V),class:"text-primary-600 hover:text-primary-900"}," Edit ",8,Rw),e("button",{onClick:be=>H(V),class:"text-danger-600 hover:text-danger-900"}," Delete ",8,zw)])])]))),128))])])])])]),W.value?(d(),c("div",Jw,[e("div",Hw,[e("div",Gw,[e("div",Qw,[k[34]||(k[34]=e("h3",{class:"text-lg font-medium text-gray-900"},"Add Item to Inventory",-1)),e("button",{onClick:E,class:"text-gray-400 hover:text-gray-600"},[$(S(we),{class:"w-6 h-6"})])]),e("form",{onSubmit:Pe(f,["prevent"]),class:"space-y-4"},[e("div",Kw,[k[35]||(k[35]=e("label",{class:"form-label"},"Product Name",-1)),J(e("input",{"onUpdate:modelValue":k[2]||(k[2]=V=>g.value.product_name=V),type:"text",class:"form-input",placeholder:"Enter product name",required:""},null,512),[[oe,g.value.product_name]])]),e("div",Xw,[k[36]||(k[36]=e("label",{class:"form-label"},"Description",-1)),J(e("textarea",{"onUpdate:modelValue":k[3]||(k[3]=V=>g.value.description=V),class:"form-input",rows:"3",placeholder:"Describe the processed product",required:""},null,512),[[oe,g.value.description]])]),e("div",Yw,[k[38]||(k[38]=e("label",{class:"form-label"},"Category",-1)),J(e("select",{"onUpdate:modelValue":k[4]||(k[4]=V=>g.value.category=V),class:"form-input",required:""},[k[37]||(k[37]=e("option",{value:""},"Select category",-1)),(d(!0),c(ne,null,de(C.value,V=>(d(),c("option",{key:V.id,value:V.id},s(V.name),9,e4))),128))],512),[[ue,g.value.category]])]),e("div",t4,[k[40]||(k[40]=e("label",{class:"form-label"},"Quantity",-1)),e("div",s4,[J(e("input",{"onUpdate:modelValue":k[5]||(k[5]=V=>g.value.quantity=V),type:"number",min:"1",class:"form-input flex-1",placeholder:"Enter quantity",required:""},null,512),[[oe,g.value.quantity,void 0,{number:!0}]]),J(e("select",{"onUpdate:modelValue":k[6]||(k[6]=V=>g.value.unit=V),class:"form-input w-32"},[...k[39]||(k[39]=[me('<option value="kg">kg</option><option value="bags">bags</option><option value="bottles">bottles</option><option value="pieces">pieces</option><option value="jars">jars</option><option value="boxes">boxes</option>',6)])],512),[[ue,g.value.unit]])])]),e("div",a4,[k[41]||(k[41]=e("label",{class:"form-label"},"Price per Unit (â‚±)",-1)),J(e("input",{"onUpdate:modelValue":k[7]||(k[7]=V=>g.value.price_per_unit=V),type:"number",min:"0",step:"0.01",class:"form-input",placeholder:"Enter price per unit",required:""},null,512),[[oe,g.value.price_per_unit,void 0,{number:!0}]])]),e("div",o4,[k[44]||(k[44]=e("label",{class:"form-label"},"Product Image (Optional)",-1)),e("div",r4,[g.value.image_preview?(d(),c("div",i4,[e("img",{src:g.value.image_preview,alt:"Product preview",class:"h-20 w-20 rounded-lg object-cover border-2 border-gray-300"},null,8,l4)])):(d(),c("div",n4,[...k[42]||(k[42]=[e("div",{class:"h-20 w-20 rounded-lg bg-gray-200 flex items-center justify-center border-2 border-gray-300"},[e("svg",{class:"h-8 w-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})])],-1)])])),e("div",d4,[e("input",{ref_key:"imageInputAdd",ref:N,type:"file",accept:"image/*",onChange:k[8]||(k[8]=V=>i(V,"add")),class:"hidden"},null,544),e("button",{type:"button",onClick:k[9]||(k[9]=()=>{var V;return(V=N.value)==null?void 0:V.click()}),class:"btn-outline text-sm"},s(g.value.image_preview?"Change Image":"Upload Image"),1),k[43]||(k[43]=e("p",{class:"text-xs text-gray-500 mt-1"},"JPG, PNG up to 5MB",-1))])])]),e("div",c4,[k[47]||(k[47]=e("label",{class:"form-label"},"Availability",-1)),e("div",u4,[e("label",m4,[J(e("input",{"onUpdate:modelValue":k[10]||(k[10]=V=>g.value.is_available=V),type:"radio",value:!0,class:"mr-2"},null,512),[[Me,g.value.is_available]]),k[45]||(k[45]=re(" Available ",-1))]),e("label",p4,[J(e("input",{"onUpdate:modelValue":k[11]||(k[11]=V=>g.value.is_available=V),type:"radio",value:!1,class:"mr-2"},null,512),[[Me,g.value.is_available]]),k[46]||(k[46]=re(" Unavailable ",-1))])])]),e("div",v4,[e("button",{type:"button",onClick:E,class:"btn-outline"}," Cancel "),e("button",{type:"submit",disabled:S(l).loading,class:"btn-primary"},s(S(l).loading?"Adding...":"Add to Inventory"),9,g4)])],32)])])])):Q("",!0),B.value?(d(),c("div",x4,[e("div",y4,[e("div",_4,[e("div",{class:"flex items-center justify-between mb-4"},[k[49]||(k[49]=e("h3",{class:"text-lg font-medium text-gray-900"},"Edit Inventory Item",-1)),e("button",{onClick:Y,class:"text-gray-400 hover:text-gray-600"},[...k[48]||(k[48]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("form",{onSubmit:Pe(le,["prevent"]),class:"space-y-4"},[e("div",f4,[k[50]||(k[50]=e("label",{class:"form-label"},"Product Name",-1)),J(e("input",{"onUpdate:modelValue":k[12]||(k[12]=V=>T.value.product_name=V),type:"text",class:"form-input",required:""},null,512),[[oe,T.value.product_name]])]),e("div",h4,[k[51]||(k[51]=e("label",{class:"form-label"},"Description",-1)),J(e("textarea",{"onUpdate:modelValue":k[13]||(k[13]=V=>T.value.description=V),class:"form-input",rows:"3",required:""},null,512),[[oe,T.value.description]])]),e("div",b4,[k[53]||(k[53]=e("label",{class:"form-label"},"Category",-1)),J(e("select",{"onUpdate:modelValue":k[14]||(k[14]=V=>T.value.category=V),class:"form-input",required:""},[k[52]||(k[52]=e("option",{value:""},"Select Category",-1)),(d(!0),c(ne,null,de(C.value,V=>(d(),c("option",{key:V.id,value:V.id},s(V.name),9,w4))),128))],512),[[ue,T.value.category]])]),e("div",$4,[e("div",S4,[k[54]||(k[54]=e("label",{class:"form-label"},"Quantity",-1)),J(e("input",{"onUpdate:modelValue":k[15]||(k[15]=V=>T.value.quantity=V),type:"number",min:"0",step:"0.1",class:"form-input",required:""},null,512),[[oe,T.value.quantity,void 0,{number:!0}]])]),e("div",k4,[k[56]||(k[56]=e("label",{class:"form-label"},"Unit",-1)),J(e("select",{"onUpdate:modelValue":k[16]||(k[16]=V=>T.value.unit=V),class:"form-input",required:""},[...k[55]||(k[55]=[me('<option value="kg">kg</option><option value="bags">bags</option><option value="bottles">bottles</option><option value="pieces">pieces</option><option value="jars">jars</option><option value="boxes">boxes</option>',6)])],512),[[ue,T.value.unit]])])]),e("div",C4,[k[57]||(k[57]=e("label",{class:"form-label"},"Price per Unit (â‚±)",-1)),J(e("input",{"onUpdate:modelValue":k[17]||(k[17]=V=>T.value.price_per_unit=V),type:"number",min:"0",step:"0.01",class:"form-input",required:""},null,512),[[oe,T.value.price_per_unit,void 0,{number:!0}]])]),e("div",j4,[k[62]||(k[62]=e("label",{class:"form-label"},"Product Image",-1)),e("div",P4,[e("div",I4,[T.value.image_preview?(d(),c("div",U4,[e("img",{src:S(Ce)(T.value.image_preview),alt:"Preview",class:"mx-auto h-32 w-32 object-cover rounded-lg",crossorigin:"anonymous",referrerpolicy:"no-referrer"},null,8,A4)])):(d(),c("svg",O4,[...k[58]||(k[58]=[e("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)])])),e("div",q4,[e("label",T4,[k[59]||(k[59]=e("span",null,"Upload a file",-1)),e("input",{id:"edit-image-upload",ref_key:"imageInputEdit",ref:v,type:"file",class:"sr-only",accept:"image/*",onChange:k[18]||(k[18]=V=>i(V,"edit"))},null,544)]),k[60]||(k[60]=e("p",{class:"pl-1"},"or drag and drop",-1))]),k[61]||(k[61]=e("p",{class:"text-xs text-gray-500"},"PNG, JPG, GIF up to 10MB",-1))])])]),e("div",M4,[e("label",F4,[J(e("input",{"onUpdate:modelValue":k[19]||(k[19]=V=>T.value.is_available=V),type:"checkbox",class:"rounded border-gray-300 text-primary-600 shadow-sm focus:border-primary-300 focus:ring focus:ring-primary-200 focus:ring-opacity-50"},null,512),[[ze,T.value.is_available]]),k[63]||(k[63]=e("span",{class:"ml-2 text-sm text-gray-700"},"Available for sale",-1))])]),e("div",{class:"flex justify-end space-x-3 pt-4"},[e("button",{type:"button",onClick:Y,class:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"}," Cancel "),k[64]||(k[64]=e("button",{type:"submit",class:"px-4 py-2 text-sm font-medium text-white bg-primary-600 border border-transparent rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"}," Update Item ",-1))])],32)])])])):Q("",!0),F.value?(d(),c("div",N4,[e("div",D4,[e("div",E4,[e("div",V4,[k[65]||(k[65]=e("h3",{class:"text-lg font-medium text-gray-900"},"Adjust Quantity",-1)),e("button",{onClick:te,class:"text-gray-400 hover:text-gray-600"},[$(S(we),{class:"w-6 h-6"})])]),e("div",B4,[e("h4",W4,s((u=n.value)==null?void 0:u.product_name),1),e("p",L4,"Current Quantity: "+s((I=n.value)==null?void 0:I.quantity)+" "+s((j=n.value)==null?void 0:j.unit),1)]),e("form",{onSubmit:Pe(R,["prevent"]),class:"space-y-4"},[e("div",Z4,[k[69]||(k[69]=e("label",{class:"form-label"},"Adjustment Type",-1)),e("div",R4,[e("label",z4,[J(e("input",{"onUpdate:modelValue":k[20]||(k[20]=V=>m.value.adjustment_type=V),type:"radio",value:"add",class:"mr-2"},null,512),[[Me,m.value.adjustment_type]]),k[66]||(k[66]=re(" Add Quantity ",-1))]),e("label",J4,[J(e("input",{"onUpdate:modelValue":k[21]||(k[21]=V=>m.value.adjustment_type=V),type:"radio",value:"subtract",class:"mr-2"},null,512),[[Me,m.value.adjustment_type]]),k[67]||(k[67]=re(" Subtract Quantity ",-1))]),e("label",H4,[J(e("input",{"onUpdate:modelValue":k[22]||(k[22]=V=>m.value.adjustment_type=V),type:"radio",value:"set",class:"mr-2"},null,512),[[Me,m.value.adjustment_type]]),k[68]||(k[68]=re(" Set Quantity ",-1))])])]),e("div",G4,[e("label",Q4,s(m.value.adjustment_type==="set"?"New Quantity":"Quantity to "+m.value.adjustment_type),1),J(e("input",{"onUpdate:modelValue":k[23]||(k[23]=V=>m.value.quantity_change=V),type:"number",min:"0",class:"form-input",placeholder:m.value.adjustment_type==="set"?"Enter new quantity":"Enter quantity to "+m.value.adjustment_type,required:""},null,8,K4),[[oe,m.value.quantity_change,void 0,{number:!0}]])]),e("div",X4,[k[71]||(k[71]=e("label",{class:"form-label"},"Reason",-1)),J(e("select",{"onUpdate:modelValue":k[24]||(k[24]=V=>m.value.reason=V),class:"form-input",required:""},[...k[70]||(k[70]=[me('<option value="">Select reason</option><option value="Production">Production</option><option value="Sale">Sale</option><option value="Waste/Loss">Waste/Loss</option><option value="Transfer">Transfer</option><option value="Correction">Correction</option><option value="Other">Other</option>',7)])],512),[[ue,m.value.reason]])]),e("div",Y4,[k[72]||(k[72]=e("label",{class:"form-label"},"Notes (Optional)",-1)),J(e("textarea",{"onUpdate:modelValue":k[25]||(k[25]=V=>m.value.notes=V),class:"form-input",rows:"3",placeholder:"Additional notes about this adjustment"},null,512),[[oe,m.value.notes]])]),e("div",e3,[e("button",{type:"button",onClick:te,class:"btn-outline"}," Cancel "),e("button",{type:"submit",disabled:S(l).loading,class:"btn-primary"},s(S(l).loading?"Adjusting...":"Adjust Quantity"),9,t3)])],32)])])])):Q("",!0),h.value?(d(),c("div",s3,[e("div",a3,[e("div",o3,[e("div",r3,[k[73]||(k[73]=e("h3",{class:"text-lg font-medium text-gray-900"},"Quantity History",-1)),e("button",{onClick:ee,class:"text-gray-400 hover:text-gray-600"},[$(S(we),{class:"w-6 h-6"})])]),e("div",i3,[e("h4",l3,s((X=n.value)==null?void 0:X.product_name),1),e("p",n3,"Current Quantity: "+s((z=n.value)==null?void 0:z.quantity)+" "+s((K=n.value)==null?void 0:K.unit),1)]),e("div",d3,[e("table",c3,[k[74]||(k[74]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Date "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Type "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Change "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Previous "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," New "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Reason "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Adjusted By ")])],-1)),e("tbody",u3,[(d(!0),c(ne,null,de(((se=n.value)==null?void 0:se.quantity_history)||[],V=>(d(),c("tr",{key:V.id,class:"hover:bg-gray-50"},[e("td",m3,s(A(V.adjusted_at)),1),e("td",p3,[e("span",{class:ae(q(V.adjustment_type))},s(V.adjustment_type),3)]),e("td",v3,[e("span",{class:ae(V.adjustment_type==="add"?"text-emerald-600":V.adjustment_type==="subtract"?"text-blood-600":"text-violet-600")},s(V.adjustment_type==="add"?"+":V.adjustment_type==="subtract"?"-":"")+s(V.quantity_change),3)]),e("td",g3,s(V.previous_quantity),1),e("td",x3,s(V.new_quantity),1),e("td",y3,s(V.reason),1),e("td",_3,s(V.adjusted_by),1)]))),128))])])])])])])):Q("",!0)])}}}),h3={class:"min-h-screen bg-gray-50"},b3={class:"bg-white shadow-sm border-b border-gray-200"},w3={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"},$3={class:"flex items-center justify-between"},S3={class:"flex items-center space-x-4"},k3={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},C3={class:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8"},j3={class:"card"},P3={class:"card-body"},I3={class:"flex items-center"},U3={class:"flex-shrink-0"},A3={class:"w-8 h-8 bg-primary-100 rounded-lg flex items-center justify-center"},O3={class:"ml-4"},q3={class:"text-2xl font-semibold text-gray-900"},T3={class:"text-xs text-success-600"},M3={class:"card"},F3={class:"card-body"},N3={class:"flex items-center"},D3={class:"flex-shrink-0"},E3={class:"w-8 h-8 bg-success-100 rounded-lg flex items-center justify-center"},V3={class:"ml-4"},B3={class:"text-2xl font-semibold text-gray-900"},W3={class:"text-xs text-success-600"},L3={class:"card"},Z3={class:"card-body"},R3={class:"flex items-center"},z3={class:"flex-shrink-0"},J3={class:"w-8 h-8 bg-warning-100 rounded-lg flex items-center justify-center"},H3={class:"ml-4"},G3={class:"text-2xl font-semibold text-gray-900"},Q3={class:"text-xs text-success-600"},K3={class:"card"},X3={class:"card-body"},Y3={class:"flex items-center"},e6={class:"flex-shrink-0"},t6={class:"w-8 h-8 bg-info-100 rounded-lg flex items-center justify-center"},s6={class:"ml-4"},a6={class:"text-2xl font-semibold text-gray-900"},o6={class:"text-xs text-success-600"},r6={class:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8"},i6={class:"card"},l6={class:"card-body"},n6={class:"h-64 flex items-center justify-center bg-gray-50 rounded-lg"},d6={class:"text-center"},c6={class:"card"},u6={class:"card-body"},m6={class:"h-64 flex items-center justify-center bg-gray-50 rounded-lg"},p6={class:"text-center"},v6={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},g6={class:"card"},x6={class:"card-body"},y6={class:"space-y-4"},_6={class:"flex items-center space-x-3"},f6={class:"w-8 h-8 bg-primary-100 rounded-full flex items-center justify-center"},h6={class:"text-sm font-medium text-primary-600"},b6={class:"font-medium text-gray-900"},w6={class:"text-sm text-gray-500"},$6={class:"text-right"},S6={class:"font-medium text-gray-900"},k6={class:"text-sm text-gray-500"},C6={class:"card"},j6={class:"card-body"},P6={class:"space-y-4"},I6={class:"font-medium text-gray-900"},U6={class:"text-sm text-gray-500"},A6={class:"text-right"},O6={class:"font-medium text-gray-900"},q6={class:"mt-8"},T6={class:"card"},M6={class:"card-body"},F6={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},N6={class:"text-center"},D6={class:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-3"},E6={class:"text-2xl font-bold text-green-600"},V6={class:"text-center"},B6={class:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-3"},W6={class:"text-2xl font-bold text-blue-600"},L6={class:"text-center"},Z6={class:"w-16 h-16 bg-yellow-100 rounded-full flex items-center justify-center mx-auto mb-3"},R6={class:"text-2xl font-bold text-yellow-600"},z6=xe({__name:"ReportsView",setup(o){const a=he(),t=fe(),l=je(),y=O("30"),p=O({totalSubmissions:0,submissionGrowth:0,wasteProcessed:0,wasteGrowth:0,avgProcessingTime:0,timeImprovement:0,approvalRate:0,approvalGrowth:0,co2Saved:0,energySaved:0}),n=O([]),x=O([]),W=ie(()=>{var g;const D=(g=t.user)==null?void 0:g.id;return D?l.sourceWasteSubmissions.filter(T=>String(T.vendor_id)===String(D)):[]}),B=ie(()=>W.value.filter(D=>D.status==="processed")),F=ie(()=>W.value.filter(D=>D.status==="approved")),h=async()=>{try{await Promise.all([l.loadSourceWasteSubmissions(),l.loadInventoryItems()]);const D=W.value,g=B.value,T=F.value,N=g.reduce((r,w)=>r+w.quantity,0),v=D.length>0?T.length/D.length*100:0,m=g.length>0?g.reduce((r,w)=>{const i=new Date(w.submitted_at||""),A=new Date(w.processed_at||w.submitted_at||"");return r+(A.getTime()-i.getTime())/(1e3*60*60)},0)/g.length:0,b=N*.2,C=N*.4;p.value={totalSubmissions:D.length,submissionGrowth:15.2,wasteProcessed:N,wasteGrowth:22.5,avgProcessingTime:Math.round(m*10)/10,timeImprovement:8.3,approvalRate:Math.round(v*10)/10,approvalGrowth:3.1,co2Saved:Math.round(b),energySaved:Math.round(C)};const L={};D.forEach(r=>{var i,A;const w=r.category_id;w&&!L[w]&&(L[w]={id:w,name:((i=r.category)==null?void 0:i.name)||r.title||"Unknown",category:((A=r.category)==null?void 0:A.name)||"other",submissions:0,totalQuantity:0}),w&&(L[w].submissions++,L[w].totalQuantity+=r.quantity)}),n.value=Object.values(L).sort((r,w)=>w.submissions-r.submissions).slice(0,5);const M={};D.forEach(r=>{const w=new Date(r.submitted_at||""),i=`${w.getFullYear()}-${String(w.getMonth()+1).padStart(2,"0")}`,A=w.toLocaleDateString("en-US",{month:"long",year:"numeric"});M[i]||(M[i]={month:A,submissions:0,wasteProcessed:0}),M[i].submissions++,r.status==="processed"&&(M[i].wasteProcessed+=r.quantity)}),x.value=Object.values(M).sort((r,w)=>w.month.localeCompare(r.month)).slice(0,5)}catch(D){console.error("Failed to load metrics:",D),a.error("Failed to load report data")}},_=()=>{a.success(`Generating vendor report for last ${y.value} days...`)};return _e(async()=>{t.initializeAuth(),await h()}),(D,g)=>(d(),c("div",h3,[e("div",b3,[e("div",w3,[e("div",$3,[g[3]||(g[3]=e("div",null,[e("h1",{class:"text-2xl font-bold text-gray-900"},"My Reports"),e("p",{class:"text-gray-600 mt-1"},"Track your performance and waste contribution")],-1)),e("div",S3,[J(e("select",{"onUpdate:modelValue":g[0]||(g[0]=T=>y.value=T),class:"form-input"},[...g[1]||(g[1]=[e("option",{value:"7"},"Last 7 days",-1),e("option",{value:"30"},"Last 30 days",-1),e("option",{value:"90"},"Last 90 days",-1),e("option",{value:"365"},"Last year",-1)])],512),[[ue,y.value]]),e("button",{onClick:_,class:"btn-primary"},[$(S(Nt),{class:"w-5 h-5 mr-2"}),g[2]||(g[2]=re(" Export Report ",-1))])])])])]),e("div",k3,[e("div",C3,[e("div",j3,[e("div",P3,[e("div",I3,[e("div",U3,[e("div",A3,[$(S(ge),{class:"w-5 h-5 text-primary-600"})])]),e("div",O3,[g[4]||(g[4]=e("p",{class:"text-sm font-medium text-gray-500"},"Total Submissions",-1)),e("p",q3,s(p.value.totalSubmissions),1),e("p",T3,"+"+s(p.value.submissionGrowth)+"% from last period",1)])])])]),e("div",M3,[e("div",F3,[e("div",N3,[e("div",D3,[e("div",E3,[$(S(Se),{class:"w-5 h-5 text-success-600"})])]),e("div",V3,[g[5]||(g[5]=e("p",{class:"text-sm font-medium text-gray-500"},"Waste Processed",-1)),e("p",B3,s(p.value.wasteProcessed)+" kg",1),e("p",W3,"+"+s(p.value.wasteGrowth)+"% from last period",1)])])])]),e("div",L3,[e("div",Z3,[e("div",R3,[e("div",z3,[e("div",J3,[$(S(Ne),{class:"w-5 h-5 text-warning-600"})])]),e("div",H3,[g[6]||(g[6]=e("p",{class:"text-sm font-medium text-gray-500"},"Avg Processing Time",-1)),e("p",G3,s(p.value.avgProcessingTime)+"h",1),e("p",Q3,"-"+s(p.value.timeImprovement)+"% faster",1)])])])]),e("div",K3,[e("div",X3,[e("div",Y3,[e("div",e6,[e("div",t6,[$(S(We),{class:"w-5 h-5 text-info-600"})])]),e("div",s6,[g[7]||(g[7]=e("p",{class:"text-sm font-medium text-gray-500"},"Approval Rate",-1)),e("p",a6,s(p.value.approvalRate)+"%",1),e("p",o6,"+"+s(p.value.approvalGrowth)+"% from last period",1)])])])])]),e("div",r6,[e("div",i6,[g[10]||(g[10]=e("div",{class:"card-header"},[e("h3",{class:"text-lg font-semibold text-gray-900"},"Submission Trend")],-1)),e("div",l6,[e("div",n6,[e("div",d6,[$(S(We),{class:"w-12 h-12 text-gray-400 mx-auto mb-2"}),g[8]||(g[8]=e("p",{class:"text-gray-500"},"Chart visualization would be here",-1)),g[9]||(g[9]=e("p",{class:"text-sm text-gray-400"},"Integration with Chart.js or similar library",-1))])])])]),e("div",c6,[g[13]||(g[13]=e("div",{class:"card-header"},[e("h3",{class:"text-lg font-semibold text-gray-900"},"Waste Categories")],-1)),e("div",u6,[e("div",m6,[e("div",p6,[$(S(We),{class:"w-12 h-12 text-gray-400 mx-auto mb-2"}),g[11]||(g[11]=e("p",{class:"text-gray-500"},"Chart visualization would be here",-1)),g[12]||(g[12]=e("p",{class:"text-sm text-gray-400"},"Integration with Chart.js or similar library",-1))])])])])]),e("div",v6,[e("div",g6,[g[14]||(g[14]=e("div",{class:"card-header"},[e("h3",{class:"text-lg font-semibold text-gray-900"},"Most Submitted Waste Types")],-1)),e("div",x6,[e("div",y6,[(d(!0),c(ne,null,de(n.value,(T,N)=>(d(),c("div",{key:T.id,class:"flex items-center justify-between p-3 bg-gray-50 rounded-lg"},[e("div",_6,[e("div",f6,[e("span",h6,s(N+1),1)]),e("div",null,[e("p",b6,s(T.name),1),e("p",w6,s(T.category),1)])]),e("div",$6,[e("p",S6,s(T.submissions)+" submissions",1),e("p",k6,s(T.totalQuantity)+" kg",1)])]))),128))])])]),e("div",C6,[g[16]||(g[16]=e("div",{class:"card-header"},[e("h3",{class:"text-lg font-semibold text-gray-900"},"Monthly Performance")],-1)),e("div",j6,[e("div",P6,[(d(!0),c(ne,null,de(x.value,T=>(d(),c("div",{key:T.month,class:"flex items-center justify-between p-3 bg-gray-50 rounded-lg"},[e("div",null,[e("p",I6,s(T.month),1),e("p",U6,s(T.submissions)+" submissions",1)]),e("div",A6,[e("p",O6,s(T.wasteProcessed)+" kg",1),g[15]||(g[15]=e("p",{class:"text-sm text-gray-500"},"processed",-1))])]))),128))])])])]),e("div",q6,[e("div",T6,[g[23]||(g[23]=e("div",{class:"card-header"},[e("h3",{class:"text-lg font-semibold text-gray-900"},"Environmental Impact")],-1)),e("div",M6,[e("div",F6,[e("div",N6,[e("div",D6,[$(S(jt),{class:"w-8 h-8 text-green-600"})]),g[17]||(g[17]=e("h4",{class:"font-medium text-gray-900 mb-1"},"Waste Diverted",-1)),e("p",E6,s(p.value.wasteProcessed)+" kg",1),g[18]||(g[18]=e("p",{class:"text-sm text-gray-500"},"From landfills",-1))]),e("div",V6,[e("div",B6,[$(S(Ft),{class:"w-8 h-8 text-blue-600"})]),g[19]||(g[19]=e("h4",{class:"font-medium text-gray-900 mb-1"},"COâ‚‚ Saved",-1)),e("p",W6,s(p.value.co2Saved)+" kg",1),g[20]||(g[20]=e("p",{class:"text-sm text-gray-500"},"Carbon footprint reduction",-1))]),e("div",L6,[e("div",Z6,[$(S(_s),{class:"w-8 h-8 text-yellow-600"})]),g[21]||(g[21]=e("h4",{class:"font-medium text-gray-900 mb-1"},"Energy Saved",-1)),e("p",R6,s(p.value.energySaved)+" kWh",1),g[22]||(g[22]=e("p",{class:"text-sm text-gray-500"},"Equivalent energy",-1))])])])])])])]))}}),J6={class:"min-h-screen bg-gray-50"},H6={class:"bg-white shadow-sm border-b border-gray-200"},G6={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"},Q6={class:"flex items-center justify-between"},K6={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},X6={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},Y6={class:"card-body"},e$={class:"flex items-center justify-between mb-4"},t$={class:"flex items-center space-x-3"},s$={class:"text-lg font-semibold text-gray-900"},a$={class:"text-sm text-gray-500"},o$={class:"flex items-center space-x-2"},r$={class:"flex items-center justify-between"},i$={class:"text-sm text-gray-500"},l$={class:"flex items-center space-x-2"},n$=["onClick"],d$=["onClick"],c$={key:0,class:"text-center py-12"},u$={class:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4"},m$={key:0,class:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50"},p$={class:"relative top-20 mx-auto p-5 border w-full max-w-lg shadow-lg rounded-md bg-white"},v$={class:"mt-3"},g$={class:"flex items-center justify-between mb-4"},x$={class:"text-lg font-medium text-gray-900"},y$={class:"form-group"},_$={class:"form-group"},f$={class:"form-group"},h$={class:"flex items-center space-x-4"},b$={class:"text-sm text-gray-500"},w$={class:"form-group"},$$={class:"form-group"},S$={class:"flex items-center"},k$={class:"flex justify-end space-x-3 pt-4"},C$=["disabled"],j$=xe({__name:"WasteCategoryManagementView",setup(o){const a=he(),t=je(),l=O([]),y=O(!1),p=O(!1),n=O(!1),x=O(null),W=O({name:"",description:"",color:"#10b981",icon:"CubeIcon",is_active:!0}),B=async()=>{try{y.value=!0,await t.loadWasteCategories(),l.value=t.wasteCategories}catch(N){a.error(N.message||"Failed to load categories")}finally{y.value=!1}},F=N=>({CubeIcon:ge,SunIcon:Bt,HeartIcon:Dt,StarIcon:bs,FireIcon:ys,BoltIcon:cs,SparklesIcon:jt})[N]||ge,h=N=>{x.value=N,W.value={name:N.name,description:N.description,color:N.color,icon:N.icon,is_active:N.is_active},n.value=!0},_=async N=>{if(confirm(`Are you sure you want to delete "${N.name}"?`))try{await t.deleteWasteCategory(N.id),a.success("Category deleted successfully!"),await B()}catch(v){a.error(v.message||"Failed to delete category")}},D=async()=>{try{y.value=!0,p.value?(await t.createWasteCategory(W.value),a.success("Category created successfully!")):n.value&&x.value&&(await t.updateWasteCategory(x.value.id,W.value),a.success("Category updated successfully!")),g(),await B()}catch(N){a.error(N.message||"Failed to save category")}finally{y.value=!1}},g=()=>{p.value=!1,n.value=!1,x.value=null,W.value={name:"",description:"",color:"#10b981",icon:"CubeIcon",is_active:!0}},T=N=>new Date(N).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});return _e(()=>{B()}),(N,v)=>(d(),c("div",J6,[e("div",H6,[e("div",G6,[e("div",Q6,[v[8]||(v[8]=e("div",null,[e("h1",{class:"text-2xl font-bold text-gray-900"},"Waste Category Management"),e("p",{class:"text-gray-600 mt-1"},"Manage waste categories for submissions")],-1)),e("button",{onClick:v[0]||(v[0]=m=>p.value=!0),class:"btn-primary"},[$(S(qe),{class:"w-5 h-5 mr-2"}),v[7]||(v[7]=re(" Add Category ",-1))])])])]),e("div",K6,[e("div",X6,[(d(!0),c(ne,null,de(l.value,m=>(d(),c("div",{key:m.id,class:"card hover:shadow-lg transition-shadow duration-200"},[e("div",Y6,[e("div",e$,[e("div",t$,[e("div",{class:"w-12 h-12 rounded-lg flex items-center justify-center",style:nt({backgroundColor:m.color+"20",color:m.color})},[(d(),Ae(vt(F(m.icon)),{class:"w-6 h-6"}))],4),e("div",null,[e("h3",s$,s(m.name),1),e("p",a$,s(m.description),1)])]),e("div",o$,[e("span",{class:ae(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",m.is_active?"bg-emerald-100 text-emerald-800":"bg-gray-100 text-gray-800"])},s(m.is_active?"Active":"Inactive"),3)])]),e("div",r$,[e("div",i$," Created: "+s(T(m.created_at)),1),e("div",l$,[e("button",{onClick:b=>h(m),class:"text-violet-600 hover:text-violet-900 text-sm font-medium"}," Edit ",8,n$),e("button",{onClick:b=>_(m),class:"text-blood-600 hover:text-blood-900 text-sm font-medium"}," Delete ",8,d$)])])])]))),128))]),l.value.length===0?(d(),c("div",c$,[e("div",u$,[$(S(ge),{class:"w-8 h-8 text-gray-400"})]),v[10]||(v[10]=e("h3",{class:"text-lg font-medium text-gray-900 mb-2"},"No categories yet",-1)),v[11]||(v[11]=e("p",{class:"text-gray-500 mb-4"},"Create your first waste category to get started",-1)),e("button",{onClick:v[1]||(v[1]=m=>p.value=!0),class:"btn-primary"},[$(S(qe),{class:"w-5 h-5 mr-2"}),v[9]||(v[9]=re(" Add Category ",-1))])])):Q("",!0)]),p.value||n.value?(d(),c("div",m$,[e("div",p$,[e("div",v$,[e("div",g$,[e("h3",x$,s(p.value?"Add New Category":"Edit Category"),1),e("button",{onClick:g,class:"text-gray-400 hover:text-gray-600"},[$(S(we),{class:"w-6 h-6"})])]),e("form",{onSubmit:Pe(D,["prevent"]),class:"space-y-4"},[e("div",y$,[v[12]||(v[12]=e("label",{class:"form-label"},"Category Name",-1)),J(e("input",{"onUpdate:modelValue":v[2]||(v[2]=m=>W.value.name=m),type:"text",class:"form-input",placeholder:"e.g., Fruits, Vegetables, Grains",required:""},null,512),[[oe,W.value.name]])]),e("div",_$,[v[13]||(v[13]=e("label",{class:"form-label"},"Description",-1)),J(e("textarea",{"onUpdate:modelValue":v[3]||(v[3]=m=>W.value.description=m),class:"form-input",rows:"3",placeholder:"Describe this waste category",required:""},null,512),[[oe,W.value.description]])]),e("div",f$,[v[14]||(v[14]=e("label",{class:"form-label"},"Color",-1)),e("div",h$,[J(e("input",{"onUpdate:modelValue":v[4]||(v[4]=m=>W.value.color=m),type:"color",class:"w-12 h-12 rounded border border-gray-300"},null,512),[[oe,W.value.color]]),e("span",b$,s(W.value.color),1)])]),e("div",w$,[v[16]||(v[16]=e("label",{class:"form-label"},"Icon",-1)),J(e("select",{"onUpdate:modelValue":v[5]||(v[5]=m=>W.value.icon=m),class:"form-input",required:""},[...v[15]||(v[15]=[me('<option value="">Select an icon</option><option value="CubeIcon">Cube</option><option value="SunIcon">Sun</option><option value="HeartIcon">Heart</option><option value="StarIcon">Star</option><option value="FireIcon">Fire</option><option value="BoltIcon">Bolt</option><option value="SparklesIcon">Sparkles</option>',8)])],512),[[ue,W.value.icon]])]),e("div",$$,[e("label",S$,[J(e("input",{"onUpdate:modelValue":v[6]||(v[6]=m=>W.value.is_active=m),type:"checkbox",class:"rounded border-gray-300 text-violet-600 focus:ring-violet-500"},null,512),[[ze,W.value.is_active]]),v[17]||(v[17]=e("span",{class:"ml-2 text-sm text-gray-700"},"Active",-1))])]),e("div",k$,[e("button",{type:"button",onClick:g,class:"btn-outline"}," Cancel "),e("button",{type:"submit",disabled:y.value,class:"btn-primary"},s(y.value?"Saving...":p.value?"Add Category":"Update Category"),9,C$)])],32)])])])):Q("",!0)]))}}),P$={class:"min-h-screen bg-gray-50"},I$={class:"bg-white shadow-sm border-b border-gray-200"},U$={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"},A$={class:"flex items-center justify-between"},O$={class:"flex items-center space-x-4"},q$={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},T$={class:"grid grid-cols-1 md:grid-cols-5 gap-6 mb-8"},M$={class:"card"},F$={class:"card-body"},N$={class:"flex items-center"},D$={class:"flex-shrink-0"},E$={class:"w-8 h-8 bg-warning-100 rounded-lg flex items-center justify-center"},V$={class:"ml-4"},B$={class:"text-2xl font-semibold text-gray-900"},W$={class:"card"},L$={class:"card-body"},Z$={class:"flex items-center"},R$={class:"flex-shrink-0"},z$={class:"w-8 h-8 bg-emerald-100 rounded-lg flex items-center justify-center"},J$={class:"ml-4"},H$={class:"text-2xl font-semibold text-gray-900"},G$={class:"card"},Q$={class:"card-body"},K$={class:"flex items-center"},X$={class:"flex-shrink-0"},Y$={class:"w-8 h-8 bg-blood-100 rounded-lg flex items-center justify-center"},e8={class:"ml-4"},t8={class:"text-2xl font-semibold text-gray-900"},s8={class:"card"},a8={class:"card-body"},o8={class:"flex items-center"},r8={class:"flex-shrink-0"},i8={class:"w-8 h-8 bg-violet-100 rounded-lg flex items-center justify-center"},l8={class:"ml-4"},n8={class:"text-2xl font-semibold text-gray-900"},d8={class:"card"},c8={class:"card-body"},u8={class:"flex items-center"},m8={class:"flex-shrink-0"},p8={class:"w-8 h-8 bg-diamond-100 rounded-lg flex items-center justify-center"},v8={class:"ml-4"},g8={class:"text-2xl font-semibold text-gray-900"},x8={class:"card"},y8={class:"overflow-x-auto"},_8={class:"min-w-full divide-y divide-gray-200"},f8={class:"bg-white divide-y divide-gray-200"},h8={class:"px-6 py-4 whitespace-nowrap"},b8={class:"flex items-center"},w8={class:"flex-shrink-0 h-10 w-10"},$8={key:0,class:"relative h-10 w-10"},S8=["src","alt","onLoad","onError"],k8={key:0,class:"absolute inset-0 bg-gray-200 rounded flex items-center justify-center"},C8={key:1,class:"absolute inset-0 bg-gray-200 rounded flex items-center justify-center"},j8={key:1,class:"h-10 w-10 bg-gray-200 rounded flex items-center justify-center"},P8={class:"ml-4"},I8={class:"text-sm font-medium text-gray-900"},U8={class:"text-sm text-gray-500 truncate max-w-xs"},A8={class:"px-6 py-4 whitespace-nowrap"},O8={class:"flex items-center"},q8={class:"text-sm text-gray-900"},T8={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},M8={class:"px-6 py-4 whitespace-nowrap"},F8={class:"badge-warning"},N8={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},D8={class:"px-6 py-4 whitespace-nowrap"},E8={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},V8={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},B8={class:"flex items-center space-x-2"},W8=["onClick"],L8=["onClick"],Z8=["onClick"],R8={key:0,class:"text-center py-12"},z8={class:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4"},J8={key:0,class:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50"},H8={class:"relative top-20 mx-auto p-5 border w-full max-w-2xl shadow-lg rounded-md bg-white"},G8={class:"mt-3"},Q8={class:"flex items-center justify-between mb-4"},K8={class:"text-lg font-medium text-gray-900"},X8={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Y8={class:"form-group"},e9={class:"form-group"},t9=["value"],s9={class:"form-group"},a9={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},o9={class:"form-group"},r9={class:"form-group"},i9={class:"form-group"},l9={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},n9={class:"form-group"},d9={class:"form-group"},c9={class:"form-group"},u9={class:"form-group"},m9={class:"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-gray-300 border-dashed rounded-md"},p9={class:"space-y-1 text-center"},v9={class:"flex text-sm text-gray-600"},g9={for:"file-upload",class:"relative cursor-pointer bg-white rounded-md font-medium text-violet-600 hover:text-violet-500 focus-within:outline-none focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-violet-500"},x9={key:0,class:"mt-4"},y9={class:"flex items-center justify-center"},_9=["src"],f9={class:"flex justify-end space-x-3 pt-4"},h9=["disabled"],b9={key:1,class:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50"},w9={class:"relative top-20 mx-auto p-5 border w-full max-w-2xl shadow-lg rounded-md bg-white"},$9={class:"mt-3"},S9={class:"flex items-center justify-between mb-4"},k9={class:"space-y-4"},C9={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},j9={class:"text-sm text-gray-900"},P9={class:"flex items-center"},I9={class:"text-sm text-gray-900"},U9={class:"text-sm text-gray-900"},A9={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},O9={class:"text-sm text-gray-900"},q9={class:"text-sm text-gray-900"},T9={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},M9={class:"text-sm text-gray-900"},F9={class:"text-sm text-gray-900"},N9={key:0},D9={class:"text-sm text-gray-900"},E9={key:1},V9={class:"text-sm text-gray-900"},B9={key:2},W9={class:"text-sm text-gray-900"},L9={key:3},Z9={class:"mt-2 flex justify-center"},R9=["src","alt"],z9=xe({__name:"SourceWasteSubmissionView",setup(o){const a=he(),t=je(),l=fe(),y=O([]),p=O([]),n=O(!1),x=O(""),W=O(!1),B=O(!1),F=O(!1),h=O(null),_=O(null),D=O(null),g=O({}),T=O({}),N=O({title:"",category_id:"",description:"",quantity:1,unit:"kg",condition:"fresh",location:"",pickup_date:"",estimated_value:0,image_file:null,image_preview:""}),v=O({pending:0,approved:0,rejected:0,collected:0,processed:0}),m=ie(()=>{let ee=y.value;return x.value&&(ee=ee.filter(U=>U.status===x.value)),ee.sort((U,le)=>new Date(le.submitted_at).getTime()-new Date(U.submitted_at).getTime())}),b=()=>{var U;const ee=(U=l.user)==null?void 0:U.id;ee!=null&&ee!==""?(y.value=t.sourceWasteSubmissions.filter(le=>String(le.vendor_id)===String(ee)),y.value.forEach(le=>{le.image_url&&g.value[le.id]===void 0&&(g.value[le.id]=!0,T.value[le.id]=!1)})):y.value=[],L()},C=async()=>{try{n.value=!0,await Promise.all([t.loadSourceWasteSubmissions(),t.loadWasteCategories()]),b(),p.value=t.wasteCategories.filter(ee=>ee.is_active),y.value.forEach(ee=>{ee.image_url&&(g.value[ee.id]=!0,T.value[ee.id]=!1)})}catch(ee){a.error(ee.message||"Failed to load submissions")}finally{n.value=!1}},L=()=>{const ee=y.value;v.value={pending:ee.filter(U=>U.status==="pending").length,approved:ee.filter(U=>U.status==="approved").length,rejected:ee.filter(U=>U.status==="rejected").length,collected:ee.filter(U=>U.status==="collected").length,processed:ee.filter(U=>U.status==="processed").length}},M=ee=>{h.value=ee,F.value=!0},r=ee=>{_.value=ee,N.value={title:ee.title,category_id:ee.category_id,description:ee.description,quantity:ee.quantity,unit:ee.unit,condition:ee.condition,location:ee.location,pickup_date:ee.pickup_date.split("T")[0],estimated_value:ee.estimated_value||0,image_file:null,image_preview:ee.image_url||""},B.value=!0},w=async ee=>{if(confirm(`Are you sure you want to delete "${ee.title}"?`))try{await t.deleteSourceWasteSubmission(ee.id),a.success("Submission deleted successfully!"),await C()}catch(U){a.error(U.message||"Failed to delete submission")}},i=async()=>{var ee;try{n.value=!0;const U={...N.value,vendor_id:((ee=l.user)==null?void 0:ee.id)||"9",vendor:l.user,image_file:N.value.image_file};W.value?(await t.createSourceWasteSubmission(U),R(),a.success("Waste submitted successfully!"),b()):B.value&&_.value&&(await t.updateSourceWasteSubmission(_.value.id,U),R(),a.success("Submission updated successfully!"),b())}catch(U){a.error(U.message||"Failed to save submission")}finally{n.value=!1}},A=ee=>{const U=ee.target;if(U.files&&U.files[0]){const le=U.files[0];if(le.size>10*1024*1024){a.error("File size must be less than 10MB");return}if(!le.type.startsWith("image/")){a.error("Please select a valid image file");return}N.value.image_file=le;const Y=new FileReader;Y.onload=H=>{var q;N.value.image_preview=(q=H.target)==null?void 0:q.result},Y.readAsDataURL(le)}},f=()=>{N.value.image_file=null,N.value.image_preview="",D.value&&(D.value.value="")},E=(ee,U)=>{g.value[U]=!1,T.value[U]=!0,console.warn(`Failed to load image for submission ${U}`)},Z=ee=>({pending:"badge-warning",approved:"badge-success",rejected:"badge-danger",collected:"badge-primary",processed:"badge-success"})[ee]||"badge-gray",R=()=>{W.value=!1,B.value=!1,_.value=null,N.value={title:"",category_id:"",description:"",quantity:1,unit:"kg",condition:"fresh",location:"",pickup_date:"",estimated_value:0,image_file:null,image_preview:""},D.value&&(D.value.value="")},te=()=>{F.value=!1,h.value=null},pe=ee=>new Date(ee).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return _e(async()=>{l.initializeAuth(),await C()}),(ee,U)=>{var le,Y;return d(),c("div",P$,[e("div",I$,[e("div",U$,[e("div",A$,[U[14]||(U[14]=e("div",null,[e("h1",{class:"text-2xl font-bold text-gray-900"},"Source Waste Submissions"),e("p",{class:"text-gray-600 mt-1"},"Manage your waste submissions by category")],-1)),e("div",O$,[J(e("select",{"onUpdate:modelValue":U[0]||(U[0]=H=>x.value=H),class:"form-input"},[...U[12]||(U[12]=[me('<option value="">All Status</option><option value="pending">Pending</option><option value="approved">Approved</option><option value="rejected">Rejected</option><option value="collected">Collected</option><option value="processed">Processed</option>',6)])],512),[[ue,x.value]]),e("button",{onClick:U[1]||(U[1]=H=>W.value=!0),class:"btn-primary"},[$(S(qe),{class:"w-5 h-5 mr-2"}),U[13]||(U[13]=re(" Submit Waste ",-1))])])])])]),e("div",q$,[e("div",T$,[e("div",M$,[e("div",F$,[e("div",N$,[e("div",D$,[e("div",E$,[$(S(Ne),{class:"w-5 h-5 text-warning-600"})])]),e("div",V$,[U[15]||(U[15]=e("p",{class:"text-sm font-medium text-gray-500"},"Pending",-1)),e("p",B$,s(v.value.pending),1)])])])]),e("div",W$,[e("div",L$,[e("div",Z$,[e("div",R$,[e("div",z$,[$(S(Se),{class:"w-5 h-5 text-emerald-600"})])]),e("div",J$,[U[16]||(U[16]=e("p",{class:"text-sm font-medium text-gray-500"},"Approved",-1)),e("p",H$,s(v.value.approved),1)])])])]),e("div",G$,[e("div",Q$,[e("div",K$,[e("div",X$,[e("div",Y$,[$(S(we),{class:"w-5 h-5 text-blood-600"})])]),e("div",e8,[U[17]||(U[17]=e("p",{class:"text-sm font-medium text-gray-500"},"Rejected",-1)),e("p",t8,s(v.value.rejected),1)])])])]),e("div",s8,[e("div",a8,[e("div",o8,[e("div",r8,[e("div",i8,[$(S(Lt),{class:"w-5 h-5 text-violet-600"})])]),e("div",l8,[U[18]||(U[18]=e("p",{class:"text-sm font-medium text-gray-500"},"Collected",-1)),e("p",n8,s(v.value.collected),1)])])])]),e("div",d8,[e("div",c8,[e("div",u8,[e("div",m8,[e("div",p8,[$(S(Ke),{class:"w-5 h-5 text-diamond-600"})])]),e("div",v8,[U[19]||(U[19]=e("p",{class:"text-sm font-medium text-gray-500"},"Processed",-1)),e("p",g8,s(v.value.processed),1)])])])])]),e("div",x8,[U[23]||(U[23]=e("div",{class:"card-header"},[e("h3",{class:"text-lg font-semibold text-gray-900"},"My Submissions")],-1)),e("div",y8,[e("table",_8,[U[22]||(U[22]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Submission "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Category "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Quantity "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Condition "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Location "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Status "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Submitted "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Actions ")])],-1)),e("tbody",f8,[(d(!0),c(ne,null,de(m.value,H=>{var q,P;return d(),c("tr",{key:H.id,class:"hover:bg-gray-50"},[e("td",h8,[e("div",b8,[e("div",w8,[H.image_url?(d(),c("div",$8,[e("img",{src:S(Ce)(H.image_url),alt:H.title,class:ae(["h-10 w-10 object-cover rounded transition-opacity duration-200",{"opacity-0":g.value[H.id]}]),crossorigin:"anonymous",referrerpolicy:"no-referrer",onLoad:G=>g.value[H.id]=!1,onError:G=>E(G,H.id)},null,42,S8),g.value[H.id]?(d(),c("div",k8,[...U[20]||(U[20]=[e("div",{class:"w-4 h-4 border-2 border-gray-400 border-t-transparent rounded-full animate-spin"},null,-1)])])):Q("",!0),T.value[H.id]?(d(),c("div",C8,[...U[21]||(U[21]=[e("div",{class:"w-6 h-6 text-gray-400"},[e("svg",{fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z","clip-rule":"evenodd"})])],-1)])])):Q("",!0)])):(d(),c("div",j8,[$(S(ge),{class:"w-6 h-6 text-gray-400"})]))]),e("div",P8,[e("div",I8,s(H.title),1),e("div",U8,s(H.description),1)])])]),e("td",A8,[e("div",O8,[e("div",{class:"w-4 h-4 rounded-full mr-2",style:nt({backgroundColor:(q=H.category)==null?void 0:q.color})},null,4),e("span",q8,s((P=H.category)==null?void 0:P.name),1)])]),e("td",T8,s(H.quantity)+" "+s(H.unit),1),e("td",M8,[e("span",F8,s(H.condition.replace("_"," ")),1)]),e("td",N8,s(H.location),1),e("td",D8,[e("span",{class:ae(Z(H.status))},s(H.status),3)]),e("td",E8,s(pe(H.submitted_at)),1),e("td",V8,[e("div",B8,[e("button",{onClick:G=>M(H),class:"text-violet-600 hover:text-violet-900"}," View ",8,W8),H.status==="pending"?(d(),c("button",{key:0,onClick:G=>r(H),class:"text-emerald-600 hover:text-emerald-900"}," Edit ",8,L8)):Q("",!0),H.status==="pending"?(d(),c("button",{key:1,onClick:G=>w(H),class:"text-blood-600 hover:text-blood-900"}," Delete ",8,Z8)):Q("",!0)])])])}),128))])])])]),m.value.length===0?(d(),c("div",R8,[e("div",z8,[$(S(Fe),{class:"w-8 h-8 text-gray-400"})]),U[25]||(U[25]=e("h3",{class:"text-lg font-medium text-gray-900 mb-2"},"No submissions yet",-1)),U[26]||(U[26]=e("p",{class:"text-gray-500 mb-4"},"Submit your first waste to get started",-1)),e("button",{onClick:U[2]||(U[2]=H=>W.value=!0),class:"btn-primary"},[$(S(qe),{class:"w-5 h-5 mr-2"}),U[24]||(U[24]=re(" Submit Waste ",-1))])])):Q("",!0)]),W.value||B.value?(d(),c("div",J8,[e("div",H8,[e("div",G8,[e("div",Q8,[e("h3",K8,s(W.value?"Submit New Waste":"Edit Submission"),1),e("button",{onClick:R,class:"text-gray-400 hover:text-gray-600"},[$(S(we),{class:"w-6 h-6"})])]),e("form",{onSubmit:Pe(i,["prevent"]),class:"space-y-4"},[e("div",X8,[e("div",Y8,[U[27]||(U[27]=e("label",{class:"form-label"},"Title",-1)),J(e("input",{"onUpdate:modelValue":U[3]||(U[3]=H=>N.value.title=H),type:"text",class:"form-input",placeholder:"e.g., Overripe Bananas",required:""},null,512),[[oe,N.value.title]])]),e("div",e9,[U[29]||(U[29]=e("label",{class:"form-label"},"Category",-1)),J(e("select",{"onUpdate:modelValue":U[4]||(U[4]=H=>N.value.category_id=H),class:"form-input",required:""},[U[28]||(U[28]=e("option",{value:""},"Select category",-1)),(d(!0),c(ne,null,de(p.value,H=>(d(),c("option",{key:H.id,value:H.id},s(H.name),9,t9))),128))],512),[[ue,N.value.category_id]])])]),e("div",s9,[U[30]||(U[30]=e("label",{class:"form-label"},"Description",-1)),J(e("textarea",{"onUpdate:modelValue":U[5]||(U[5]=H=>N.value.description=H),class:"form-input",rows:"3",placeholder:"Describe the waste condition and any relevant details",required:""},null,512),[[oe,N.value.description]])]),e("div",a9,[e("div",o9,[U[31]||(U[31]=e("label",{class:"form-label"},"Quantity",-1)),J(e("input",{"onUpdate:modelValue":U[6]||(U[6]=H=>N.value.quantity=H),type:"number",min:"1",class:"form-input",required:""},null,512),[[oe,N.value.quantity,void 0,{number:!0}]])]),e("div",r9,[U[33]||(U[33]=e("label",{class:"form-label"},"Unit",-1)),J(e("select",{"onUpdate:modelValue":U[7]||(U[7]=H=>N.value.unit=H),class:"form-input",required:""},[...U[32]||(U[32]=[me('<option value="kg">Kilograms</option><option value="pieces">Pieces</option><option value="baskets">Baskets</option><option value="bags">Bags</option><option value="boxes">Boxes</option><option value="liters">Liters</option>',6)])],512),[[ue,N.value.unit]])]),e("div",i9,[U[35]||(U[35]=e("label",{class:"form-label"},"Condition",-1)),J(e("select",{"onUpdate:modelValue":U[8]||(U[8]=H=>N.value.condition=H),class:"form-input",required:""},[...U[34]||(U[34]=[me('<option value="fresh">Fresh</option><option value="slightly_damaged">Slightly Damaged</option><option value="overripe">Overripe</option><option value="bruised">Bruised</option><option value="expired">Expired</option><option value="other">Other</option>',6)])],512),[[ue,N.value.condition]])])]),e("div",l9,[e("div",n9,[U[36]||(U[36]=e("label",{class:"form-label"},"Location",-1)),J(e("input",{"onUpdate:modelValue":U[9]||(U[9]=H=>N.value.location=H),type:"text",class:"form-input",placeholder:"e.g., Public Market, Butuan City",required:""},null,512),[[oe,N.value.location]])]),e("div",d9,[U[37]||(U[37]=e("label",{class:"form-label"},"Pickup Date",-1)),J(e("input",{"onUpdate:modelValue":U[10]||(U[10]=H=>N.value.pickup_date=H),type:"date",class:"form-input",required:""},null,512),[[oe,N.value.pickup_date]])])]),e("div",c9,[U[38]||(U[38]=e("label",{class:"form-label"},"Estimated Value (Optional)",-1)),J(e("input",{"onUpdate:modelValue":U[11]||(U[11]=H=>N.value.estimated_value=H),type:"number",min:"0",step:"0.01",class:"form-input",placeholder:"â‚±0.00"},null,512),[[oe,N.value.estimated_value,void 0,{number:!0}]])]),e("div",u9,[U[43]||(U[43]=e("label",{class:"form-label"},"Waste Image (Optional)",-1)),e("div",m9,[e("div",p9,[U[41]||(U[41]=e("svg",{class:"mx-auto h-12 w-12 text-gray-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48"},[e("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)),e("div",v9,[e("label",g9,[U[39]||(U[39]=e("span",null,"Upload a file",-1)),e("input",{ref_key:"imageInput",ref:D,id:"file-upload",name:"file-upload",type:"file",accept:"image/*",onChange:A,class:"sr-only"},null,544)]),U[40]||(U[40]=e("p",{class:"pl-1"},"or drag and drop",-1))]),U[42]||(U[42]=e("p",{class:"text-xs text-gray-500"},"PNG, JPG, GIF up to 10MB",-1))])]),N.value.image_preview?(d(),c("div",x9,[e("div",y9,[e("img",{src:N.value.image_preview,alt:"Preview",class:"h-48 w-48 object-cover rounded-lg border shadow-sm"},null,8,_9)]),e("div",{class:"mt-2 text-center"},[e("button",{type:"button",onClick:f,class:"text-sm text-red-600 hover:text-red-500"}," Remove image ")])])):Q("",!0)]),e("div",f9,[e("button",{type:"button",onClick:R,class:"btn-outline"}," Cancel "),e("button",{type:"submit",disabled:n.value,class:"btn-primary"},s(n.value?"Saving...":W.value?"Submit Waste":"Update Submission"),9,h9)])],32)])])])):Q("",!0),F.value&&h.value?(d(),c("div",b9,[e("div",w9,[e("div",$9,[e("div",S9,[U[44]||(U[44]=e("h3",{class:"text-lg font-medium text-gray-900"},"Submission Details",-1)),e("button",{onClick:te,class:"text-gray-400 hover:text-gray-600"},[$(S(we),{class:"w-6 h-6"})])]),e("div",k9,[e("div",C9,[e("div",null,[U[45]||(U[45]=e("label",{class:"text-sm font-medium text-gray-500"},"Title",-1)),e("p",j9,s(h.value.title),1)]),e("div",null,[U[46]||(U[46]=e("label",{class:"text-sm font-medium text-gray-500"},"Category",-1)),e("div",P9,[e("div",{class:"w-4 h-4 rounded-full mr-2",style:nt({backgroundColor:(le=h.value.category)==null?void 0:le.color})},null,4),e("p",I9,s((Y=h.value.category)==null?void 0:Y.name),1)])])]),e("div",null,[U[47]||(U[47]=e("label",{class:"text-sm font-medium text-gray-500"},"Description",-1)),e("p",U9,s(h.value.description),1)]),e("div",A9,[e("div",null,[U[48]||(U[48]=e("label",{class:"text-sm font-medium text-gray-500"},"Quantity",-1)),e("p",O9,s(h.value.quantity)+" "+s(h.value.unit),1)]),e("div",null,[U[49]||(U[49]=e("label",{class:"text-sm font-medium text-gray-500"},"Condition",-1)),e("p",q9,s(h.value.condition.replace("_"," ")),1)]),e("div",null,[U[50]||(U[50]=e("label",{class:"text-sm font-medium text-gray-500"},"Status",-1)),e("span",{class:ae(Z(h.value.status))},s(h.value.status),3)])]),e("div",T9,[e("div",null,[U[51]||(U[51]=e("label",{class:"text-sm font-medium text-gray-500"},"Location",-1)),e("p",M9,s(h.value.location),1)]),e("div",null,[U[52]||(U[52]=e("label",{class:"text-sm font-medium text-gray-500"},"Pickup Date",-1)),e("p",F9,s(pe(h.value.pickup_date)),1)])]),h.value.estimated_value?(d(),c("div",N9,[U[53]||(U[53]=e("label",{class:"text-sm font-medium text-gray-500"},"Estimated Value",-1)),e("p",D9,"â‚±"+s(h.value.estimated_value.toLocaleString()),1)])):Q("",!0),h.value.admin_notes?(d(),c("div",E9,[U[54]||(U[54]=e("label",{class:"text-sm font-medium text-gray-500"},"Admin Notes",-1)),e("p",V9,s(h.value.admin_notes),1)])):Q("",!0),h.value.rejection_reason?(d(),c("div",B9,[U[55]||(U[55]=e("label",{class:"text-sm font-medium text-gray-500"},"Rejection Reason",-1)),e("p",W9,s(h.value.rejection_reason),1)])):Q("",!0),h.value.image_url?(d(),c("div",L9,[U[56]||(U[56]=e("label",{class:"text-sm font-medium text-gray-500"},"Image",-1)),e("div",Z9,[e("img",{src:S(Ce)(h.value.image_url),alt:h.value.title,class:"max-h-64 max-w-full object-contain rounded-lg border shadow-sm",crossorigin:"anonymous",referrerpolicy:"no-referrer"},null,8,R9)])])):Q("",!0)])])])])):Q("",!0)])}}}),J9=[{path:"/",name:"home",component:Ga,meta:{requiresGuest:!0}},{path:"/login",name:"login",component:mo,meta:{requiresGuest:!0}},{path:"/register",name:"register",component:Eo,meta:{requiresGuest:!0}},{path:"/dashboard",name:"dashboard",component:qt,meta:{requiresAuth:!0}},{path:"/admin/dashboard",name:"admin-dashboard",component:pl,meta:{requiresAuth:!0,roles:["admin"]}},{path:"/user/dashboard",name:"user-dashboard",component:qt,meta:{requiresAuth:!0,roles:["user"]}},{path:"/profile",name:"profile",component:Fr,meta:{requiresAuth:!0}},{path:"/admin/users",name:"admin-users",component:ed,meta:{requiresAuth:!0,roles:["admin"]}},{path:"/admin/waste",name:"admin-waste",component:Wc,meta:{requiresAuth:!0,roles:["admin"]}},{path:"/admin/orders",name:"admin-orders",component:om,meta:{requiresAuth:!0,roles:["admin"]}},{path:"/admin/products",name:"admin-products",component:Hp,meta:{requiresAuth:!0,roles:["admin"]}},{path:"/admin/categories",name:"admin-categories",component:Lv,meta:{requiresAuth:!0,roles:["admin"]}},{path:"/admin/delivery",name:"admin-delivery",component:v1,meta:{requiresAuth:!0,roles:["admin"]}},{path:"/admin/reports",name:"admin-reports",component:sy,meta:{requiresAuth:!0,roles:["admin"]}},{path:"/admin/analytics",name:"admin-analytics",component:s_,meta:{requiresAuth:!0,roles:["admin"]}},{path:"/user/products",name:"user-products",component:Kh,meta:{requiresAuth:!0,roles:["user"]}},{path:"/user/orders",name:"user-orders",component:Xb,meta:{requiresAuth:!0,roles:["user"]}},{path:"/vendor/dashboard",name:"vendor-dashboard",component:dw,meta:{requiresAuth:!0,roles:["vendor"]}},{path:"/vendor/source-submissions",name:"vendor-source-submissions",component:z9,meta:{requiresAuth:!0,roles:["vendor"]}},{path:"/vendor/categories",name:"vendor-categories",component:j$,meta:{requiresAuth:!0,roles:["vendor"]}},{path:"/vendor/inventory",name:"vendor-inventory",component:f3,meta:{requiresAuth:!0,roles:["vendor"]}},{path:"/vendor/reports",name:"vendor-reports",component:z6,meta:{requiresAuth:!0,roles:["vendor"]}},{path:"/products",redirect:()=>"/user/products"},{path:"/orders",redirect:()=>"/user/orders"},{path:"/:pathMatch(.*)*",redirect:"/"}],Zt=Gt({history:Qt(),routes:J9});Zt.beforeEach(async(o,a,t)=>{var y;const l=fe();o.meta.requiresAuth&&!l.isAuthenticated?t("/login"):o.meta.requiresGuest&&l.isAuthenticated||o.meta.roles&&Array.isArray(o.meta.roles)&&!o.meta.roles.includes((y=l.user)==null?void 0:y.role)||o.path==="/dashboard"?l.isAdmin?t("/admin/dashboard"):l.isVendor?t("/vendor/dashboard"):t("/user/dashboard"):t()});const Xe=Kt(Gs);Xe.use(Xt());Xe.use(Zt);Xe.use(Yt,{position:"top-right",timeout:3e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!1,closeButton:"button",icon:!0,rtl:!1});const H9=fe();H9.initializeAuth();rs();ut.initializeAllStores().catch(console.error);Xe.mount("#app");
//# sourceMappingURL=index-iL6UXBjx.js.map
